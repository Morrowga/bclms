(function(N,M){typeof exports=="object"&&typeof module<"u"?M(exports):typeof define=="function"&&define.amd?define(["exports"],M):(N=typeof globalThis<"u"?globalThis:N||self,M(N.Storybook={}))})(this,function(N){"use strict";var p_=Object.defineProperty;var d_=(N,M,yt)=>M in N?p_(N,M,{enumerable:!0,configurable:!0,writable:!0,value:yt}):N[M]=yt;var a=(N,M,yt)=>(d_(N,typeof M!="symbol"?M+"":M,yt),yt);var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bl(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var e=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}var wi={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function s(u,c,h,p,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new i(h,p||u,d),b=e?e+c:c;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],f]:u._events[b].push(f):(u._events[b]=f,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,p;if(this._eventsCount===0)return c;for(p in h=this._events)n.call(h,p)&&c.push(e?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c){var h=e?e+c:c,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var d=0,f=p.length,b=new Array(f);d<f;d++)b[d]=p[d].fn;return b},l.prototype.listenerCount=function(c){var h=e?e+c:c,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(c,h,p,d,f,b){var S=e?e+c:c;if(!this._events[S])return!1;var g=this._events[S],P=arguments.length,B,m;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),P){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,p),!0;case 4:return g.fn.call(g.context,h,p,d),!0;case 5:return g.fn.call(g.context,h,p,d,f),!0;case 6:return g.fn.call(g.context,h,p,d,f,b),!0}for(m=1,B=new Array(P-1);m<P;m++)B[m-1]=arguments[m];g.fn.apply(g.context,B)}else{var W=g.length,L;for(m=0;m<W;m++)switch(g[m].once&&this.removeListener(c,g[m].fn,void 0,!0),P){case 1:g[m].fn.call(g[m].context);break;case 2:g[m].fn.call(g[m].context,h);break;case 3:g[m].fn.call(g[m].context,h,p);break;case 4:g[m].fn.call(g[m].context,h,p,d);break;default:if(!B)for(L=1,B=new Array(P-1);L<P;L++)B[L-1]=arguments[L];g[m].fn.apply(g[m].context,B)}}return!0},l.prototype.on=function(c,h,p){return s(this,c,h,p,!1)},l.prototype.once=function(c,h,p){return s(this,c,h,p,!0)},l.prototype.removeListener=function(c,h,p,d){var f=e?e+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var b=this._events[f];if(b.fn)b.fn===h&&(!d||b.once)&&(!p||b.context===p)&&o(this,f);else{for(var S=0,g=[],P=b.length;S<P;S++)(b[S].fn!==h||d&&!b[S].once||p&&b[S].context!==p)&&g.push(b[S]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=e?e+c:c,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,t.exports=l})(wi);var Cl=wi.exports;const Z=yt(Cl),v={CHANGE:"change",CLICK:"click",COMPLETE:"complete",ERROR:"error",FILE_LOAD:"fileload",MOUSE_DOWN:"mousedown",PRESS_MOVE:"pressmove",PRESS_UP:"pressup",PROGRESS:"progress",TICK:"tick"},Bi=Object.values(v);function St(t,n){const e=t.getChildByName(n);return e||void 0}function k(t,n){const e=St(t,n);return e instanceof createjs.MovieClip?e:void 0}function Sn(t){return t.labels}function kl(t){return t===Object(t)}function wn(t){const n=[];return t.forEach(e=>{kl(e)?n.push(R(e)):Array.isArray(e)?n.push(wn(e)):n.push(e)}),n}function F(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function R(t){const n={};return Object.keys(t).forEach(e=>{const r=t[e];Array.isArray(r)?n[e]=wn(r):F(r)?n[e]=R(r):n[e]=r}),n}const Dl={BigButtonPres:"sndbigbuttonpress",Logo:"sndlogo",RadioHeavyButtonPress:"sndradioheavybuttonpress",RadioLightButtonPress:"sndradiolightbuttonpress",SyncTest:"sndsynctest",VolumeTest:"sndvolumetestwav"},Ci={SbInit:"sbinit",Start:"start"},x=Object.freeze({AreSettingsProtected:!0,CaptionHilites:{Colors:["#FFF450","#B9E5FB","#C6DD7F","#ED1846"],Stroke:{Color:"#333333",Thickness:2}},ContentVideoId:"contentVideo",HtmlElementIds:{AnimationContainer:"animation_container",Canvas:"canvas",DomOverlayContainer:"dom_overlay_container",ProgressBarFill:"progressBarFill"},IntroCompleteWaitDelayMs:1500,TutorialIntroDelayMs:2500,Version:"2024.03.02.00"}),it={Cancel:"cancel",Close:"close",No:"no",Yes:"yes"},Pl=Object.values(it),tt={DualSwitch:"dualSwitch",EyeTracker:"eyeTracker",SingleSwitch:"singleSwitch",TapMouse:"tapMouse"},El=Object.values(tt),$={Prev:"prev",Next:"next",Restart:"restart"},Tl=Object.values($),D={EngineConfig:{buttonsMenu:null,contentVideoUrl:"",exitRedirectUrl:"",navButtonsSoundKey:"",pressIndicatorDelay:2500,sceneHandler:null,singleDeviceDelayMs:3e3,startCallback:null,startCallbackContext:void 0,shouldUseVideoBuffer:!0,shouldWaitForNavSounds:!1,storybookId:"",videoFps:30},MessagePanel:{AutoClose:{ButtonId:it.Close,DelayMs:1250},DimBack:{Alpha:.4,Color:"#000"}},SelectedNavButtonId:$.Next,Settings:{audio:{bgm:{isEnabled:!0,volume:.5},sound:{isEnabled:!0,volume:1},voice:{isEnabled:!0,volume:1}},device:{inputDevice:tt.TapMouse},hasCompletedTutorial:!1,storybook:{aacSymbolsEnabled:!0,captionsEnabled:!0,captionHiliteColorIndex:0,captionHilitesEnabled:!0,helpfulTipsEnabled:!0},storybooksStates:{}}};var ki=Object.prototype.toString,Di=function(n){var e=ki.call(n),r=e==="[object Arguments]";return r||(r=e!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&ki.call(n.callee)==="[object Function]"),r},Bn,Pi;function Il(){if(Pi)return Bn;Pi=1;var t;if(!Object.keys){var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=Di,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),o=i.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(d){var f=d.constructor;return f&&f.prototype===d},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!c["$"+d]&&n.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{u(window[d])}catch{return!0}}catch{return!0}return!1}(),p=function(d){if(typeof window>"u"||!h)return u(d);try{return u(d)}catch{return!1}};t=function(f){var b=f!==null&&typeof f=="object",S=e.call(f)==="[object Function]",g=r(f),P=b&&e.call(f)==="[object String]",B=[];if(!b&&!S&&!g)throw new TypeError("Object.keys called on a non-object");var m=o&&S;if(P&&f.length>0&&!n.call(f,0))for(var W=0;W<f.length;++W)B.push(String(W));if(g&&f.length>0)for(var L=0;L<f.length;++L)B.push(String(L));else for(var H in f)!(m&&H==="prototype")&&n.call(f,H)&&B.push(String(H));if(s)for(var ft=p(f),q=0;q<l.length;++q)!(ft&&l[q]==="constructor")&&n.call(f,l[q])&&B.push(l[q]);return B}}return Bn=t,Bn}var Ml=Array.prototype.slice,xl=Di,Ei=Object.keys,Be=Ei?function(n){return Ei(n)}:Il(),Ti=Object.keys;Be.shim=function(){if(Object.keys){var n=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);n||(Object.keys=function(r){return xl(r)?Ti(Ml.call(r)):Ti(r)})}else Object.keys=Be;return Object.keys||Be};var Cn=Be,Ce=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;n[e]=i;for(e in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var s=Object.getOwnPropertySymbols(n);if(s.length!==1||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(n,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(n,e);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Ii=typeof Symbol<"u"&&Symbol,Ll=Ce,kn=function(){return typeof Ii!="function"||typeof Symbol!="function"||typeof Ii("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ll()},Mi={foo:{}},$l=Object,Al=function(){return{__proto__:Mi}.foo===Mi.foo&&!({__proto__:null}instanceof $l)},Ol="Function.prototype.bind called on incompatible ",Nl=Object.prototype.toString,Fl=Math.max,Rl="[object Function]",xi=function(n,e){for(var r=[],i=0;i<n.length;i+=1)r[i]=n[i];for(var s=0;s<e.length;s+=1)r[s+n.length]=e[s];return r},Vl=function(n,e){for(var r=[],i=e||0,s=0;i<n.length;i+=1,s+=1)r[s]=n[i];return r},Hl=function(t,n){for(var e="",r=0;r<t.length;r+=1)e+=t[r],r+1<t.length&&(e+=n);return e},zl=function(n){var e=this;if(typeof e!="function"||Nl.apply(e)!==Rl)throw new TypeError(Ol+e);for(var r=Vl(arguments,1),i,s=function(){if(this instanceof i){var h=e.apply(this,xi(r,arguments));return Object(h)===h?h:this}return e.apply(n,xi(r,arguments))},o=Fl(0,e.length-r.length),l=[],u=0;u<o;u++)l[u]="$"+u;if(i=Function("binder","return function ("+Hl(l,",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var c=function(){};c.prototype=e.prototype,i.prototype=new c,c.prototype=null}return i},jl=zl,Dn=Function.prototype.bind||jl,Ul=Function.prototype.call,Gl=Object.prototype.hasOwnProperty,Wl=Dn,Li=Wl.call(Ul,Gl),_,xt=SyntaxError,$i=Function,Lt=TypeError,Pn=function(t){try{return $i('"use strict"; return ('+t+").constructor;")()}catch{}},wt=Object.getOwnPropertyDescriptor;if(wt)try{wt({},"")}catch{wt=null}var En=function(){throw new Lt},ql=wt?function(){try{return arguments.callee,En}catch{try{return wt(arguments,"callee").get}catch{return En}}}():En,$t=kn(),Kl=Al(),C=Object.getPrototypeOf||(Kl?function(t){return t.__proto__}:null),At={},Ql=typeof Uint8Array>"u"||!C?_:C(Uint8Array),Bt={"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":$t&&C?C([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":At,"%AsyncGenerator%":At,"%AsyncGeneratorFunction%":At,"%AsyncIteratorPrototype%":At,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":$i,"%GeneratorFunction%":At,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$t&&C?C(C([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$t||!C?_:C(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$t||!C?_:C(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$t&&C?C(""[Symbol.iterator]()):_,"%Symbol%":$t?Symbol:_,"%SyntaxError%":xt,"%ThrowTypeError%":ql,"%TypedArray%":Ql,"%TypeError%":Lt,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet};if(C)try{null.error}catch(t){var Yl=C(C(t));Bt["%Error.prototype%"]=Yl}var Xl=function t(n){var e;if(n==="%AsyncFunction%")e=Pn("async function () {}");else if(n==="%GeneratorFunction%")e=Pn("function* () {}");else if(n==="%AsyncGeneratorFunction%")e=Pn("async function* () {}");else if(n==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(e=r.prototype)}else if(n==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&C&&(e=C(i.prototype))}return Bt[n]=e,e},Ai={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xt=Dn,ke=Li,Jl=Xt.call(Function.call,Array.prototype.concat),Zl=Xt.call(Function.apply,Array.prototype.splice),Oi=Xt.call(Function.call,String.prototype.replace),De=Xt.call(Function.call,String.prototype.slice),tu=Xt.call(Function.call,RegExp.prototype.exec),eu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nu=/\\(\\)?/g,ru=function(n){var e=De(n,0,1),r=De(n,-1);if(e==="%"&&r!=="%")throw new xt("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&e!=="%")throw new xt("invalid intrinsic syntax, expected opening `%`");var i=[];return Oi(n,eu,function(s,o,l,u){i[i.length]=l?Oi(u,nu,"$1"):o||s}),i},iu=function(n,e){var r=n,i;if(ke(Ai,r)&&(i=Ai[r],r="%"+i[0]+"%"),ke(Bt,r)){var s=Bt[r];if(s===At&&(s=Xl(r)),typeof s>"u"&&!e)throw new Lt("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new xt("intrinsic "+n+" does not exist!")},z=function(n,e){if(typeof n!="string"||n.length===0)throw new Lt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Lt('"allowMissing" argument must be a boolean');if(tu(/^%?[^%]*%?$/,n)===null)throw new xt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=ru(n),i=r.length>0?r[0]:"",s=iu("%"+i+"%",e),o=s.name,l=s.value,u=!1,c=s.alias;c&&(i=c[0],Zl(r,Jl([0,1],c)));for(var h=1,p=!0;h<r.length;h+=1){var d=r[h],f=De(d,0,1),b=De(d,-1);if((f==='"'||f==="'"||f==="`"||b==='"'||b==="'"||b==="`")&&f!==b)throw new xt("property names with quotes must have matching quotes");if((d==="constructor"||!p)&&(u=!0),i+="."+d,o="%"+i+"%",ke(Bt,o))l=Bt[o];else if(l!=null){if(!(d in l)){if(!e)throw new Lt("base intrinsic for "+n+" exists, but the property is not available.");return}if(wt&&h+1>=r.length){var S=wt(l,d);p=!!S,p&&"get"in S&&!("originalValue"in S.get)?l=S.get:l=l[d]}else p=ke(l,d),l=l[d];p&&!u&&(Bt[o]=l)}}return l},su=z,Tn=su("%Object.defineProperty%",!0),In=function(){if(Tn)try{return Tn({},"a",{value:1}),!0}catch{return!1}return!1};In.hasArrayLengthDefineBug=function(){if(!In())return null;try{return Tn([],"length",{value:1}).length!==1}catch{return!0}};var Pe=In,ou=z,Ee=ou("%Object.getOwnPropertyDescriptor%",!0);if(Ee)try{Ee([],"length")}catch{Ee=null}var Mn=Ee,au=Pe(),xn=z,Jt=au&&xn("%Object.defineProperty%",!0);if(Jt)try{Jt({},"a",{value:1})}catch{Jt=!1}var lu=xn("%SyntaxError%"),Ot=xn("%TypeError%"),Ni=Mn,Ln=function(n,e,r){if(!n||typeof n!="object"&&typeof n!="function")throw new Ot("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Ot("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ot("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ot("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ot("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ot("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,u=!!Ni&&Ni(n,e);if(Jt)Jt(n,e,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:r,writable:s===null&&u?u.writable:!s});else if(l||!i&&!s&&!o)n[e]=r;else throw new lu("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},uu=Cn,cu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",hu=Object.prototype.toString,pu=Array.prototype.concat,Fi=Ln,du=function(t){return typeof t=="function"&&hu.call(t)==="[object Function]"},Ri=Pe(),fu=function(t,n,e,r){if(n in t){if(r===!0){if(t[n]===e)return}else if(!du(r)||!r())return}Ri?Fi(t,n,e,!0):Fi(t,n,e)},Vi=function(t,n){var e=arguments.length>2?arguments[2]:{},r=uu(n);cu&&(r=pu.call(r,Object.getOwnPropertySymbols(n)));for(var i=0;i<r.length;i+=1)fu(t,r[i],n[r[i]],e[r[i]])};Vi.supportsDescriptors=!!Ri;var Ct=Vi,Hi={exports:{}},zi=z,ji=Ln,yu=Pe(),Ui=Mn,Gi=zi("%TypeError%"),gu=zi("%Math.floor%"),_u=function(n,e){if(typeof n!="function")throw new Gi("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||gu(e)!==e)throw new Gi("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in n&&Ui){var o=Ui(n,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(yu?ji(n,"length",e,!0,!0):ji(n,"length",e)),n};(function(t){var n=Dn,e=z,r=_u,i=e("%TypeError%"),s=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),l=e("%Reflect.apply%",!0)||n.call(o,s),u=e("%Object.defineProperty%",!0),c=e("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}t.exports=function(d){if(typeof d!="function")throw new i("a function is required");var f=l(n,o,arguments);return r(f,1+c(0,d.length-(arguments.length-1)),!0)};var h=function(){return l(n,s,arguments)};u?u(t.exports,"apply",{value:h}):t.exports.apply=h})(Hi);var Nt=Hi.exports,Wi=z,qi=Nt,bu=qi(Wi("String.prototype.indexOf")),j=function(n,e){var r=Wi(n,!!e);return typeof r=="function"&&bu(n,".prototype.")>-1?qi(r):r},vu=Cn,Ki=Ce(),Qi=j,Yi=Object,mu=Qi("Array.prototype.push"),Xi=Qi("Object.prototype.propertyIsEnumerable"),Su=Ki?Object.getOwnPropertySymbols:null,Ji=function(n,e){if(n==null)throw new TypeError("target must be an object");var r=Yi(n);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var s=Yi(arguments[i]),o=vu(s),l=Ki&&(Object.getOwnPropertySymbols||Su);if(l)for(var u=l(s),c=0;c<u.length;++c){var h=u[c];Xi(s,h)&&mu(o,h)}for(var p=0;p<o.length;++p){var d=o[p];if(Xi(s,d)){var f=s[d];r[d]=f}}}return r},$n=Ji,wu=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",n=t.split(""),e={},r=0;r<n.length;++r)e[n[r]]=n[r];var i=Object.assign({},e),s="";for(var o in i)s+=o;return t!==s},Bu=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Zi=function(){return!Object.assign||wu()||Bu()?$n:Object.assign},Cu=Ct,ku=Zi,Du=function(){var n=ku();return Cu(Object,{assign:n},{assign:function(){return Object.assign!==n}}),n},Pu=Ct,Eu=Nt,Tu=Ji,ts=Zi,Iu=Du,Mu=Eu.apply(ts()),es=function(n,e){return Mu(Object,arguments)};Pu(es,{getPolyfill:ts,implementation:Tu,shim:Iu});var xu=es,Zt=function(){return typeof(function(){}).name=="string"},te=Object.getOwnPropertyDescriptor;if(te)try{te([],"length")}catch{te=null}Zt.functionsHaveConfigurableNames=function(){if(!Zt()||!te)return!1;var n=te(function(){},"name");return!!n&&!!n.configurable};var Lu=Function.prototype.bind;Zt.boundFunctionsHaveNames=function(){return Zt()&&typeof Lu=="function"&&(function(){}).bind().name!==""};var $u=Zt,ns=Ln,Au=Pe(),Ou=$u.functionsHaveConfigurableNames(),Nu=TypeError,Fu=function(n,e){if(typeof n!="function")throw new Nu("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||Ou)&&(Au?ns(n,"name",e,!0,!0):ns(n,"name",e)),n},Ru=Fu,Vu=Object,Hu=TypeError,rs=Ru(function(){if(this!=null&&this!==Vu(this))throw new Hu("RegExp.prototype.flags getter called on non-object");var n="";return this.hasIndices&&(n+="d"),this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),this.dotAll&&(n+="s"),this.unicode&&(n+="u"),this.unicodeSets&&(n+="v"),this.sticky&&(n+="y"),n},"get flags",!0),zu=rs,ju=Ct.supportsDescriptors,Uu=Object.getOwnPropertyDescriptor,is=function(){if(ju&&/a/mig.flags==="gim"){var n=Uu(RegExp.prototype,"flags");if(n&&typeof n.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),e==="dy")return n.get}}return zu},Gu=Ct.supportsDescriptors,Wu=is,qu=Object.getOwnPropertyDescriptor,Ku=Object.defineProperty,Qu=TypeError,ss=Object.getPrototypeOf,Yu=/a/,Xu=function(){if(!Gu||!ss)throw new Qu("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var n=Wu(),e=ss(Yu),r=qu(e,"flags");return(!r||r.get!==n)&&Ku(e,"flags",{configurable:!0,enumerable:!1,get:n}),n},Ju=Ct,Zu=Nt,tc=rs,os=is,ec=Xu,as=Zu(os());Ju(as,{getPolyfill:os,implementation:tc,shim:ec});var nc=as,Te={exports:{}},rc=Ce,kt=function(){return rc()&&!!Symbol.toStringTag},ic=kt(),sc=j,An=sc("Object.prototype.toString"),Ie=function(n){return ic&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:An(n)==="[object Arguments]"},ls=function(n){return Ie(n)?!0:n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&An(n)!=="[object Array]"&&An(n.callee)==="[object Function]"},oc=function(){return Ie(arguments)}();Ie.isLegacyArguments=ls;var us=oc?Ie:ls;const ac=Bl(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var On=typeof Map=="function"&&Map.prototype,Nn=Object.getOwnPropertyDescriptor&&On?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Me=On&&Nn&&typeof Nn.get=="function"?Nn.get:null,cs=On&&Map.prototype.forEach,Fn=typeof Set=="function"&&Set.prototype,Rn=Object.getOwnPropertyDescriptor&&Fn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,xe=Fn&&Rn&&typeof Rn.get=="function"?Rn.get:null,hs=Fn&&Set.prototype.forEach,lc=typeof WeakMap=="function"&&WeakMap.prototype,ee=lc?WeakMap.prototype.has:null,uc=typeof WeakSet=="function"&&WeakSet.prototype,ne=uc?WeakSet.prototype.has:null,cc=typeof WeakRef=="function"&&WeakRef.prototype,ps=cc?WeakRef.prototype.deref:null,hc=Boolean.prototype.valueOf,pc=Object.prototype.toString,dc=Function.prototype.toString,fc=String.prototype.match,Vn=String.prototype.slice,gt=String.prototype.replace,yc=String.prototype.toUpperCase,ds=String.prototype.toLowerCase,fs=RegExp.prototype.test,ys=Array.prototype.concat,et=Array.prototype.join,gc=Array.prototype.slice,gs=Math.floor,Hn=typeof BigInt=="function"?BigInt.prototype.valueOf:null,zn=Object.getOwnPropertySymbols,jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="object",E=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ft||!0)?Symbol.toStringTag:null,_s=Object.prototype.propertyIsEnumerable,bs=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function vs(t,n){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||fs.call(/e/,n))return n;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-gs(-t):gs(t);if(r!==t){var i=String(r),s=Vn.call(n,i.length+1);return gt.call(i,e,"$&_")+"."+gt.call(gt.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return gt.call(n,e,"$&_")}var Un=ac,ms=Un.custom,Ss=Cs(ms)?ms:null,_c=function t(n,e,r,i){var s=e||{};if(_t(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(_t(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=_t(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(_t(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(_t(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof n>"u")return"undefined";if(n===null)return"null";if(typeof n=="boolean")return n?"true":"false";if(typeof n=="string")return Ds(n,s);if(typeof n=="number"){if(n===0)return 1/0/n>0?"0":"-0";var u=String(n);return l?vs(n,u):u}if(typeof n=="bigint"){var c=String(n)+"n";return l?vs(n,c):c}var h=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=h&&h>0&&typeof n=="object")return Gn(n)?"[Array]":"[Object]";var p=Ac(s,r);if(typeof i>"u")i=[];else if(ks(i,n)>=0)return"[Circular]";function d(Yt,mn,h_){if(mn&&(i=gc.call(i),i.push(mn)),h_){var wl={depth:s.depth};return _t(s,"quoteStyle")&&(wl.quoteStyle=s.quoteStyle),t(Yt,wl,r+1,i)}return t(Yt,s,r+1,i)}if(typeof n=="function"&&!Bs(n)){var f=Dc(n),b=Le(n,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(b.length>0?" { "+et.call(b,", ")+" }":"")}if(Cs(n)){var S=Ft?gt.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):jn.call(n);return typeof n=="object"&&!Ft?re(S):S}if(xc(n)){for(var g="<"+ds.call(String(n.nodeName)),P=n.attributes||[],B=0;B<P.length;B++)g+=" "+P[B].name+"="+ws(bc(P[B].value),"double",s);return g+=">",n.childNodes&&n.childNodes.length&&(g+="..."),g+="</"+ds.call(String(n.nodeName))+">",g}if(Gn(n)){if(n.length===0)return"[]";var m=Le(n,d);return p&&!$c(m)?"["+qn(m,p)+"]":"[ "+et.call(m,", ")+" ]"}if(mc(n)){var W=Le(n,d);return!("cause"in Error.prototype)&&"cause"in n&&!_s.call(n,"cause")?"{ ["+String(n)+"] "+et.call(ys.call("[cause]: "+d(n.cause),W),", ")+" }":W.length===0?"["+String(n)+"]":"{ ["+String(n)+"] "+et.call(W,", ")+" }"}if(typeof n=="object"&&o){if(Ss&&typeof n[Ss]=="function"&&Un)return Un(n,{depth:h-r});if(o!=="symbol"&&typeof n.inspect=="function")return n.inspect()}if(Pc(n)){var L=[];return cs&&cs.call(n,function(Yt,mn){L.push(d(mn,n,!0)+" => "+d(Yt,n))}),Ps("Map",Me.call(n),L,p)}if(Ic(n)){var H=[];return hs&&hs.call(n,function(Yt){H.push(d(Yt,n))}),Ps("Set",xe.call(n),H,p)}if(Ec(n))return Wn("WeakMap");if(Mc(n))return Wn("WeakSet");if(Tc(n))return Wn("WeakRef");if(wc(n))return re(d(Number(n)));if(Cc(n))return re(d(Hn.call(n)));if(Bc(n))return re(hc.call(n));if(Sc(n))return re(d(String(n)));if(typeof window<"u"&&n===window)return"{ [object Window] }";if(n===M)return"{ [object globalThis] }";if(!vc(n)&&!Bs(n)){var ft=Le(n,d),q=bs?bs(n)===Object.prototype:n instanceof Object||n.constructor===Object,Qt=n instanceof Object?"":"null prototype",Sl=!q&&E&&Object(n)===n&&E in n?Vn.call(bt(n),8,-1):Qt?"Object":"",c_=q||typeof n.constructor!="function"?"":n.constructor.name?n.constructor.name+" ":"",Si=c_+(Sl||Qt?"["+et.call(ys.call([],Sl||[],Qt||[]),": ")+"] ":"");return ft.length===0?Si+"{}":p?Si+"{"+qn(ft,p)+"}":Si+"{ "+et.call(ft,", ")+" }"}return String(n)};function ws(t,n,e){var r=(e.quoteStyle||n)==="double"?'"':"'";return r+t+r}function bc(t){return gt.call(String(t),/"/g,"&quot;")}function Gn(t){return bt(t)==="[object Array]"&&(!E||!(typeof t=="object"&&E in t))}function vc(t){return bt(t)==="[object Date]"&&(!E||!(typeof t=="object"&&E in t))}function Bs(t){return bt(t)==="[object RegExp]"&&(!E||!(typeof t=="object"&&E in t))}function mc(t){return bt(t)==="[object Error]"&&(!E||!(typeof t=="object"&&E in t))}function Sc(t){return bt(t)==="[object String]"&&(!E||!(typeof t=="object"&&E in t))}function wc(t){return bt(t)==="[object Number]"&&(!E||!(typeof t=="object"&&E in t))}function Bc(t){return bt(t)==="[object Boolean]"&&(!E||!(typeof t=="object"&&E in t))}function Cs(t){if(Ft)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!jn)return!1;try{return jn.call(t),!0}catch{}return!1}function Cc(t){if(!t||typeof t!="object"||!Hn)return!1;try{return Hn.call(t),!0}catch{}return!1}var kc=Object.prototype.hasOwnProperty||function(t){return t in this};function _t(t,n){return kc.call(t,n)}function bt(t){return pc.call(t)}function Dc(t){if(t.name)return t.name;var n=fc.call(dc.call(t),/^function\s*([\w$]+)/);return n?n[1]:null}function ks(t,n){if(t.indexOf)return t.indexOf(n);for(var e=0,r=t.length;e<r;e++)if(t[e]===n)return e;return-1}function Pc(t){if(!Me||!t||typeof t!="object")return!1;try{Me.call(t);try{xe.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Ec(t){if(!ee||!t||typeof t!="object")return!1;try{ee.call(t,ee);try{ne.call(t,ne)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Tc(t){if(!ps||!t||typeof t!="object")return!1;try{return ps.call(t),!0}catch{}return!1}function Ic(t){if(!xe||!t||typeof t!="object")return!1;try{xe.call(t);try{Me.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Mc(t){if(!ne||!t||typeof t!="object")return!1;try{ne.call(t,ne);try{ee.call(t,ee)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function xc(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ds(t,n){if(t.length>n.maxStringLength){var e=t.length-n.maxStringLength,r="... "+e+" more character"+(e>1?"s":"");return Ds(Vn.call(t,0,n.maxStringLength),n)+r}var i=gt.call(gt.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Lc);return ws(i,"single",n)}function Lc(t){var n=t.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return e?"\\"+e:"\\x"+(n<16?"0":"")+yc.call(n.toString(16))}function re(t){return"Object("+t+")"}function Wn(t){return t+" { ? }"}function Ps(t,n,e,r){var i=r?qn(e,r):et.call(e,", ");return t+" ("+n+") {"+i+"}"}function $c(t){for(var n=0;n<t.length;n++)if(ks(t[n],`
`)>=0)return!1;return!0}function Ac(t,n){var e;if(t.indent==="	")e="	";else if(typeof t.indent=="number"&&t.indent>0)e=et.call(Array(t.indent+1)," ");else return null;return{base:e,prev:et.call(Array(n+1),e)}}function qn(t,n){if(t.length===0)return"";var e=`
`+n.prev+n.base;return e+et.call(t,","+e)+`
`+n.prev}function Le(t,n){var e=Gn(t),r=[];if(e){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=_t(t,i)?n(t[i],t):""}var s=typeof zn=="function"?zn(t):[],o;if(Ft){o={};for(var l=0;l<s.length;l++)o["$"+s[l]]=s[l]}for(var u in t)_t(t,u)&&(e&&String(Number(u))===u&&u<t.length||Ft&&o["$"+u]instanceof Symbol||(fs.call(/[^\w$]/,u)?r.push(n(u,t)+": "+n(t[u],t)):r.push(u+": "+n(t[u],t))));if(typeof zn=="function")for(var c=0;c<s.length;c++)_s.call(t,s[c])&&r.push("["+n(s[c])+"]: "+n(t[s[c]],t));return r}var Kn=z,Rt=j,Oc=_c,Nc=Kn("%TypeError%"),$e=Kn("%WeakMap%",!0),Ae=Kn("%Map%",!0),Fc=Rt("WeakMap.prototype.get",!0),Rc=Rt("WeakMap.prototype.set",!0),Vc=Rt("WeakMap.prototype.has",!0),Hc=Rt("Map.prototype.get",!0),zc=Rt("Map.prototype.set",!0),jc=Rt("Map.prototype.has",!0),Qn=function(t,n){for(var e=t,r;(r=e.next)!==null;e=r)if(r.key===n)return e.next=r.next,r.next=t.next,t.next=r,r},Uc=function(t,n){var e=Qn(t,n);return e&&e.value},Gc=function(t,n,e){var r=Qn(t,n);r?r.value=e:t.next={key:n,next:t.next,value:e}},Wc=function(t,n){return!!Qn(t,n)},Es=function(){var n,e,r,i={assert:function(s){if(!i.has(s))throw new Nc("Side channel does not contain "+Oc(s))},get:function(s){if($e&&s&&(typeof s=="object"||typeof s=="function")){if(n)return Fc(n,s)}else if(Ae){if(e)return Hc(e,s)}else if(r)return Uc(r,s)},has:function(s){if($e&&s&&(typeof s=="object"||typeof s=="function")){if(n)return Vc(n,s)}else if(Ae){if(e)return jc(e,s)}else if(r)return Wc(r,s);return!1},set:function(s,o){$e&&s&&(typeof s=="object"||typeof s=="function")?(n||(n=new $e),Rc(n,s,o)):Ae?(e||(e=new Ae),zc(e,s,o)):(r||(r={key:{},next:null}),Gc(r,s,o))}};return i},qc=z,Kc=Li,ie=Es(),st=qc("%TypeError%"),Yn={assert:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new st("`O` is not an object");if(typeof n!="string")throw new st("`slot` must be a string");if(ie.assert(t),!Yn.has(t,n))throw new st("`"+n+"` is not present on `O`")},get:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new st("`O` is not an object");if(typeof n!="string")throw new st("`slot` must be a string");var e=ie.get(t);return e&&e["$"+n]},has:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new st("`O` is not an object");if(typeof n!="string")throw new st("`slot` must be a string");var e=ie.get(t);return!!e&&Kc(e,"$"+n)},set:function(t,n,e){if(!t||typeof t!="object"&&typeof t!="function")throw new st("`O` is not an object");if(typeof n!="string")throw new st("`slot` must be a string");var r=ie.get(t);r||(r={},ie.set(t,r)),r["$"+n]=e}};Object.freeze&&Object.freeze(Yn);var Qc=Yn,se=Qc,Yc=SyntaxError,Ts=typeof StopIteration=="object"?StopIteration:null,Xc=function(n){if(!Ts)throw new Yc("this environment lacks StopIteration");se.set(n,"[[Done]]",!1);var e={next:function(){var i=se.get(this,"[[Iterator]]"),s=se.get(i,"[[Done]]");try{return{done:s,value:s?void 0:i.next()}}catch(o){if(se.set(i,"[[Done]]",!0),o!==Ts)throw o;return{done:!0,value:void 0}}}};return se.set(e,"[[Iterator]]",n),e},Jc={}.toString,Is=Array.isArray||function(t){return Jc.call(t)=="[object Array]"},Zc=String.prototype.valueOf,th=function(n){try{return Zc.call(n),!0}catch{return!1}},eh=Object.prototype.toString,nh="[object String]",rh=kt(),Ms=function(n){return typeof n=="string"?!0:typeof n!="object"?!1:rh?th(n):eh.call(n)===nh},Xn=typeof Map=="function"&&Map.prototype?Map:null,ih=typeof Set=="function"&&Set.prototype?Set:null,Oe;Xn||(Oe=function(n){return!1});var xs=Xn?Map.prototype.has:null,Ls=ih?Set.prototype.has:null;!Oe&&!xs&&(Oe=function(n){return!1});var $s=Oe||function(n){if(!n||typeof n!="object")return!1;try{if(xs.call(n),Ls)try{Ls.call(n)}catch{return!0}return n instanceof Xn}catch{}return!1},sh=typeof Map=="function"&&Map.prototype?Map:null,Jn=typeof Set=="function"&&Set.prototype?Set:null,Ne;Jn||(Ne=function(n){return!1});var As=sh?Map.prototype.has:null,Os=Jn?Set.prototype.has:null;!Ne&&!Os&&(Ne=function(n){return!1});var Ns=Ne||function(n){if(!n||typeof n!="object")return!1;try{if(Os.call(n),As)try{As.call(n)}catch{return!0}return n instanceof Jn}catch{}return!1},Fs=us,Rs=Xc;if(kn()||Ce()){var Zn=Symbol.iterator;Te.exports=function(n){if(n!=null&&typeof n[Zn]<"u")return n[Zn]();if(Fs(n))return Array.prototype[Zn].call(n)}}else{var oh=Is,ah=Ms,Vs=z,lh=Vs("%Map%",!0),uh=Vs("%Set%",!0),K=j,Hs=K("Array.prototype.push"),zs=K("String.prototype.charCodeAt"),ch=K("String.prototype.slice"),hh=function(n,e){var r=n.length;if(e+1>=r)return e+1;var i=zs(n,e);if(i<55296||i>56319)return e+1;var s=zs(n,e+1);return s<56320||s>57343?e+1:e+2},tr=function(n){var e=0;return{next:function(){var i=e>=n.length,s;return i||(s=n[e],e+=1),{done:i,value:s}}}},js=function(n,e){if(oh(n)||Fs(n))return tr(n);if(ah(n)){var r=0;return{next:function(){var s=hh(n,r),o=ch(n,r,s);return r=s,{done:s>n.length,value:o}}}}if(e&&typeof n["_es6-shim iterator_"]<"u")return n["_es6-shim iterator_"]()};if(!lh&&!uh)Te.exports=function(n){if(n!=null)return js(n,!0)};else{var ph=$s,dh=Ns,Us=K("Map.prototype.forEach",!0),Gs=K("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var Ws=K("Map.prototype.iterator",!0),qs=K("Set.prototype.iterator",!0);var Ks=K("Map.prototype.@@iterator",!0)||K("Map.prototype._es6-shim iterator_",!0),Qs=K("Set.prototype.@@iterator",!0)||K("Set.prototype._es6-shim iterator_",!0),fh=function(n){if(ph(n)){if(Ws)return Rs(Ws(n));if(Ks)return Ks(n);if(Us){var e=[];return Us(n,function(i,s){Hs(e,[s,i])}),tr(e)}}if(dh(n)){if(qs)return Rs(qs(n));if(Qs)return Qs(n);if(Gs){var r=[];return Gs(n,function(i){Hs(r,i)}),tr(r)}}};Te.exports=function(n){return fh(n)||js(n)}}}var yh=Te.exports,Ys=function(t){return t!==t},Xs=function(n,e){return n===0&&e===0?1/n===1/e:!!(n===e||Ys(n)&&Ys(e))},gh=Xs,Js=function(){return typeof Object.is=="function"?Object.is:gh},_h=Js,bh=Ct,vh=function(){var n=_h();return bh(Object,{is:n},{is:function(){return Object.is!==n}}),n},mh=Ct,Sh=Nt,wh=Xs,Zs=Js,Bh=vh,to=Sh(Zs(),Object);mh(to,{getPolyfill:Zs,implementation:wh,shim:Bh});var Ch=to,eo=Function.prototype.toString,Vt=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,er,Fe;if(typeof Vt=="function"&&typeof Object.defineProperty=="function")try{er=Object.defineProperty({},"length",{get:function(){throw Fe}}),Fe={},Vt(function(){throw 42},null,er)}catch(t){t!==Fe&&(Vt=null)}else Vt=null;var kh=/^\s*class\b/,nr=function(n){try{var e=eo.call(n);return kh.test(e)}catch{return!1}},rr=function(n){try{return nr(n)?!1:(eo.call(n),!0)}catch{return!1}},Re=Object.prototype.toString,Dh="[object Object]",Ph="[object Function]",Eh="[object GeneratorFunction]",Th="[object HTMLAllCollection]",Ih="[object HTML document.all class]",Mh="[object HTMLCollection]",xh=typeof Symbol=="function"&&!!Symbol.toStringTag,Lh=!(0 in[,]),ir=function(){return!1};if(typeof document=="object"){var $h=document.all;Re.call($h)===Re.call(document.all)&&(ir=function(n){if((Lh||!n)&&(typeof n>"u"||typeof n=="object"))try{var e=Re.call(n);return(e===Th||e===Ih||e===Mh||e===Dh)&&n("")==null}catch{}return!1})}var Ah=Vt?function(n){if(ir(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{Vt(n,null,er)}catch(e){if(e!==Fe)return!1}return!nr(n)&&rr(n)}:function(n){if(ir(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(xh)return rr(n);if(nr(n))return!1;var e=Re.call(n);return e!==Ph&&e!==Eh&&!/^\[object HTML/.test(e)?!1:rr(n)},Oh=Ah,Nh=Object.prototype.toString,no=Object.prototype.hasOwnProperty,Fh=function(n,e,r){for(var i=0,s=n.length;i<s;i++)no.call(n,i)&&(r==null?e(n[i],i,n):e.call(r,n[i],i,n))},Rh=function(n,e,r){for(var i=0,s=n.length;i<s;i++)r==null?e(n.charAt(i),i,n):e.call(r,n.charAt(i),i,n)},Vh=function(n,e,r){for(var i in n)no.call(n,i)&&(r==null?e(n[i],i,n):e.call(r,n[i],i,n))},Hh=function(n,e,r){if(!Oh(e))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),Nh.call(n)==="[object Array]"?Fh(n,e,i):typeof n=="string"?Rh(n,e,i):Vh(n,e,i)},zh=Hh,sr=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],jh=typeof globalThis>"u"?M:globalThis,Uh=function(){for(var n=[],e=0;e<sr.length;e++)typeof jh[sr[e]]=="function"&&(n[n.length]=sr[e]);return n},Ve=zh,Gh=Uh,ro=Nt,or=j,He=Mn,Wh=or("Object.prototype.toString"),io=kt(),so=typeof globalThis>"u"?M:globalThis,ar=Gh(),lr=or("String.prototype.slice"),ur=Object.getPrototypeOf,qh=or("Array.prototype.indexOf",!0)||function(n,e){for(var r=0;r<n.length;r+=1)if(n[r]===e)return r;return-1},ze={__proto__:null};io&&He&&ur?Ve(ar,function(t){var n=new so[t];if(Symbol.toStringTag in n){var e=ur(n),r=He(e,Symbol.toStringTag);if(!r){var i=ur(e);r=He(i,Symbol.toStringTag)}ze["$"+t]=ro(r.get)}}):Ve(ar,function(t){var n=new so[t],e=n.slice||n.set;e&&(ze["$"+t]=ro(e))});var Kh=function(n){var e=!1;return Ve(ze,function(r,i){if(!e)try{"$"+r(n)===i&&(e=lr(i,1))}catch{}}),e},Qh=function(n){var e=!1;return Ve(ze,function(r,i){if(!e)try{r(n),e=lr(i,1)}catch{}}),e},oo=function(n){if(!n||typeof n!="object")return!1;if(!io){var e=lr(Wh(n),8,-1);return qh(ar,e)>-1?e:e!=="Object"?!1:Qh(n)}return He?Kh(n):null},Yh=oo,Xh=function(n){return!!Yh(n)},Jh=Nt,Zh=j,ao=z,tp=Xh,lo=ao("ArrayBuffer",!0),uo=ao("Float32Array",!0),je=Zh("ArrayBuffer.prototype.byteLength",!0),co=lo&&!je&&new lo().slice,ho=co&&Jh(co),po=je||ho?function(n){if(!n||typeof n!="object")return!1;try{return je?je(n):ho(n,0),!0}catch{return!1}}:uo?function(n){try{return new uo(n).buffer===n&&!tp(n)}catch(e){return typeof n=="object"&&e.name==="RangeError"}}:function(n){return!1},ep=Date.prototype.getDay,np=function(n){try{return ep.call(n),!0}catch{return!1}},rp=Object.prototype.toString,ip="[object Date]",sp=kt(),op=function(n){return typeof n!="object"||n===null?!1:sp?np(n):rp.call(n)===ip},cr=j,fo=kt(),yo,go,hr,pr;if(fo){yo=cr("Object.prototype.hasOwnProperty"),go=cr("RegExp.prototype.exec"),hr={};var dr=function(){throw hr};pr={toString:dr,valueOf:dr},typeof Symbol.toPrimitive=="symbol"&&(pr[Symbol.toPrimitive]=dr)}var ap=cr("Object.prototype.toString"),lp=Object.getOwnPropertyDescriptor,up="[object RegExp]",cp=fo?function(n){if(!n||typeof n!="object")return!1;var e=lp(n,"lastIndex"),r=e&&yo(e,"value");if(!r)return!1;try{go(n,pr)}catch(i){return i===hr}}:function(n){return!n||typeof n!="object"&&typeof n!="function"?!1:ap(n)===up},hp=j,_o=hp("SharedArrayBuffer.prototype.byteLength",!0),pp=_o?function(n){if(!n||typeof n!="object")return!1;try{return _o(n),!0}catch{return!1}}:function(n){return!1},dp=Number.prototype.toString,fp=function(n){try{return dp.call(n),!0}catch{return!1}},yp=Object.prototype.toString,gp="[object Number]",_p=kt(),bp=function(n){return typeof n=="number"?!0:typeof n!="object"?!1:_p?fp(n):yp.call(n)===gp},bo=j,vp=bo("Boolean.prototype.toString"),mp=bo("Object.prototype.toString"),Sp=function(n){try{return vp(n),!0}catch{return!1}},wp="[object Boolean]",Bp=kt(),Cp=function(n){return typeof n=="boolean"?!0:n===null||typeof n!="object"?!1:Bp&&Symbol.toStringTag in n?Sp(n):mp(n)===wp},fr={exports:{}},kp=Object.prototype.toString,Dp=kn();if(Dp){var Pp=Symbol.prototype.toString,Ep=/^Symbol\(.*\)$/,Tp=function(n){return typeof n.valueOf()!="symbol"?!1:Ep.test(Pp.call(n))};fr.exports=function(n){if(typeof n=="symbol")return!0;if(kp.call(n)!=="[object Symbol]")return!1;try{return Tp(n)}catch{return!1}}}else fr.exports=function(n){return!1};var Ip=fr.exports,yr={exports:{}},vo=typeof BigInt<"u"&&BigInt,Mp=function(){return typeof vo=="function"&&typeof BigInt=="function"&&typeof vo(42)=="bigint"&&typeof BigInt(42)=="bigint"},xp=Mp();if(xp){var Lp=BigInt.prototype.valueOf,$p=function(n){try{return Lp.call(n),!0}catch{}return!1};yr.exports=function(n){return n===null||typeof n>"u"||typeof n=="boolean"||typeof n=="string"||typeof n=="number"||typeof n=="symbol"||typeof n=="function"?!1:typeof n=="bigint"?!0:$p(n)}}else yr.exports=function(n){return!1};var Ap=yr.exports,Op=Ms,Np=bp,Fp=Cp,Rp=Ip,Vp=Ap,Hp=function(n){if(n==null||typeof n!="object"&&typeof n!="function")return null;if(Op(n))return"String";if(Np(n))return"Number";if(Fp(n))return"Boolean";if(Rp(n))return"Symbol";if(Vp(n))return"BigInt"},Ue=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,mo=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Ge;Ue||(Ge=function(n){return!1});var gr=Ue?Ue.prototype.has:null,_r=mo?mo.prototype.has:null;!Ge&&!gr&&(Ge=function(n){return!1});var zp=Ge||function(n){if(!n||typeof n!="object")return!1;try{if(gr.call(n,gr),_r)try{_r.call(n,_r)}catch{return!0}return n instanceof Ue}catch{}return!1},br={exports:{}},jp=z,So=j,Up=jp("%WeakSet%",!0),vr=So("WeakSet.prototype.has",!0);if(vr){var mr=So("WeakMap.prototype.has",!0);br.exports=function(n){if(!n||typeof n!="object")return!1;try{if(vr(n,vr),mr)try{mr(n,mr)}catch{return!0}return n instanceof Up}catch{}return!1}}else br.exports=function(n){return!1};var Gp=br.exports,Wp=$s,qp=Ns,Kp=zp,Qp=Gp,Yp=function(n){if(n&&typeof n=="object"){if(Wp(n))return"Map";if(qp(n))return"Set";if(Kp(n))return"WeakMap";if(Qp(n))return"WeakSet"}return!1},Xp=j,wo=Xp("ArrayBuffer.prototype.byteLength",!0),Jp=po,Zp=function(n){return Jp(n)?wo?wo(n):n.byteLength:NaN},Bo=xu,nt=j,Co=nc,td=z,Ht=yh,ed=Es,ko=Ch,Do=us,Po=Is,Eo=po,To=op,Io=cp,Mo=pp,xo=Cn,Lo=Hp,$o=Yp,Ao=oo,Oo=Zp,No=nt("SharedArrayBuffer.prototype.byteLength",!0),Fo=nt("Date.prototype.getTime"),Sr=Object.getPrototypeOf,Ro=nt("Object.prototype.toString"),We=td("%Set%",!0),wr=nt("Map.prototype.has",!0),qe=nt("Map.prototype.get",!0),Vo=nt("Map.prototype.size",!0),Ke=nt("Set.prototype.add",!0),Ho=nt("Set.prototype.delete",!0),Qe=nt("Set.prototype.has",!0),Ye=nt("Set.prototype.size",!0);function zo(t,n,e,r){for(var i=Ht(t),s;(s=i.next())&&!s.done;)if(Q(n,s.value,e,r))return Ho(t,s.value),!0;return!1}function jo(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function nd(t,n,e,r,i,s){var o=jo(e);if(o!=null)return o;var l=qe(n,o),u=Bo({},i,{strict:!1});return typeof l>"u"&&!wr(n,o)||!Q(r,l,u,s)?!1:!wr(t,o)&&Q(r,l,u,s)}function rd(t,n,e){var r=jo(e);return r??(Qe(n,r)&&!Qe(t,r))}function Uo(t,n,e,r,i,s){for(var o=Ht(t),l,u;(l=o.next())&&!l.done;)if(u=l.value,Q(e,u,i,s)&&Q(r,qe(n,u),i,s))return Ho(t,u),!0;return!1}function Q(t,n,e,r){var i=e||{};if(i.strict?ko(t,n):t===n)return!0;var s=Lo(t),o=Lo(n);if(s!==o)return!1;if(!t||!n||typeof t!="object"&&typeof n!="object")return i.strict?ko(t,n):t==n;var l=r.has(t),u=r.has(n),c;if(l&&u){if(r.get(t)===r.get(n))return!0}else c={};return l||r.set(t,c),u||r.set(n,c),od(t,n,i,r)}function Go(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function id(t,n,e,r){if(Ye(t)!==Ye(n))return!1;for(var i=Ht(t),s=Ht(n),o,l,u;(o=i.next())&&!o.done;)if(o.value&&typeof o.value=="object")u||(u=new We),Ke(u,o.value);else if(!Qe(n,o.value)){if(e.strict||!rd(t,n,o.value))return!1;u||(u=new We),Ke(u,o.value)}if(u){for(;(l=s.next())&&!l.done;)if(l.value&&typeof l.value=="object"){if(!zo(u,l.value,e.strict,r))return!1}else if(!e.strict&&!Qe(t,l.value)&&!zo(u,l.value,e.strict,r))return!1;return Ye(u)===0}return!0}function sd(t,n,e,r){if(Vo(t)!==Vo(n))return!1;for(var i=Ht(t),s=Ht(n),o,l,u,c,h,p;(o=i.next())&&!o.done;)if(c=o.value[0],h=o.value[1],c&&typeof c=="object")u||(u=new We),Ke(u,c);else if(p=qe(n,c),typeof p>"u"&&!wr(n,c)||!Q(h,p,e,r)){if(e.strict||!nd(t,n,c,h,e,r))return!1;u||(u=new We),Ke(u,c)}if(u){for(;(l=s.next())&&!l.done;)if(c=l.value[0],p=l.value[1],c&&typeof c=="object"){if(!Uo(u,t,c,p,e,r))return!1}else if(!e.strict&&(!t.has(c)||!Q(qe(t,c),p,e,r))&&!Uo(u,t,c,p,Bo({},e,{strict:!1}),r))return!1;return Ye(u)===0}return!0}function od(t,n,e,r){var i,s;if(typeof t!=typeof n||t==null||n==null||Ro(t)!==Ro(n)||Do(t)!==Do(n))return!1;var o=Po(t),l=Po(n);if(o!==l)return!1;var u=t instanceof Error,c=n instanceof Error;if(u!==c||(u||c)&&(t.name!==n.name||t.message!==n.message))return!1;var h=Io(t),p=Io(n);if(h!==p||(h||p)&&(t.source!==n.source||Co(t)!==Co(n)))return!1;var d=To(t),f=To(n);if(d!==f||(d||f)&&Fo(t)!==Fo(n)||e.strict&&Sr&&Sr(t)!==Sr(n))return!1;var b=Ao(t),S=Ao(n);if(b!==S)return!1;if(b||S){if(t.length!==n.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}var g=Go(t),P=Go(n);if(g!==P)return!1;if(g||P){if(t.length!==n.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}var B=Eo(t),m=Eo(n);if(B!==m)return!1;if(B||m)return Oo(t)!==Oo(n)?!1:typeof Uint8Array=="function"&&Q(new Uint8Array(t),new Uint8Array(n),e,r);var W=Mo(t),L=Mo(n);if(W!==L)return!1;if(W||L)return No(t)!==No(n)?!1:typeof Uint8Array=="function"&&Q(new Uint8Array(t),new Uint8Array(n),e,r);if(typeof t!=typeof n)return!1;var H=xo(t),ft=xo(n);if(H.length!==ft.length)return!1;for(H.sort(),ft.sort(),i=H.length-1;i>=0;i--)if(H[i]!=ft[i])return!1;for(i=H.length-1;i>=0;i--)if(s=H[i],!Q(t[s],n[s],e,r))return!1;var q=$o(t),Qt=$o(n);return q!==Qt?!1:q==="Set"||Qt==="Set"?id(t,n,e,r):q==="Map"?sd(t,n,e,r):!0}var ad=function(n,e,r){return Q(n,e,r,ed())};const ld=yt(ad);function zt(t,n=!1){switch(typeof t){case"boolean":return t;case"number":return t!==0;case"string":switch(t.toLocaleLowerCase()){case"true":return!0;case"false":case"":return!1;default:{const e=Number.parseFloat(t);return Number.isNaN(e)?n:e!==0}}default:return n}}function ud(t){let n;try{if(n=JSON.parse(t),!F(n))return}catch(e){console.warn(e);return}return n}function jt(t){switch(typeof t){case"number":return Number.isFinite(t);case"string":return jt(Number.parseFloat(t));default:return!1}}function V(t,n,e){return jt(t)||(t=0),jt(n)||(n=Number.MIN_SAFE_INTEGER),jt(e)||(e=Number.MAX_SAFE_INTEGER),n>e&&([n,e]=[e,n]),Math.max(n,Math.min(t,e))}function Wo(t,n,e,r){if(jt(t))return V(t,e,r);if(n=jt(n)?n:0,t==null||typeof t!="string")return n;const i=Number.parseFloat(t);return Number.isNaN(i)?n:V(i,e,r)}function Br(t,n){return F(t)?{isEnabled:zt(t.isEnabled,n.isEnabled),volume:Wo(t.volume,n.volume,0,1)}:n}function cd(t){const n=R(D.Settings.audio);return F(t)&&(n.bgm=Br(t.bgm,n.bgm),n.sound=Br(t.sound,n.sound),n.voice=Br(t.voice,n.voice)),n}function Xe(t,n){return n.includes(t)}function hd(t,n){return Xe(t,El)?t:n}function pd(t){const n=R(D.Settings.device);return F(t)&&(n.inputDevice=hd(t.inputDevice,n.inputDevice)),n}function dd(t){const n=R(D.Settings.storybook);return F(t)&&(n.aacSymbolsEnabled=zt(t.aacSymbolsEnabled,n.aacSymbolsEnabled),n.captionHiliteColorIndex=Wo(t.captionHiliteColorIndex,n.captionHiliteColorIndex,0,x.CaptionHilites.Colors.length-1),n.captionHilitesEnabled=zt(t.captionHilitesEnabled,n.captionHilitesEnabled),n.captionsEnabled=zt(t.captionsEnabled,n.captionsEnabled),n.helpfulTipsEnabled=zt(t.helpfulTipsEnabled,n.helpfulTipsEnabled)),n}function Je(t){return typeof t=="number"&&Number.isFinite(t)}function fd(t){return Je(t)&&t>=0&&Math.floor(t)===t}function yd(t){return typeof t=="string"}function gd(t){return yd(t)&&t.length>0}function _d(t){const n=t;if(!(!F(t)||!fd(n.progresFrameOrLabel)&&!gd(n.progresFrameOrLabel)))return n}function bd(t){if(!F(t))return R(D.Settings.storybooksStates);const n=t;return Object.keys(n).forEach(r=>{const i=n[r];if(i){const s=_d(i);s?n[r]=s:console.warn(`unable to parse storybook state with id: ${r}`)}else delete n[r],console.warn(`unable to parse storybook state with id: ${r}`)}),n}function vd(t){return F(t)?t:typeof t=="string"?ud(t):void 0}function md(t){const n=vd(t),e={audio:cd(n==null?void 0:n.audio),device:pd(n==null?void 0:n.device),hasCompletedTutorial:zt(n==null?void 0:n.hasCompletedTutorial),storybook:dd(n==null?void 0:n.storybook),storybooksStates:bd(n==null?void 0:n.storybooksStates)};return{target:e,wasSourceMirrored:ld(e,n,{strict:!0})}}const qo="settings";class Ze{static Read(){let n;try{n=localStorage.getItem(qo)}catch(r){console.warn(r);return}const e=md(n);return e.wasSourceMirrored||(Ze.Write(e.target)?console.info("updated incoming settings data"):console.warn("unable to update incoming settings data")),e.target}static Write(n){try{const e=JSON.stringify(n);localStorage.setItem(qo,e)}catch(e){return console.warn(e),!1}return!0}constructor(){throw new Error("instances of this class may not be created")}}class Sd{constructor(){a(this,"_data");this.readFromLocalStorage()||(this._data=R(D.Settings))}apply(n){return this._data=R(n),this}get data(){return this._data}readFromLocalStorage(){const n=Ze.Read();return n!==void 0?(this._data=n,!0):!1}reset(){return this._data=R(D.Settings),this}writeToLocalStorage(){return Ze.Write(this._data)}}function wd(t,n=!0){let e=t.getBounds();return n&&(!e||e.isEmpty())&&(e=t.nominalBounds??void 0),e}class U{constructor(n,e,r,i=!1){a(this,"_blueNormalized");a(this,"_greenNormalized");a(this,"_redNormalized");n===void 0?(this.redNormalized=0,this.greenNormlized=0,this.blueNormalized=0):typeof n=="string"?this.hexStringToColor(n):e===void 0||r===void 0?i?(this.redNormalized=n,this.greenNormlized=e??0,this.blueNormalized=r??0):(this.red=(n&16711680)>>16,this.green=(n&65280)>>8,this.blue=n&255):i?(this.redNormalized=n,this.greenNormlized=e,this.blueNormalized=r):(this.red=n,this.green=e,this.blue=r)}get blue(){return U.GetColorComponent(this._blueNormalized)}set blue(n){this._blueNormalized=U.SetColorComponent(n)}get blueNormalized(){return this._blueNormalized}set blueNormalized(n){this._blueNormalized=V(n,0,1)}static Create(n,e,r,i=!1){return n===void 0?new U:typeof n=="string"?new U(n):e!==void 0&&r!==void 0?new U(n,e,r,i):new U(n)}static GetColorComponent(n){return n=V(n,0,1),n===1?255:n*256}get green(){return U.GetColorComponent(this._greenNormalized)}set green(n){this._greenNormalized=U.SetColorComponent(n)}get greenNormlized(){return this._greenNormalized}set greenNormlized(n){this._greenNormalized=V(n,0,1)}hexStringToColor(n){if(!n)return-1;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(o,l,u,c)=>l+l+u+u+c+c);const e=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(!e)return-1;const[,r,i,s]=e;return this.red=r?Number.parseInt(r,16):0,this.green=i?Number.parseInt(i,16):0,this.blue=s?Number.parseInt(s,16):0,this.value}numericalToColor(n){return this.red=(n&16711680)>>16,this.green=(n&65280)>>8,this.blue=n&255,this.value}setColor(n){return typeof n=="string"?this.hexStringToColor(n):this.numericalToColor(n),this}get red(){return U.GetColorComponent(this._redNormalized)}set red(n){this._redNormalized=U.SetColorComponent(n)}get redNormalized(){return this._redNormalized}set redNormalized(n){this._redNormalized=V(n,0,1)}static SetColorComponent(n){return n=V(n,0,255),n===255?1:n/256}get value(){return this.red<<16|this.green<<8|this.blue}}function Bd(t,n){if(t.uncache(),n){const e=U.Create(n),r=0,i=0,s=0,o=1,l=e.red,u=e.green,c=e.blue,h=0,p=new createjs.ColorFilter(r,i,s,o,l,u,c,h);t.filters=[p];const d=wd(t);d?t.cache(d.x,d.y,d.width,d.height):console.warn(`bounds is unavailable on clip: ${t.name}`,t)}else t.filters=null}function Cd(t,n){if(t.visible=n.captionHilitesEnabled,t.visible){const{Colors:e}=x.CaptionHilites,r=e[n.captionHiliteColorIndex]??e[D.Settings.storybook.captionHiliteColorIndex]??e[0];Bd(t,r)}}const Cr={AacSymbols:"aacSymbolsDisplay",CaptionHilites:"captionHilitesContainer",Captions:"captionsContainer"};class kd{constructor(n){a(this,"engine");a(this,"captionHilitesLabelsByName");a(this,"currentCaptionHiliteslabel");a(this,"currentDisplayFrame");a(this,"prevDisplayFrame");this.engine=n,this.captionHilitesLabelsByName=new Map,this.currentDisplayFrame=-1,this.prevDisplayFrame=this.currentDisplayFrame,this.onStageTick=this.onStageTick.bind(this)}start(){this.display.stage.addEventListener(v.TICK,this.onStageTick)}updateFromSettings(){this.updateFromSettingsCaptions().updateFromSettingsAacSymbols().updateFromSettingsCaptionHilites()}get aacSymbolsDisplay(){return this.findUnitDisplay(Cr.AacSymbols)}get captionsDisplay(){return this.findUnitDisplay(Cr.Captions)}get captionHilitesDisplay(){return this.findUnitDisplay(Cr.CaptionHilites)}get display(){return this.engine.exportRoot.display}findUnitDisplay(n){return this.display.children.find(r=>{var i;return r instanceof createjs.MovieClip?(i=r.name)==null?void 0:i.startsWith(n):!1})}getCaptionHilitesLabelsOf(n){let e=this.captionHilitesLabelsByName.get(n.name);return e||(e=Sn(n).reverse(),this.captionHilitesLabelsByName.set(n.name,e)),e}getCurrentCaptionHiliteLabel(){const{captionHilitesDisplay:n}=this;if(!n)return null;const e=this.getCaptionHilitesLabelsOf(n),{currentFrame:r}=n,i=r,s=e.find(o=>i>=o.position);return s?s.label:null}onStageTick(){this.updateCurrentFrame()&&this.updateCaptionHilites(),this.updateCaptions()}updateCaptionHilites(){const{captionHilitesDisplay:n}=this;if(!n)return;const e=this.prevDisplayFrame===-1?this.currentDisplayFrame:this.currentDisplayFrame+(this.currentDisplayFrame-this.prevDisplayFrame);n.gotoAndStop(e);const r=this.getCurrentCaptionHiliteLabel();r!==this.currentCaptionHiliteslabel&&(this.currentCaptionHiliteslabel=r,this.updateFromSettingsCaptionHilites())}updateCaptions(){const{captionsDisplay:n}=this;n&&(n.visible=this.userSettingsData.storybook.captionsEnabled)}updateCurrentFrame(){const{currentFrame:n}=this.display;return n===this.currentDisplayFrame?!1:(this.prevDisplayFrame=this.currentDisplayFrame,this.currentDisplayFrame=n,!0)}updateFromSettingsAacSymbols(){const{aacSymbolsDisplay:n}=this;return n&&(n.visible=this.userSettingsData.storybook.aacSymbolsEnabled),this}updateFromSettingsCaptionHilites(){const{captionHilitesDisplay:n}=this;return n&&Cd(n,this.userSettingsData.storybook),this}updateFromSettingsCaptions(){return this.updateCaptions(),this}updateFromTickProgressBar(){const{startTimelineFrame:n}=this.engine;if(n>=0){const e=this.display.totalFrames-n+1;this.engine.progress=this.display.currentFrame/e}else this.engine.progress=0;return this}get userSettingsData(){return this.engine.userSettingsData}}const ot={CLOSE:"close"};function Dd(t,n){const e=t.entries();let r=e.next();for(;!r.done;){const[i,s]=r.value;if(s===n)return i;r=e.next()}}function Pd(t,n,e){t.forEach(r=>{r!==void 0&&(r[n]=e)})}function kr(t,n){Pd(t,"visible",n)}const Y={Disabled:"disabled",Down:"down",Hit:"hit",Out:"out",Over:"over",Selected:"selected"},G={PRESSED:"pressed"};class tn{constructor(n){a(this,"target");a(this,"eventsEmitter");this.target=n,this.eventsEmitter=new Z,this.onTargetCallback=this.onTargetCallback.bind(this)}dispose(){this.removeAll()}emit(n,...e){return this.eventsEmitter.emit(n,e),this}off(n,e,r,i){return this.eventsEmitter.off(n,e,r,i),this.eventsEmitter.listenerCount(n)===0&&this.target.removeEventListener(n,this.onTargetCallback),this}on(n,e,r,i=!1){return this.eventsEmitter.listenerCount(n)===0&&this.target.addEventListener(n,this.onTargetCallback),i?this.eventsEmitter.once(n,e,r):this.eventsEmitter.on(n,e,r),this}once(n,e,r){return this.on(n,e,r,!0)}removeAll(n){const e=this.eventsEmitter.eventNames();return this.eventsEmitter.removeAllListeners(n),n?this.target.removeEventListener(n,this.onTargetCallback):e.forEach(r=>{Xe(r,Bi)&&this.target.removeEventListener(r,this.onTargetCallback)}),this}onTargetCallback(n){const e=n;Xe(e.type,Bi)&&this.eventsEmitter.emit(e.type,e,this)}}class Dt extends Z{constructor(e){super();a(this,"display");a(this,"cjsEventsHandler");this.display=e,this.display._cjsData=this,this.cjsEventsHandler=new tn(e)}get alpha(){return this.display.alpha}set alpha(e){this.setAlpha(e)}copyPosition(e){return this.setPosition(e.x,e.y)}static Dispose(e){e==null||e.dispose()}dispose(){this.removeAllListeners(),this.cjsEventsHandler.dispose()}get enabled(){return this.display.mouseEnabled}set enabled(e){this.setEnabled(e)}static Get(e){return e._cjsData}moveToBottom(){var e;return(e=this.display.parent)==null||e.setChildIndex(this.display,0),this}moveToTop(){const{parent:e}=this.display;return e==null||e.setChildIndex(this.display,e.children.length-1),this}get name(){return this.display.name??""}set name(e){this.setName(e)}get scale(){return this.scaleX}set scale(e){this.setScale(e,e)}get scaleX(){return this.display.scaleX}set scaleX(e){this.setScaleX(e)}get scaleY(){return this.display.scaleY}set scaleY(e){this.setScaleY(e)}setAlpha(e){return this.display.alpha=e,this}setEnabled(e){return e!==this.enabled&&(this.display.mouseEnabled=e),this}setName(e){return this.display.name=e??"",this}setPosition(e,r){return this.x=e,this.y=r,this}setScale(e,r){return this.scaleX=e,this.scaleY=r??e,this}setScaleX(e){return this.display.scaleX=e,this}setScaleY(e){return this.display.scaleY=e,this}setVisible(e){return this.display.visible=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}get visible(){return this.display.visible}set visible(e){this.setVisible(e)}get x(){return this.display.x}set x(e){this.display.x=e}get y(){return this.display.y}set y(e){this.display.y=e}}function Ed(t,n){const e=St(t,n);return e instanceof createjs.BitmapText?e:void 0}function Dr(t,n){t!==void 0&&n!==void 0&&(t.text=n)}function Pr(t,n,e){const r=St(t,n);if(r instanceof createjs.Text)return Dr(r,e),r}function Er(t,n){return Ed(t,n)||Pr(t,n)}function Ko(t){t=t instanceof createjs.MovieClip?t:t.display;const n=Sn(t),e={};return n.forEach(r=>{e[r.label]=r.position}),e}const en=new Set;class Td{constructor(n,e,r,i,s,o,l){a(this,"target");a(this,"downLabel");a(this,"outLabel");a(this,"overLabel");a(this,"selectedLabel");a(this,"labelsByName");a(this,"_isDown");a(this,"_isOver");a(this,"_isSelected");a(this,"_shouldUseDisabledState");a(this,"_enabled");this.onTargetRollOver=this.onTargetRollOver.bind(this),this.onTargetRollOut=this.onTargetRollOut.bind(this),this.onTargetMouseDown=this.onTargetMouseDown.bind(this),this.onTargetPressUp=this.onTargetPressUp.bind(this),this.target=n,this.labelsByName=Ko(n),this.downLabel=i||Y.Down,this.overLabel=r||Y.Over,this.outLabel=e||Y.Out,this.selectedLabel=l||Y.Selected,this._isDown=!1,this._isOver=!1,this._isSelected=!1,this._shouldUseDisabledState=!0,n instanceof createjs.Container&&(n.mouseChildren=!1),this.enabled=n.mouseEnabled,this.initHitArea(s,o)}dispose(){const{target:n}=this;en.delete(n),n.cursor=null,n.removeEventListener("rollover",this.onTargetRollOver),n.removeEventListener("rollout",this.onTargetRollOut),n.removeEventListener("mousedown",this.onTargetMouseDown),n.removeEventListener("pressup",this.onTargetPressUp)}get enabled(){return this._enabled}set enabled(n){this.setEnabled(n)}get isDown(){return this._isDown}get isOver(){return this._isOver}onTargetVisibilityChanged(){}setEnabled(n){if(n===this._enabled)return this;this._enabled=n;const{target:e}=this;return n?(e.cursor="pointer",e.addEventListener("rollover",this.onTargetRollOver),e.addEventListener("rollout",this.onTargetRollOut),e.addEventListener("mousedown",this.onTargetMouseDown),e.addEventListener("pressup",this.onTargetPressUp)):(e.cursor=null,e.removeEventListener("rollover",this.onTargetRollOver),e.removeEventListener("rollout",this.onTargetRollOut),e.removeEventListener("mousedown",this.onTargetMouseDown),e.removeEventListener("pressup",this.onTargetPressUp)),this.enabled?this.updateEnabled():this.updateDisabled(),this}get selected(){return this._isSelected}set selected(n){this.setSelected(n)}setSelected(n){return this.enabled?n===this._isSelected?this:(this._isSelected=n,this._isOver?this.target.gotoAndStop(this.overLabel):this._isDown?this.target.gotoAndStop(this.downLabel):this.target.gotoAndStop(this.getActingOutFrameLabel()),this):this}setShouldUseDisabledState(n){return n!==this._shouldUseDisabledState&&(this._shouldUseDisabledState=n,this.update()),this}get shouldUseDisabledState(){return this._shouldUseDisabledState}set shouldUseDisabledState(n){this.setShouldUseDisabledState(n)}update(){this.enabled?this.updateEnabled():this.updateDisabled()}getActingOutFrameLabel(){const n=this.selected?this.selectedLabel:this.outLabel,e=this.labelsByName[n];return e!==void 0?e:this.outLabel}initHitArea(n,e){n instanceof createjs.MovieClip?this.initHitAreaUsingCustomArea(n,e):this.initHitAreaUsingDefaultArea()}initHitAreaUsingCustomArea(n,e){e&&(n.actionsEnabled=!1,n.gotoAndStop(e)),this.target.hitArea=n}initHitAreaUsingDefaultArea(){const{target:n}=this,r=Ko(n)[Y.Hit];if(r===void 0)return;const i=n.currentFrame;n.gotoAndStop(r);const s=n.children[0];s&&(s instanceof createjs.MovieClip&&(s.actionsEnabled=!1),n.hitArea=s),n.gotoAndStop(i)}onTargetMouseDown(){this._isDown=!0,this.target.gotoAndStop(this.downLabel)}onTargetPressUp(){this._isDown=!1,this.target.gotoAndStop(this._isOver?this.overLabel:this.getActingOutFrameLabel())}onTargetRollOver(){this._isOver=!0,en.add(this.target),this.target.gotoAndStop(this._isDown?this.downLabel:this.overLabel)}onTargetRollOut(){this._isOver=!1,en.delete(this.target),this.target.gotoAndStop(this._isDown?this.overLabel:this.getActingOutFrameLabel())}updateDisabled(){this._isOver=!1,this._isDown=!1,this.target.gotoAndStop(this.shouldUseDisabledState?Y.Disabled:this.getActingOutFrameLabel())}updateEnabled(){this._isOver=en.has(this.target),this._isDown=!1,this.target.gotoAndStop(this._isOver?Y.Over:this.getActingOutFrameLabel())}}const Qo={LabelText:"txtLabel"};class Yo extends Dt{constructor(e,r){super(e);a(this,"helper");e.stop(),this.helper=this.createButtonHelper(r),this.cjsEventsHandler.on(v.CLICK,this.onDisplayClick,this)}get buttonLabel(){return Er(this.display,Qo.LabelText)}get buttonLabelText(){return this.getButtonLabelText()}set buttonLabelText(e){this.setButtonLabelText(e)}dispose(){super.dispose(),this.helper.dispose()}getButtonLabelText(){var e;return((e=this.buttonLabel)==null?void 0:e.text)??""}get isDown(){return this.helper.isDown}get isOver(){return this.helper.isOver}setEnabled(e){return super.setEnabled(e),this.helper.enabled=e,this}setButtonLabelText(e){const r=Er(this.display,Qo.LabelText);return Dr(r,e),this}setSelected(e){return this.helper.setSelected(e),this}setShouldUseDisabledState(e){return this.helper.shouldUseDisabledState=e,this}setVisible(e){return super.setVisible(e),e!==this.visible&&this.helper.onTargetVisibilityChanged(),this}get shouldUseDisabledState(){return this.helper.shouldUseDisabledState}set shouldUseDisabledState(e){this.setShouldUseDisabledState(e)}createButtonHelper(e){let r;return e&&(r=e instanceof createjs.DisplayObject?e:new e),new Td(this.display,Y.Out,Y.Over,Y.Down,r,Y.Hit)}onDisplayClick(e){this.emit(G.PRESSED,this)}}function vt(t,n,e,r,i){const s=typeof n=="string"?k(t,n):n,o=s?new Yo(s,r):void 0;return o&&e&&o.addListener(G.PRESSED,e,i),o}class Xo extends Dt{constructor(e,r,i="buttonDisplay"){super(e);a(this,"_buttons");a(this,"defaultButton");typeof i=="string"&&(i=[i]),this._buttons=this.onInitButtons(e,i,r)||this.initButtons(e,i,r),this.defaultButton=this._buttons.find(s=>!!s)}get button(){return this.defaultButton}dispose(){super.dispose(),this.forEachButton(e=>{e.dispose()}),this._buttons.length=0}forEachButton(e,r){return this._buttons.forEach(i=>{i&&e.call(r,i)}),this}getButtonAt(e){return this._buttons[e]}getButtonByName(e){return this._buttons.find(r=>(r==null?void 0:r.name)===e)}get isDown(){var e;return((e=this.defaultButton)==null?void 0:e.isDown)===!0}get isOver(){var e;return((e=this.defaultButton)==null?void 0:e.isOver)===!0}setEnabled(e){return super.setEnabled(e),this.forEachButton(r=>{r.enabled=e}),this}setShouldUseDisabledState(e){return this.forEachButton(r=>{r.setShouldUseDisabledState(e)}),this}get shouldUseDisabledState(){var e;return((e=this.defaultButton)==null?void 0:e.shouldUseDisabledState)===!0}set shouldUseDisabledState(e){this.setShouldUseDisabledState(e)}onButtonCallback(){this.emit(G.PRESSED,this)}onInitButtons(e,r,i){}initButtons(e,r,i){const s=[];return r.forEach(o=>{const l=vt(e,o,this.onButtonCallback,i,this);s.push(l)}),s}}function nn(t,n){const e=St(t,n);return e instanceof createjs.Container?e:void 0}const Jo={OffButton:"off_display",OnButton:"on_display"};class Id extends Xo{constructor(e,r=!1,i=void 0,s=Jo.OnButton,o=Jo.OffButton){super(e,i,[s,o]);a(this,"_offButton");a(this,"_onButton");a(this,"_isOn");this._onButton=this.getButtonByName(s),this._offButton=this.getButtonByName(o),this.isOn=r}dispose(){var e,r;super.dispose(),(e=this._offButton)==null||e.dispose(),this._offButton=void 0,(r=this._onButton)==null||r.dispose(),this._onButton=void 0}get isDown(){var e;return((e=this.activeButton)==null?void 0:e.isDown)??!1}get isOn(){return this._isOn}set isOn(e){this.setOn(e)}get isOver(){var e;return((e=this.activeButton)==null?void 0:e.isOver)??!1}get offButton(){return this._offButton}get onButton(){return this._onButton}setOn(e){var r,i;return e===this._isOn?this:((r=this.activeButton)==null||r.setVisible(!1),this._isOn=e,(i=this.activeButton)==null||i.setVisible(!0),this)}onInitButtons(e,r,i){const[s,o]=r;let l,u;return s&&(l=this.initStateButton(s,i)),o&&(u=this.initStateButton(o,i)),[l,u]}get activeButton(){return this.isOn?this._onButton:this._offButton}initStateButton(e,r){const i=vt(this.display,e,this.onButtonPressed,r,this);return i||console.warn(`no state button display found with name: ${e}`),i==null?void 0:i.setVisible(!1)}onButtonPressed(){this.isOn=!this._isOn,this.emit(G.PRESSED,this)}}function Zo(t,n,e,r,i,s){const o=k(t,n);if(!o)return;const l=new Id(o,e,s);return r&&l.addListener(G.PRESSED,r,i),l}const Md={CloseButton:"closeButtonDisplay"};class Ut extends Z{constructor(e,r){super();a(this,"engine");a(this,"container");a(this,"closeButton");this.container=e,this.container.stop(),this.engine=r,this.onInit()}dispose(){this.removeAllListeners(),this.closeButton=Yo.Dispose(this.closeButton)}initButton(e,r,i,s,o){s=s??this.container,o=o===void 0?this:o;const l=vt(s,e,r,i,o);return l==null||l.on(G.PRESSED,this.onButtonPressed,this),l}initCheckbox(e,r,i,s,o,l){s=s??this.container,o=o===void 0?this:o;const u=Zo(s,e,i,r,o,l);return u==null||u.on(G.PRESSED,this.onCheckboxPressed,this),u}initCompoundButton(e,r,i,s,o){i=i??this.container,o=o===void 0?this:o;const l=nn(i,e);if(!l)return;const u=new Xo(l,s);return u.on(G.PRESSED,this.onButtonPressed,this),u.on(G.PRESSED,r,o),u}setVisible(e){return this.visible=e,this}get visible(){return this.container.visible}set visible(e){this.container.visible=e}clearText(e){return this.setText(e,"")}initCloseButton(e){return this.initButton(Md.CloseButton,this.onClosePressed,e)}initDisplayObject(e,r){return r=r??this.container,St(r,e)}initMovieClip(e,r){return this.initDisplayObject(e,r)}initText(e,r){return r=r??this.container,Er(r,e)}onClosePressed(){this.emit(ot.CLOSE,this)}onInit(e){this.closeButton=this.initCloseButton(e)}setText(e,r){return e&&(e.text=typeof r=="number"?r.toString(10):r),this}onButtonPressed(){this.engine.playSound(this.engine.lib.audioIds.RadioHeavyButtonPress)}onCheckboxPressed(){this.engine.playSound(this.engine.lib.audioIds.RadioLightButtonPress)}}const Tr={Abort:"abort",AnimationCancel:"animationcancel",AnimationEnd:"animationend",AnimationIteration:"animationiteration",AnimationStart:"animationstart",AuxClick:"auxclick",BeforeInput:"beforeinput",Blur:"blur",Cancel:"cancel",CanPlay:"canplay",CanPlayThrough:"canplaythrough",Change:"change",Click:"click",Close:"close",CompositionEnd:"compositionend",CompositionStart:"compositionstart",CompositionUpdate:"compositionupdate",ContextMenu:"contextmenu",Copy:"copy",CueChange:"cuechange",Cut:"cut",DoubleClick:"dblclick",Drag:"drag",DragEnd:"dragend",DragEnter:"dragenter",DragLeave:"dragleave",DragOver:"dragover",DragStart:"dragstart",Drop:"drop",DurationChange:"durationchange",Emptied:"emptied",Ended:"ended",Error:"error",Focus:"focus",FocusIn:"focusin",FocusOut:"focusout",FormData:"formdata",GotPointercapture:"gotpointercapture",Input:"input",Invalid:"invalid",KeyDown:"keydown",KeyPress:"keypress",KeyUp:"keyup",Load:"load",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",LoadStart:"loadstart",LostPointerCapture:"lostpointercapture",MouseDown:"mousedown",MouseEnter:"mouseenter",MouseLeave:"mouseleave",MouseMove:"mousemove",MouseOut:"mouseout",MouseOver:"mouseover",MouseUp:"mouseup",Paste:"paste",Pause:"pause",Play:"play",Playing:"playing",PointerDancel:"pointercancel",PointerDown:"pointerdown",PointerEnter:"pointerenter",PointerLeave:"pointerleave",PointerMove:"pointermove",PointerOut:"pointerout",PointerOver:"pointerover",PointerUp:"pointerup",Progress:"progress",RateChange:"ratechange",Reset:"reset",Resize:"resize",Scroll:"scroll",ScrollEnd:"scrollend",SecurityPolicyViolation:"securitypolicyviolation",Seeked:"seeked",Seeking:"seeking",Select:"select",SelectionChange:"selectionchange",SelectStart:"selectstart",SlotChange:"slotchange",Stalled:"stalled",Submit:"submit",Suspend:"suspend",TimeUpdate:"timeupdate",Toggle:"toggle",TouchCancel:"touchcancel",TouchEnd:"touchend",TouchMove:"touchmove",TouchStart:"touchstart",TransitionCancel:"transitioncancel",TransitionEnd:"transitionend",TransitionRun:"transitionrun",TransitionStart:"transitionstart",VolumeChange:"volumechange",Waiting:"waiting",WebkitAnimationEnd:"webkitanimationend",WebkitAnimationIteration:"webkitanimationiteration",WebkitAnimationStart:"webkitanimationstart",WebkitTransitionEnd:"webkittransitionend",Wheel:"wheel"},ta={AltLeft:"AltLeft",AltRight:"AltRight",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",Backquote:"Backquote",Backslash:"Backslash",Backspace:"Backspace",BracketLeft:"BracketLeft",BracketRight:"BracketRight",CapsLock:"CapsLock",Comma:"Comma",ContextMenu:"ContextMenu",ControlLeft:"ControlLeft",ControlRight:"ControlRight",Delete:"Delete",Digit0:"Digit0",Digit1:"Digit1",Digit2:"Digit2",Digit3:"Digit3",Digit4:"Digit4",Digit5:"Digit5",Digit6:"Digit6",Digit7:"Digit7",Digit8:"Digit8",Digit9:"Digit9",End:"End",Equal:"Equal",Enter:"Enter",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",Home:"Home",Insert:"Insert",KeyA:"KeyA",KeyB:"KeyB",KeyC:"KeyC",KeyD:"KeyD",KeyE:"KeyE",KeyF:"KeyF",KeyG:"KeyG",KeyH:"KeyH",KeyI:"KeyI",KeyJ:"KeyJ",KeyK:"KeyK",KeyL:"KeyL",KeyM:"KeyM",KeyN:"KeyN",KeyO:"KeyO",KeyP:"KeyP",KeyQ:"KeyQ",KeyR:"KeyR",KeyS:"KeyS",KeyT:"KeyT",KeyU:"KeyU",KeyV:"KeyV",KeyW:"KeyW",KeyX:"KeyX",KeyY:"KeyY",KeyZ:"KeyZ",MetaLeft:"MetaLeft",MetaRight:"MetaRight",Minus:"Minus",Numpad0:"Numpad0",Numpad1:"Numpad1",Numpad2:"Numpad2",Numpad3:"Numpad3",Numpad4:"Numpad4",Numpad5:"Numpad5",Numpad6:"Numpad6",Numpad7:"Numpad7",Numpad8:"Numpad8",Numpad9:"Numpad9",NumpadAdd:"NumpadAdd",NumpadBackspace:"NumpadBackspace",NumpadClear:"NumpadClear",NumpadComma:"NumpadComma",NumpadDecimal:"NumpadDecimal",NumpadDivide:"NumpadDivide",NumpadEnter:"NumpadEnter",NumpadEqual:"NumpadEqual",NumpadMultiply:"NumpadMultiply",NumpadSubtract:"NumpadSubtract",PageDown:"PageDown",PageUp:"PageUp",Period:"Period",Quote:"Quote",Semicolon:"Semicolon",ShiftLeft:"ShiftLeft",ShiftRight:"ShiftRight",Slash:"Slash",Space:"Space",Tab:"Tab"},Pt={NEXT:"next",SELECT:"select"};function xd(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function rn(t,n,e){if(!t)return e;const r=typeof t;if(r==="number"||r==="string"||r==="boolean")return e;const i=t;return xd(i,n)&&i[n]!==void 0?i[n]:e}function rt(t,n,e=0){const r=rn(t,n,e);return Je(r)?r:e}class mt{constructor(n){a(this,"callback");a(this,"context");a(this,"delayMs");a(this,"repeatCount");a(this,"currentRepeatCount");a(this,"isRunning");a(this,"timerId");a(this,"params");const e=n??{};this.delayMs=Math.floor(Math.max(0,rt(e,"delayMs",1e3))),this.repeatCount=Math.floor(rt(e,"repeat",0)),this.callback=e.callback,this.context=e.context,this.params=e.params,this.onInterval=this.onInterval.bind(this),this.currentRepeatCount=0,this.timerId=null,this.isRunning=!1}static Create(n){const e=new mt(n);return e.start(),e}static Dispose(n){n&&n.stop()}start(){this.isRunning||(this.currentRepeatCount=0,this.timerId=setInterval(this.onInterval,this.delayMs),this.isRunning=!0)}stop(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.isRunning=!1}onInterval(){if(this.callback&&this.callback.call(this.context,this.params,this),this.repeatCount===0)this.stop();else if(this.repeatCount>0){const n=this.currentRepeatCount+1;n>this.repeatCount?this.stop():this.currentRepeatCount=n}}}class ea extends Z{constructor(e){super();a(this,"engine");a(this,"singleSwitchTimer");a(this,"_isEnabled");this.engine=e,this.onDocumentKeyUp=this.onDocumentKeyUp.bind(this),this._isEnabled=!1,this.updateFromSettings()}dispose(){this.isEnabled=!1,this.removeAllListeners()}isDualSwitchEnabled(){return this.engine.userSettingsData.device.inputDevice===tt.DualSwitch}get isEnabled(){return this._isEnabled}set isEnabled(e){this.setEnabled(e)}isSingleSwitchEnabled(){return this.engine.userSettingsData.device.inputDevice===tt.SingleSwitch}setEnabled(e){return e===this._isEnabled?this:(this._isEnabled=e,this._isEnabled?document.addEventListener(Tr.KeyUp,this.onDocumentKeyUp):document.removeEventListener(Tr.KeyUp,this.onDocumentKeyUp),this.handleSingleSwitch(),this)}updateFromSettings(){const e=this.isSingleSwitchEnabled()||this.isDualSwitchEnabled();return this.isEnabled!==e?this.setEnabled(e):this.handleSingleSwitch(),this.isEnabled}handleSingleSwitch(){return this.isEnabled&&this.isSingleSwitchEnabled()?(this.handleSingleSwitchEnable(),!0):(this.handleSingleSwitchDisable(),!1)}handleSingleSwitchDisable(){var e;(e=this.singleSwitchTimer)==null||e.stop(),this.singleSwitchTimer=void 0}handleSingleSwitchEnable(){this.singleSwitchTimer||(this.singleSwitchTimer=mt.Create({callback:()=>{this.emit(Pt.NEXT,this)},delayMs:D.EngineConfig.singleDeviceDelayMs,repeat:-1}))}onDocumentKeyUp(e){e.code===ta.Space?this.emit(Pt.NEXT,this):e.code===ta.Enter&&this.emit(Pt.SELECT,this)}}const Gt={DRAG:"drag",START:"start",STOP:"stop"};class na extends Z{constructor(e,r){super();a(this,"displayTarget");a(this,"dragBounds");a(this,"cjsEventsHandler");a(this,"inputTarget");a(this,"dragOffset");this.displayTarget=e,this.inputTarget=r??this.displayTarget,this.cjsEventsHandler=new tn(this.inputTarget).on(v.MOUSE_DOWN,this.onDisplayMouseDown,this).on(v.PRESS_MOVE,this.onDisplayPressMove,this).on(v.PRESS_UP,this.onDisplayPressUp,this),this.dragOffset={x:0,y:0},this.dragBounds=null}clearDragBounds(){return this.dragBounds=null,this}dispose(){this.removeAllListeners(),this.cjsEventsHandler.dispose()}setDragBounds(e){return this.dragBounds?this.dragBounds.copy(e):this.dragBounds=e.clone(),this}onDisplayMouseDown(e){this.dragOffset.x=e.localX,this.dragOffset.y=e.localY,this.emit(Gt.START,e,this)}onDisplayPressMove(e){let r=this.displayTarget.x+e.localX-this.dragOffset.x,i=this.displayTarget.y+e.localY-this.dragOffset.y;this.dragBounds&&(r=V(r,this.dragBounds.x,this.dragBounds.x+this.dragBounds.width),i=V(i,this.dragBounds.y,this.dragBounds.y+this.dragBounds.height)),this.displayTarget.x=r,this.displayTarget.y=i,this.emit(Gt.DRAG,e,this)}onDisplayPressUp(e){this.dragOffset.x=0,this.dragOffset.y=0,this.emit(Gt.STOP,e,this)}}const at={CHANGED:"changed",DRAG_STARTED:"dragStarted",DRAG_STOPPED:"dragStopped"},sn={Back:"back",BackHitArea:"back_hit_area",Fill:"fill",Handle:"handle"};class ra extends Dt{constructor(e,r,i){super(e);a(this,"dragManager");a(this,"handle");a(this,"back");a(this,"fill");a(this,"fillMask");a(this,"fillBounds");a(this,"handleBounds");a(this,"backBounds");a(this,"_shouldUseHandleBoundsForConstraint");a(this,"_value");this._shouldUseHandleBoundsForConstraint=!0,this.handle=this.initHandle(i),this.fill=this.initFill(),this.back=this.initBack(),this.dragManager=this.initDragManager(),this.resolveSetValue(r??0,!0,!1)}dispose(){var e,r,i;super.dispose(),(e=this.dragManager)==null||e.dispose(),(r=this.back)==null||r.dispose(),(i=this.handle)==null||i.dispose()}setEnabled(e){var r;return super.setEnabled(e),(r=this.handle)==null||r.setEnabled(e),this}setShouldUseHandleBoundsForConstraint(e){return e!==this._shouldUseHandleBoundsForConstraint?this:(this._shouldUseHandleBoundsForConstraint=e,this.updateDragBounds().updateHandle())}setValue(e,r=!0){return this.resolveSetValue(e,!0,r),this}get shouldUseHandleBoundsForConstraint(){return this._shouldUseHandleBoundsForConstraint}set shouldUseHandleBoundsForConstraint(e){this.setShouldUseHandleBoundsForConstraint(e)}get value(){return this._value}set value(e){this.setValue(e)}calcDragBounds(){if(!this.handleBounds||!this.backBounds)return;const e=this.shouldUseHandleBoundsForConstraint?this.handleBounds.width:0,r=e/2,{backBounds:i}=this,s=i.y+i.height/2;return new createjs.Rectangle(i.x+r,s,i.x+i.width-e,0)}handleBackMove(e){var l;if(!this.back||!((l=this.dragManager)!=null&&l.dragBounds))return;const r=this.dragManager.dragBounds.x,s=this.dragManager.dragBounds.x+this.dragManager.dragBounds.width-r,o=(e.localX-r)/s;this.resolveSetValue(o,!0,!0)}initBack(){const e=k(this.display,sn.Back);if(!e)return;let r=k(this.display,sn.BackHitArea);r?e.hitArea=r:r=e,this.backBounds=r.getBounds().clone(),this.backBounds.width*=r.scaleX,this.backBounds.height*=r.scaleY;const i=new tn(e);return i.on(v.MOUSE_DOWN,this.onBackMouseDown,this),i}initDragManager(){if(!this.handle)return;const e=this.calcDragBounds();return e?new na(this.handle.display).on(Gt.DRAG,this.onDragManagerDrag,this).on(Gt.START,this.onDragManagerStart,this).on(Gt.STOP,this.onDragManagerStop,this).setDragBounds(e):void 0}initFill(){const e=k(this.display,sn.Fill);return e&&(this.fillMask=new createjs.Shape,e.mask=this.fillMask,this.fillBounds=e.getBounds().clone()),e}initHandle(e){const r=vt(this.display,sn.Handle,void 0,e);return r&&(this.handleBounds=r.display.getBounds().clone()),r}onBackMouseDown(e){var r;this.emit(at.DRAG_STARTED,this),this.handleBackMove(e),(r=this.back)==null||r.on(v.PRESS_MOVE,this.onBackPressMove,this).on(v.PRESS_UP,this.onBackPressUp,this)}onBackPressMove(e){this.handleBackMove(e)}onBackPressUp(){var e;this.emit(at.DRAG_STOPPED,this),(e=this.back)==null||e.off(v.PRESS_MOVE,this.onBackPressMove,this).off(v.PRESS_UP,this.onBackPressUp,this)}onDragManagerDrag(){var o;if(!this.handle||!((o=this.dragManager)!=null&&o.dragBounds))return;const e=this.dragManager.dragBounds.x,i=this.dragManager.dragBounds.x+this.dragManager.dragBounds.width-e,s=(this.handle.x-e)/i;this.resolveSetValue(s,!1,!0)}onDragManagerStart(){this.emit(at.DRAG_STARTED,this)}onDragManagerStop(){this.emit(at.DRAG_STOPPED,this)}resolveSetValue(e,r,i){e=V(e,0,1),e!==this._value&&(this._value=e,this.updateFill(),r&&this.updateHandle(),i&&this.emit(at.CHANGED,this))}updateDragBounds(){var r;const e=this.calcDragBounds();return e&&((r=this.dragManager)==null||r.setDragBounds(e)),this}updateFill(){if(this.fillMask&&this.fill&&this.fillBounds){const e=this.fillBounds;this.fillMask.graphics.clear().drawRect(0,0,e.width*this.value,e.height)}return this}updateHandle(){var l;if(!this.handle||!((l=this.dragManager)!=null&&l.dragBounds))return this;const e=this.dragManager.dragBounds.x,i=e+this.dragManager.dragBounds.width-e;this.handle.x=e+i*this.value;const s=this.dragManager.dragBounds.y,o=e+this.dragManager.dragBounds.height;return this.handle.y=V(this.handle.y,s,o),this}}class Ld extends ra{constructor(e,r=0){super(e,r);a(this,"flag");this.flag=k(this.display,"flag"),this.shouldUseHandleBoundsForConstraint=!1}}function $d(t,n){const e=t instanceof createjs.MovieClip?t.timeline:t,r=typeof n=="string"?e.resolve(n):n;return r??(console.warn("unable to resolve in scene timeline, frame label of value:",n),null)}const lt={Bgm:"bgm",Sound:"sound",Voice:"voice"},ia=Object.values(lt);function Ad(t,n){if(n instanceof createjs.MovieClip)return n;if(!n)return new createjs.MovieClip;const e=t.lib.animateClasses,r=e?e[n]:void 0;return r?new r:new createjs.MovieClip}class Ir extends Dt{constructor(e,r,i=!1){super(Ad(e,r));a(this,"engine");a(this,"frameCallbacks");a(this,"isContainerForDisplay");a(this,"lastVisitedFrame");a(this,"syncedSoundData");a(this,"playToTween");this.engine=e,this.isContainerForDisplay=i,this.movieClip.scene=this,this.movieClip.engine=e,this.movieClip.loop=!1,this.frameCallbacks=[],this.stop(),this.lastVisitedFrame=-1,this.onDisplayTimelineChange=this.onDisplayTimelineChange.bind(this),this.onSyncedSoundComplete=this.onSyncedSoundComplete.bind(this),this.onSyncedSoundTick=this.onSyncedSoundTick.bind(this),this.timeline.addEventListener(v.CHANGE,this.onDisplayTimelineChange)}dispose(){var e;this.removeAllFrameCallbacks(),this.stop(),delete this.movieClip.scene,(e=this.display.parent)==null||e.removeChild(this.display),this.timeline.removeEventListener(v.CHANGE,this.onDisplayTimelineChange),super.dispose()}addFrameCallback(e,r,i,s=!1,o=void 0){const l=this.resolveFrame(e);if(l===null)return console.warn("unable to resolve in scene timeline, frame label of value:",e),this;const u={callback:r,context:i,frame:l,isOnce:s,params:o};return this.frameCallbacks[l]=u,this}get currentFrame(){return this.movieClip.currentFrame}set currentFrame(e){this.stopInner(e)}getChild(e){return typeof e=="number"?this.getChildAt(e):this.getChildByName(e)}getChildAt(e){return this.display.getChildAt(e)??void 0}getChildByName(e){return this.display.getChildByName(e)??void 0}getChildMovieClip(e){const r=this.getChild(e);return r instanceof createjs.MovieClip?r:void 0}isFrameValid(e){return this.resolveFrame(e)!==null}get movieClip(){const{display:e}=this;return this.isContainerForDisplay?e.getChildAt(0):e}nextFrame(){return this.movieClip.gotoAndStop(this.movieClip.currentFrame+1),this}play(e){if(e!==void 0){const r=this.resolveFrame(e);r!==null&&r!==this.movieClip.currentFrame?this.movieClip.gotoAndPlay(r):this.movieClip.play()}else this.movieClip.play();return this}playOnce(e,r,i,s){return this.addFrameCallback(this.movieClip.totalFrames-1,()=>{this.stop(),e.call(r,this,s)},r,!0,s),this.play(i)}playSound(e,r=1,i=!1,s=void 0,o=void 0){return this.engine.playSound(e,r,i,s,o)}playSyncVoice(e,r,i){return new Promise(s=>{const o=this.resolveFrame(r);if(o===null){s();return}const l=this.resolveFrame(i);if(l===null){s();return}const u=this.engine.playSound(e,this.engine.resolveSettingsVolume(lt.Voice));if(!u){s();return}this.syncedSoundData&&(this.syncedSoundData.sound.stop(),this.syncedSoundData.sound.destroy()),this.syncedSoundData={endFrame:l,resolve:s,sound:u,startFrame:o},this.stop(this.syncedSoundData.startFrame),u.addEventListener(v.COMPLETE,this.onSyncedSoundComplete),createjs.Ticker.addEventListener(v.TICK,this.onSyncedSoundTick)})}playTo(e,r,i,s,o){const l=this.resolveFrame(e);if(l===null)return this;if(r!==void 0){if(this.resolveFrame(r)===null)return this;this.stop(r)}return this.playToTween&&this.stopPlayToTween(),this.playToTween=createjs.Tween.get(this,{onComplete:()=>{i==null||i.call(s,this,o)},useTicks:!0}).to({currentFrame:l},Math.abs(l-this.currentFrame)),this}playToEnd(e,r,i,s){return this.playTo(e,void 0,r,i,s)}playVoices(e,r){return this.engine.playVoice(e,r)}removeAllFrameCallbacks(){return this.frameCallbacks.length=0,this}removeFrameCallback(e){const r=this.resolveFrame(e);return r!==null&&delete this.frameCallbacks[r],this}resolveFrame(e){return $d(this.display,e)}get stage(){return this.display.stage}stop(e){return this.stopPlayToTween(),this.stopInner(e),this}get timeline(){return this.movieClip.timeline}get totalFrames(){return this.movieClip.totalFrames}onDisplayTimelineChange(){const e=Math.round(this.timeline.position);if(this.lastVisitedFrame===e)return;if(e>=this.movieClip.totalFrames){this.movieClip.loop||this.stop(this.movieClip.totalFrames-1);return}this.lastVisitedFrame=e;const r=this.frameCallbacks[e];r&&(r.isOnce&&r.frame!==void 0&&this.removeFrameCallback(r.frame),r.callback&&r.callback.call(r.context,this,r.params))}onSyncedSoundComplete(){createjs.Ticker.removeEventListener(v.TICK,this.onSyncedSoundTick);const{syncedSoundData:e}=this;e&&(this.syncedSoundData=void 0,this.currentFrame!==e.endFrame&&this.stop(e.endFrame),e.sound.destroy(),e.resolve())}onSyncedSoundTick(){if(!this.syncedSoundData||this.syncedSoundData.sound.duration<=0){createjs.Ticker.removeEventListener(v.TICK,this.onSyncedSoundTick);return}const e=this.syncedSoundData.endFrame-this.syncedSoundData.startFrame,r=V(this.syncedSoundData.sound.position/this.syncedSoundData.sound.duration,0,1),i=Math.floor(this.syncedSoundData.startFrame+e*r);this.stop(i)}stopInner(e){if(e!==void 0){const r=this.resolveFrame(e);r!==null&&r!==this.movieClip.currentFrame?this.movieClip.gotoAndStop(r):this.movieClip.stop()}else this.movieClip.stop()}stopPlayToTween(){this.playToTween&&(createjs.Tween.removeTweens(this),this.playToTween=void 0)}}const sa={COMPLETE:"complete"},Od={NextButton:"nextButtonDisplay"};class Nd extends Ut{constructor(e,r){super(r,e.engine);a(this,"scene");a(this,"nextButton");a(this,"introDelayTimer");this.scene=new Ir(this.engine,r),this.nextButton=this.initButton(Od.NextButton,this.onNextButtonPressed,this.engine.lib.animateClasses.TutorialSkipNavButtonHitDisplay)}dispose(){var e;(e=this.nextButton)==null||e.dispose(),this.disposeIntroDelayTimer(),super.dispose()}present(){this.visible=!0,this.scene.stop(0),this.introDelayTimer=mt.Create({delayMs:x.TutorialIntroDelayMs,callback:()=>{this.setNextPage()}})}unpresent(){this.visible=!1}onInit(){super.onInit(this.engine.lib.animateClasses.TutorialSkipNavButtonHitDisplay)}disposeIntroDelayTimer(){this.introDelayTimer=mt.Dispose(this.introDelayTimer)}onNextButtonPressed(){this.setNextPage()}setNextPage(){this.disposeIntroDelayTimer(),this.scene.currentFrame+1<this.scene.totalFrames?this.scene.nextFrame():this.emit(sa.COMPLETE,this)}}const ut={HelpfulTipsPanel:"helpfulTipsDisplay",NextButton:"nextButtonDisplay",PrevButton:"prevButtonDisplay",ProgressBar:"progressBarDisplay",RestartButton:"restartButtonDisplay",SettingsButton:"settingsButtonDisplay",TutorialPanels:"tutorialPanelsDisplay"},A={NEXT:"next",PREV:"prev",RESTART:"restart",SETTINGS:"settings",TUTORIAL_COMPLETE:"tutorialComplete"},oa={OPENED:"opened"},Mr={Bubble:"bubble_display",Button:"buttonDisplay",TextMessage:"txtMessage"};class Fd extends Dt{constructor(e){super(e);a(this,"button");a(this,"bubble");a(this,"txtMessage");this.button=vt(this.display,Mr.Button,this.onButtonPressed,void 0,this),this.bubble=k(this.display,Mr.Bubble),this.txtMessage=Pr(this.display,Mr.TextMessage,"")}dispose(){var e;super.dispose(),(e=this.button)==null||e.dispose()}present(e=""){return this.visible=!0,kr([this.bubble,this.txtMessage],e.length>0),Dr(this.txtMessage,e),this}unpresent(){return this.visible=!1,this}onButtonPressed(){this.emit(oa.OPENED,this)}}const aa=[$.Next,$.Prev,$.Restart];class Rd extends Ut{constructor(e,r){super(e,r);a(this,"progressBar");a(this,"navButtonsByDirection");a(this,"helpfulTipsPanel");a(this,"navButtonsInOrder");a(this,"inputDeviceHandler");a(this,"settingsButton");a(this,"selectedButtonIndex");a(this,"isNavUiActive");a(this,"navStartFrame");a(this,"ticks");a(this,"tutorialManager");a(this,"navConfig");a(this,"buttonEvent");this.progressBar=this.initProgressBar(),this.navButtonsByDirection=this.initNavButtons(r.lib.animateClasses),this.navButtonsInOrder=aa.map(i=>this.navButtonsByDirection.get(i)).filter(i=>!!i),this.inputDeviceHandler=this.initInputDeviceHandler(),this.selectedButtonIndex=-1,this.settingsButton=this.initButton(ut.SettingsButton,this.onSettingsPressed,r.lib.animateClasses.SettingsButtonDisplay),this.helpfulTipsPanel=this.initHelpfulTipsPanel(),this.isNavUiActive=!1,this.navStartFrame=-1,this.ticks=-1,this.onTickPessKludge=this.onTickPessKludge.bind(this),this.onExportRootTimelineChangeNav=this.onExportRootTimelineChangeNav.bind(this)}dispose(){var e,r,i;super.dispose(),this.uninitExportRootTimeline(),this.inputDeviceHandler.dispose(),(e=this.progressBar)==null||e.dispose(),(r=this.helpfulTipsPanel)==null||r.dispose(),(i=this.settingsButton)==null||i.dispose(),this.navButtonsByDirection.forEach(s=>{s==null||s.dispose()})}presentNavUi(e){var r;return this.isNavUiActive?this:(this.navStartFrame=this.engine.exportRoot.currentFrame,this.isNavUiActive=!0,kr(this.navButtonsInOrder,!0),this.navConfig=e,(r=e==null?void 0:e.navButtonsToHide)==null||r.forEach(i=>{var s;(s=this.navButtonsByDirection.get(i))==null||s.setVisible(!1)}),this.unselectCurrentNavButton(),this.setDefaultSelectedButton((e==null?void 0:e.defaultSelectedNavButtonId)??null),this)}presentTutorial(){var e,r,i;if(!this.tutorialManager){const s=k(this.container,ut.TutorialPanels);if(!s)return console.warn("No tutorial panels display object on main panel was found with name:",ut.TutorialPanels),!1;this.tutorialManager=new Nd(this,s).once(ot.CLOSE,this.onTutorialManagerClose,this).once(sa.COMPLETE,this.onTutorialManagerComplete,this)}return this.tutorialManager.present(),this.unpresentNavUi(),this.visible=!0,(e=this.helpfulTipsPanel)==null||e.setVisible(!1),(r=this.settingsButton)==null||r.setVisible(!1),(i=this.progressBar)==null||i.setVisible(!1),!0}set settingsButtonVisible(e){var r;(r=this.settingsButton)==null||r.setVisible(e)}setVisible(e){const r=e!==this.visible,i=super.setVisible(e);return r&&this.update(),i}unpresentNavUi(){return this.inputDeviceHandler.isEnabled=!1,this.isNavUiActive&&(this.isNavUiActive=!1,kr(this.navButtonsInOrder,!1)),this}unpresentTutorial(){var e,r;return(e=this.tutorialManager)==null||e.unpresent(),(r=this.settingsButton)==null||r.setVisible(!0),this}updateFromSettings(){var e;this.visible=!0,this.inputDeviceHandler.updateFromSettings(),this.setDefaultSelectedButton(((e=this.navConfig)==null?void 0:e.defaultSelectedNavButtonId)??null)}confirmSelectedNavButton(){const e=this.selectedNavButtonEvent;e&&this.emit(e,this)}initHelpfulTipsPanel(){const e=k(this.container,ut.HelpfulTipsPanel);if(!e){console.warn("No helpful tips display object on main panel was found with name:",ut.HelpfulTipsPanel);return}return new Fd(e).setVisible(!1).on(oa.OPENED,this.onHelpfulTipsOpened,this)}initInputDeviceHandler(){return new ea(this.engine).on(Pt.NEXT,this.onInputDeviceNext,this).on(Pt.SELECT,this.onInputDeviceSelect,this)}initNavButton(e,r,i){var o;const s=(o=this.initButton(e,r,i))==null?void 0:o.setVisible(!1);return s||console.warn("No nav button on main panel was found with name:",e),s}initNavButtons(e){const r=[[$.Next,this.initNavButton(ut.NextButton,this.onNextPressed,e.NextButtonDisplay)],[$.Prev,this.initNavButton(ut.PrevButton,this.onPrevPressed,e.PrevtButtonDisplay)],[$.Restart,this.initNavButton(ut.RestartButton,this.onRestartPressed,e.RestartButtonDisplay)]],i=new Map;return r.forEach(s=>{const[o,l]=s;l&&i.set(o,l)}),i}initProgressBar(){const e=k(this.container,ut.ProgressBar);return e?new Ld(e):void 0}onExportRootTimelineChangeNav(){const{currentFrame:e}=this.engine.exportRoot;if(this.navStartFrame>-1&&e!==this.navStartFrame){console.log(`nav adjusted timeline from ${e} to ${this.navStartFrame}`);const r=this.navStartFrame;this.navStartFrame=-1,this.engine.exportRoot.stop(r)}}onHelpfulTipsOpened(){}onInputDeviceNext(){this.selectNextNavButton()}onInputDeviceSelect(){this.confirmSelectedNavButton()}onNextPressed(){this.emit(A.NEXT,this)}onPrevPressed(){this.emit(A.PREV,this)}onRestartPressed(){this.emit(A.RESTART,this)}onSettingsPressed(){this.emit(A.SETTINGS,this)}onTickPessKludge(){this.ticks+=1,!(this.ticks<4)&&(createjs.Ticker.removeEventListener(v.TICK,this.onTickPessKludge),this.buttonEvent&&(this.emit(this.buttonEvent,this),this.buttonEvent=void 0))}onTutorialManagerClose(){this.emit(A.TUTORIAL_COMPLETE,!1,this)}onTutorialManagerComplete(){this.emit(A.TUTORIAL_COMPLETE,!0,this)}get selectedNavButton(){return this.navButtonsInOrder[this.selectedButtonIndex]}get selectedNavButtonEvent(){switch(Dd(this.navButtonsByDirection,this.selectedNavButton)){case $.Prev:return A.PREV;case $.Next:return A.NEXT;case $.Restart:return A.RESTART;default:return}}selectNextNavButton(){this.selectNavButtonAt((this.selectedButtonIndex+1)%this.navButtonsInOrder.length)}selectNavButtonAt(e){var r,i;(r=this.navButtonsInOrder[this.selectedButtonIndex])==null||r.setSelected(!1),this.selectedButtonIndex=e,(i=this.navButtonsInOrder[this.selectedButtonIndex])==null||i.setSelected(!0)}setDefaultSelectedButton(e){this.inputDeviceHandler.updateFromSettings()&&e&&(this.inputDeviceHandler.isSingleSwitchEnabled()||this.inputDeviceHandler.isDualSwitchEnabled)?this.setSelectedNavButton(e):this.unselectCurrentNavButton()}setSelectedNavButton(e){const r=aa.indexOf(e);this.selectNavButtonAt(r)}uninitExportRootTimeline(){this.navStartFrame=-1,this.engine.exportRoot.timeline.removeEventListener(v.CHANGE,this.onExportRootTimelineChangeNav)}unselectCurrentNavButton(){this.selectNavButtonAt(-1)}update(){this.tutorialManager||this.updateHelpfupTipsPanel()}updateHelpfupTipsPanel(){}}const xr={CLOSE:"close",COMPLETE:"complete"},la={AlreadyOpen:"alreadyopen"};function Vd(t){return t.getMetrics()}function Et(t,n,e=""){return rn(t,n,e)??e}function Hd(t){const n=t??{};return n.alpha=rt(n,"alpha",D.MessagePanel.DimBack.Alpha),n.color=Et(n,"color",D.MessagePanel.DimBack.Color),n}function zd(t){const n=t??{};return n.buttonLabels??(n.buttonLabels={}),n.dimBack=Hd(n.dimBack),n}const Mt=class Mt{static Clear(n){(!n||n===Mt.Instance)&&(Mt.Instance=void 0)}static Get(){return Mt.Instance}static Set(n){Mt.Instance=n}constructor(){throw new Error("Instances of SbMessagePanelSingleton may not be created.")}};a(Mt,"Instance");let Wt=Mt;const Lr={BackDisplay:"back",MessageText:"txtMessage",TextAreaNode:"textAreaNode"};class Tt extends Dt{constructor(e,r,i,s){super(r);a(this,"shouldCloseAfterSelection");a(this,"buttonIdsByButton");a(this,"config");a(this,"stage");a(this,"dimBack");a(this,"isOpen");a(this,"dragManager");a(this,"_autoCloseDelayConfig");a(this,"autoCloseTimer");a(this,"textMessage");a(this,"back");a(this,"textAreaNode");a(this,"promisedResolve");Wt.Set(this),this.config=zd(s),this.stage=e,this.dimBack=this.createDimBack(),this.textMessage=Pr(this.display,Lr.MessageText,i),this.back=nn(this.display,Lr.BackDisplay),this.buttonIdsByButton=this.initButtons(),this.textAreaNode=this.initTextAreaNode(),this.back&&(this.dragManager=new na(this.display,this.back)),this._autoCloseDelayConfig=Tt.BuildAutoCloseDelayConfig(this.config.autoClose),this.shouldCloseAfterSelection=!0,this.isOpen=!1,this.alignTextVerticlally()}get autoCloseDelayConfig(){return this._autoCloseDelayConfig}set autoCloseDelayConfig(e){this._autoCloseDelayConfig=Tt.BuildAutoCloseDelayConfig(e)}static Create(e,r,i,s){if(Wt.Instance)return new Promise((c,h)=>{h(la.AlreadyOpen)});const o=new i,l=new Tt(e,o,r,s),{canvasSize:u}=l;return u&&l.setPosition(u.width/2,u.height/2),l.open()}close(e=it.Close){this.isOpen&&(this.isOpen=!1,this.autoCloseTimer&&(this.autoCloseTimer.stop(),this.autoCloseTimer=void 0),this.stage.removeChild(this.dimBack,this.display),this.dispatchPromsedResolve(e),Wt.Clear(this),this.emit(xr.CLOSE,this))}dispose(){var e;super.dispose(),this.close(),(e=this.dragManager)==null||e.dispose(),this.dragManager=void 0,this.dimBack.removeAllEventListeners(),this.disposeButtons()}async open(){return new Promise((e,r)=>{if(this.isOpen){r(la.AlreadyOpen);return}this.isOpen=!0,this.promisedResolve=e,this.stage.addChild(this.dimBack,this.display),this._autoCloseDelayConfig&&(this.autoCloseTimer=mt.Create({callback:()=>{var i;this.close(((i=this._autoCloseDelayConfig)==null?void 0:i.buttonId)??it.Close)},delayMs:this._autoCloseDelayConfig.delayMs}))})}setAutoCloseDelay(e=null){return this._autoCloseDelayConfig=Tt.BuildAutoCloseDelayConfig(e??void 0),this}setText(e){return this.textMessage&&(this.textMessage.text=e),this.alignTextVerticlally(),this}alignTextVerticlally(){const{textAreaNode:e,textMessage:r}=this;if(r&&e){const i=Vd(r),s=r.getMeasuredLineHeight()*i.lines.length;r.y=e.y+(e.height-s)/2}}get canvas(){const e=this.stage.canvas;return e instanceof HTMLCanvasElement?e:document.getElementById(e)}get canvasSize(){const{canvas:e}=this;if(e)return{width:e.width/this.stage.scaleX,height:e.height/this.stage.scaleY}}createDimBack(){const e=new createjs.Shape;return e.on(v.CLICK,()=>{}),this.renderDimBack(e),e}dispatchPromsedResolve(e){this.promisedResolve&&e&&(this.promisedResolve(e),this.promisedResolve=void 0)}disposeButtons(){this.buttonIdsByButton.forEach((e,r)=>{r.dispose()}),this.buttonIdsByButton.clear()}static BuildAutoCloseDelayConfig(e){if(e)return e===!0?{buttonId:D.MessagePanel.AutoClose.ButtonId,delayMs:D.MessagePanel.AutoClose.DelayMs}:{buttonId:e.buttonId??D.MessagePanel.AutoClose.ButtonId,delayMs:e.delayMs}}initButton(e,r){const i=vt(this.display,`${e}ButtonDisplay`,this.onButtonPressed,void 0,this);return i&&r&&(i.buttonLabelText=r),i}initButtons(){const e=new Map;return Pl.forEach(r=>{const i=this.initButton(r,this.config.buttonLabels[r]);i&&e.set(i,r)}),e}initTextAreaNode(){const e=St(this.display,Lr.TextAreaNode);if(!e)return;const r=e.getTransformedBounds().clone();return e.visible=!1,r}onButtonPressed(e){const r=this.buttonIdsByButton.get(e);this.emit(xr.COMPLETE,r,this),this.dispatchPromsedResolve(r),this.shouldCloseAfterSelection&&this.dispose()}renderDimBack(e){const{canvasSize:r}=this;r&&(e.alpha=this.config.dimBack.alpha,e.graphics.clear().beginFill(this.config.dimBack.color).drawRect(0,0,r.width,r.height).endFill())}}const $r={SUBMIT:"submit"};function ua(t,n){return t+Math.floor(Math.random()*(n-t+1))}function jd(){const t=ua(1,9),n=ua(0,t),e=t-n;return{expression:`${n} + ${e}`,value:t}}class Ud extends Ut{constructor(e,r){var i;super(e,r);a(this,"numberButtons");a(this,"txtChallenge");a(this,"txtChallengeAnswer");a(this,"clearButton");a(this,"submitButton");a(this,"feedbackTween");a(this,"challengeData");a(this,"origTextColor");a(this,"answer");this.numberButtons=this.initNumberButtons(),this.submitButton=this.initSubmitButton(),this.clearButton=this.initClearButton(),this.txtChallenge=this.initChallengeText("txtChallenge"),this.txtChallengeAnswer=this.initChallengeText("txtChallengeAnswer"),this.origTextColor=((i=this.txtChallengeAnswer)==null?void 0:i.color)??"#000",this.answer=0}clearAnswer(){return this.answer=0,this.updateAfterResponse(),this}present(){var e;return this.refreshChallenge(),(e=this.submitButton)==null||e.setEnabled(!0),this.visible=!0,this}unpresent(){var e;return this.disposeFeedbackTween(),(e=this.submitButton)==null||e.setEnabled(!1),this.visible=!1,this}onInit(){super.onInit(this.engine.lib.animateClasses.CloseXButtonHitBoxDisplay)}addNumberOntoAnswer(e){let r=this.answer+e.toString(10);r=r.substring(r.length-1),this.answer=Number.parseInt(r,10)}disposeFeedbackTween(){this.feedbackTween&&(createjs.Tween.removeTweens(this.feedbackTween.target),this.feedbackTween=void 0)}enableNumberButtons(e){this.numberButtons.forEach(r=>{r.enabled=e})}feedbackIncorrect(){var e;this.flashAnswerText("#f00"),(e=this.feedbackTween)==null||e.call(()=>{var r;(r=this.submitButton)==null||r.setEnabled(!0),this.emit($r.SUBMIT,!1,this)})}feedbackCorrect(){var e;this.flashAnswerText("#0f0"),(e=this.feedbackTween)==null||e.call(()=>{this.emit($r.SUBMIT,!0,this)})}flashAnswerText(e){if(!this.txtChallengeAnswer)return;this.disposeFeedbackTween();const r=this.txtChallengeAnswer;this.feedbackTween=createjs.Tween.get(r);for(let i=0;i<7;i+=1)this.feedbackTween.call(()=>{r.color=e}).wait(60).call(()=>{r.color=this.origTextColor}).wait(60)}initChallengeText(e){const r=this.initText(e);return r&&(r.visible=!1),r}initClearButton(){return this.initCompoundButton("passcodeButtonClear",this.onClearPressed)}initNumberButtons(){const e=[];let r=1,i=this.initCompoundButton(`passcodeButton${r}`,this.onNumberButtonPressed,void 0,this.engine.lib.animateClasses.PasscodeButtonBackDisplay);for(;i;)e.push(i),r+=1,i=this.initCompoundButton(`passcodeButton${r}`,this.onNumberButtonPressed);return e}initSubmitButton(){return this.initCompoundButton("passcodeButtonSubmit",this.onSubmitPressed)}onClearPressed(){this.clearAnswer()}onNumberButtonPressed(e){const r=this.numberButtons.indexOf(e);r>-1&&(this.addNumberOntoAnswer(r+1),this.updateAfterResponse())}onSubmitPressed(){var r;(r=this.submitButton)==null||r.setEnabled(!1),this.challengeData!==void 0&&this.answer===this.challengeData.value?this.feedbackCorrect():this.feedbackIncorrect()}refreshChallenge(){this.challengeData=jd(),this.txtChallenge&&(this.txtChallenge.text=`${this.challengeData.expression}?`,this.txtChallenge.visible=!0),this.answer=0,this.updateAfterResponse()}updateAfterResponse(){this.txtChallengeAnswer&&(this.txtChallengeAnswer.text=this.answer!==0?this.answer.toString(10):"",this.txtChallengeAnswer.visible=!0),this.enableNumberButtons(this.answer>-100&&this.answer<100)}}function Gd(t,n,e,r,i,s){const o=nn(t,n);if(!o)return;const l=new ra(o,i,s);return e&&l.on(at.CHANGED,e,r),l}class Ar{constructor(n,e){a(this,"areSettingsDirty");a(this,"mainPanel");a(this,"lib");a(this,"_settings");this.mainPanel=n,this.lib=e,this.areSettingsDirty=!1}get settings(){return this._settings}setSettings(n){return this._settings=n,this.updateSettingsUiFromData(),this.areSettingsDirty=!1,this}setSettingProp(n,e,r){return n!==void 0&&(n[e]=r),this.areSettingsDirty=!0,this}}class Wd extends Ar{constructor(e,r){super(e,r);a(this,"sliderCheckboxPairs");a(this,"settingDataKeysByUiControl");this.settingDataKeysByUiControl=new Map,this.sliderCheckboxPairs=this.initSliderCheckboxPairs(),this.initSoundSlider(),this.initVoiceSlider(),this.initBgmSlider(),this.initBgmCheckbox()}updateSettingsUiFromData(){const{settings:e}=this;e&&ia.forEach(r=>{var l,u;const i=e[r],s=i.isEnabled,o=this.sliderCheckboxPairs[r];(l=o.checkbox)==null||l.setOn(s),(u=o.slider)==null||u.setValue(s?i.volume:0)})}getCheckbox(e){return this.sliderCheckboxPairs[e].checkbox}getSlider(e){return this.sliderCheckboxPairs[e].slider}initBgmCheckbox(){const e=this.getCheckbox(lt.Bgm);e&&e.on(G.PRESSED,this.onBgmCheckboxPressed,this)}initBgmSlider(){const e=this.getSlider(lt.Bgm);e&&e.on(at.CHANGED,this.onBgmSliderChanged,this)}initSliderCheckboxPairs(){const{container:e}=this.mainPanel,r={};return ia.forEach(i=>{const s=this.mainPanel.initCheckbox(`${i}CheckboxDisplay`,this.onCheckboxPressed,!1,e,this),o=Gd(e,`${i}SliderDisplay`,this.onSliderChanged,this);r[i]={checkbox:s,slider:o},s&&this.settingDataKeysByUiControl.set(s,i),o&&this.settingDataKeysByUiControl.set(o,i)}),r}initSoundSlider(){const e=this.getSlider(lt.Sound);e&&e.on(at.DRAG_STOPPED,this.onSoundSliderDragStopped,this)}initVoiceSlider(){const e=this.getSlider(lt.Voice);e&&e.on(at.DRAG_STOPPED,this.onVoiceSliderDragStopped,this)}onBgmCheckboxPressed(){this.updateBgmVolume()}onBgmSliderChanged(){this.updateBgmVolume()}onCheckboxPressed(e){var l;const r=e,i=this.settingDataKeysByUiControl.get(r);if(!i||!this.settings)return;const s=this.settings[i];this.setSettingProp(s,"isEnabled",r.isOn),(l=this.sliderCheckboxPairs[i].slider)==null||l.setValue(r.isOn?s.volume:0,!1)}onSliderChanged(e){var l;const r=this.settingDataKeysByUiControl.get(e);if(!r||!this.settings)return;const i=e.value>0;(l=this.sliderCheckboxPairs[r].checkbox)==null||l.setOn(i);const o=this.settings[r];this.setSettingProp(o,"isEnabled",i),this.setSettingProp(o,"volume",e.value)}onSoundSliderDragStopped(){var e;this.mainPanel.engine.playSound(this.lib.audioIds.VolumeTest,(e=this.settings)==null?void 0:e.sound.volume)}onVoiceSliderDragStopped(){var e;this.mainPanel.engine.playSound(this.lib.audioIds.VolumeTest,(e=this.settings)==null?void 0:e.voice.volume)}updateBgmVolume(){this.settings&&this.mainPanel.engine.setBgmVolume(this.settings.bgm.isEnabled?this.settings.bgm.volume:0)}}const on={SELECTED:"selected"};class Or extends Z{constructor(e){super();a(this,"radioButtonIdsByButton");a(this,"_isEnabled");this.radioButtonIdsByButton=new Map,this._isEnabled=!0,e==null||e.forEach(([r,i])=>{this.add(r,i)})}add(e,r){return this.radioButtonIdsByButton.has(r)||r.addListener(G.PRESSED,this.onButtonPressed,this),this.radioButtonIdsByButton.set(r,e),this}dispose(){this.removeAllButtons(),this.removeAllListeners()}get enabled(){return this._isEnabled}set enabled(e){this._isEnabled=e,this.radioButtonIdsByButton.forEach((r,i)=>{i.enabled=e})}removeAllButtons(){return this.radioButtonIdsByButton.forEach(e=>{this.removeButton(e)}),this}removeButton(e){const r=this.resolveButton(e);return r&&(r.removeListener(G.PRESSED,this.onButtonPressed,this),this.radioButtonIdsByButton.delete(r)),this}setButtonOn(e){return this.setButtonState(e,!0)}setButtonState(e,r){const i=this.resolveButton(e);return i&&(i.setOn(r),this.update(i)),this}setEnabled(e){return this.enabled=e,this}shouldUseDisabledStates(e){return this.radioButtonIdsByButton.forEach((r,i)=>{i.shouldUseDisabledState=e}),this}onButtonPressed(e){const r=this.radioButtonIdsByButton.get(e);r!==void 0&&(this.update(e),this.emit(on.SELECTED,r,e,this))}resolveButton(e){if(typeof e=="string"||typeof e=="number"){const r=this.radioButtonIdsByButton.entries();let i=r.next();for(;!i.done;){const[s,o]=i.value;if(o===e)return s;i=r.next()}return}return this.radioButtonIdsByButton.has(e)?e:void 0}setOnAndDisableOtherButtons(e){this.radioButtonIdsByButton.forEach((r,i)=>{i!==e&&i.setOn(!1).setEnabled(this.enabled)})}update(e){e.isOn&&(e.enabled=!1,this.setOnAndDisableOtherButtons(e))}}const qd=[[tt.DualSwitch,"dualSwitchCheckboxDisplay"],[tt.EyeTracker,"eyeTrackerCheckboxDisplay"],[tt.SingleSwitch,"singleSwitchCheckboxDisplay"],[tt.TapMouse,"tapMouseCheckboxDisplay"]];class ca extends Ar{constructor(e,r){super(e,r);a(this,"devicesRadioGroup");this.devicesRadioGroup=this.initDevicesRadioGroup()}updateFromSettings(){return this.settings&&this.devicesRadioGroup.setButtonOn(this.settings.inputDevice),this}updateSettingsUiFromData(){this.updateFromSettings()}initDevicesRadioGroup(){const e=[];qd.forEach(([i,s])=>{const o=this.mainPanel.initCheckbox(s);o&&e.push([i,o])});const r=new Or(e);return r.addListener(on.SELECTED,this.onDevicesRadioGroupSelected,this),r}onDevicesRadioGroupSelected(e){this.setSettingProp(this.settings,"inputDevice",e)}}class qt{constructor(n){a(this,"checkbox");a(this,"onFill");a(this,"offFill");this.checkbox=n,this.onFill=qt.GetFillDisplay(this.checkbox.onButton),this.offFill=qt.GetFillDisplay(this.checkbox.offButton)}setColor(n){return qt.ApplyColorToFill(this.onFill,n),qt.ApplyColorToFill(this.offFill,n),this}static ApplyColorToFill(n,e){if(!n)return;const r=x.CaptionHilites.Stroke;n.display.graphics.clear().setStrokeStyle(r.Thickness).beginStroke(r.Color).beginFill(e).drawRect(0,0,n.bounds.width,n.bounds.height)}static GetFillDisplay(n){if(!((n==null?void 0:n.display)instanceof createjs.MovieClip))return;const e=k(n.display,"fill_display");if(!e)return;const r=k(e,"fill_placeholder");if(!r)return;const i=r.getBounds();if(!i)return;e.removeChild(r);const s=new createjs.Shape;return s.regX=i.width/2,s.regY=i.height/2,e.addChild(s),{bounds:i.clone(),display:s}}}const ha="off",Kt="on";class Kd extends Ar{constructor(e,r){super(e,r);a(this,"captionHiliteColorRadioGroup");a(this,"helpfulTipsRadioGroup");a(this,"captionsRadioGroup");a(this,"captionHilitesRadioGroup");a(this,"aacRadioGroup");this.helpfulTipsRadioGroup=this.initRadioGroup("helpfulTipsOffButtonDisplay","helpfulTipsOnButtonDisplay",this.onHelpfulTipsGroupSelected),this.captionsRadioGroup=this.initRadioGroup("captionsOffButtonDisplay","captionsOnButtonDisplay",this.onCaptionsGroupSelected),this.captionHilitesRadioGroup=this.initRadioGroup("captionHilitesOffButtonDisplay","captionHilitesOnButtonDisplay",this.onCaptionHilitesGroupSelected),this.captionHiliteColorRadioGroup=this.initCaptionHiliteColorCheckboxes(),this.aacRadioGroup=this.initRadioGroup("aacOffButtonDisplay","aacOnButtonDisplay",this.onAacGroupSelected),this.updateSettingsUiFromData()}updateSettingsUiFromData(){this.settings&&this.updateRadioGroup(this.aacRadioGroup,this.settings.aacSymbolsEnabled).updateRadioGroup(this.captionsRadioGroup,this.settings.captionsEnabled).updateRadioGroup(this.helpfulTipsRadioGroup,this.settings.helpfulTipsEnabled).updateCaptionHilitesRadioGroup().updateHiliteColorRadioGroup()}updateCaptionHilitesRadioGroup(){var e;return this.updateRadioGroup(this.captionHilitesRadioGroup,((e=this.settings)==null?void 0:e.captionHilitesEnabled)===!0).updateCaptionHilitesRadioGroupEnabledState()}initCaptionHiliteColorCheckbox(e){const r=Zo(this.mainPanel.container,e,!1,void 0,void 0,this.lib.animateClasses.RadioButtonHitBoxDisplay);return r?new qt(r):void 0}initCaptionHiliteColorCheckboxes(){const e=[];let r=0,i=this.initCaptionHiliteColorCheckbox(`hiliteColor${r}CheckboxDisplay`);for(;i;){const o=x.CaptionHilites.Colors[r];o&&i.setColor(o),i.checkbox.shouldUseDisabledState=!1,e.push([r,i.checkbox]),r+=1,i=this.initCaptionHiliteColorCheckbox(`hiliteColor${r}CheckboxDisplay`)}const s=new Or(e);return s.addListener(on.SELECTED,this.onCaptionHiliteColorCheckboxPressed,this),s}initRadioGroup(e,r,i){const s=this.initCaptionHiliteColorCheckbox(e),o=this.initCaptionHiliteColorCheckbox(r),l=[];s&&l.push([ha,s.checkbox]),o&&l.push([Kt,o.checkbox]);const u=new Or(l);return u.addListener(on.SELECTED,i,this),u.shouldUseDisabledStates(!1),u}onAacGroupSelected(e){this.setSettingProp(this.settings,"aacSymbolsEnabled",e===Kt)}onCaptionHiliteColorCheckboxPressed(e){this.setSettingProp(this.settings,"captionHiliteColorIndex",e)}onCaptionHilitesGroupSelected(e){var i;this.setSettingProp(this.settings,"captionHilitesEnabled",e===Kt);const r=((i=this.settings)==null?void 0:i.captionHilitesEnabled)===!0;this.captionHiliteColorRadioGroup.enabled=r,this.captionHiliteColorRadioGroup.shouldUseDisabledStates(!r)}onCaptionsGroupSelected(e){const r=e===Kt;this.setSettingProp(this.settings,"captionsEnabled",r),this.updateCaptionHilitesRadioGroupEnabledState(),this.updateCaptionHiliteColorRadioGroupEnabledState(),r||(this.updateRadioGroup(this.captionHilitesRadioGroup,!1),this.setSettingProp(this.settings,"captionHilitesEnabled",!1))}onHelpfulTipsGroupSelected(e){this.setSettingProp(this.settings,"helpfulTipsEnabled",e===Kt)}updateCaptionHiliteColorRadioGroupEnabledState(){const e=this.settings!==void 0&&this.settings.captionsEnabled&&this.settings.captionHilitesEnabled;this.captionHiliteColorRadioGroup.enabled=e,this.captionHiliteColorRadioGroup.shouldUseDisabledStates(!e)}updateCaptionHilitesRadioGroupEnabledState(){var r;const e=((r=this.settings)==null?void 0:r.captionsEnabled)===!0;return this.captionHilitesRadioGroup.enabled=e,this.captionHilitesRadioGroup.shouldUseDisabledStates(!e),this}updateHiliteColorRadioGroup(){var e;return((e=this.settings)==null?void 0:e.captionHiliteColorIndex)!==void 0&&this.captionHiliteColorRadioGroup.setButtonOn(this.settings.captionHiliteColorIndex),this.updateCaptionHiliteColorRadioGroupEnabledState(),this}updateRadioGroup(e,r){const i=r?Kt:ha;return e.setButtonOn(i),this}}const an={EXIT:"exit",SAVE:"save"};class Qd extends Ut{constructor(e,r){super(e,r);a(this,"audioSubPanel");a(this,"devicesSubPanel");a(this,"storybookSubPanel");a(this,"_settingsData");this.audioSubPanel=new Wd(this,r.lib),this.devicesSubPanel=new ca(this,r.lib),this.storybookSubPanel=new Kd(this,r.lib),this.initButton("saveButtonDisplay",this.onSavePressed),this.initButton("exitButtonDisplay",this.onExitPressed),this._settingsData=R(D.Settings)}get settingsData(){return this._settingsData}set settingsData(e){this._settingsData=e,this.audioSubPanel.setSettings(this._settingsData.audio),this.devicesSubPanel.setSettings(this._settingsData.device),this.storybookSubPanel.setSettings(this._settingsData.storybook)}present(e){return this.settingsData=e,this.visible=!0,this}resetModifiedFlags(){return this.audioSubPanel.areSettingsDirty=!1,this.devicesSubPanel.areSettingsDirty=!1,this.storybookSubPanel.areSettingsDirty=!1,this}unpresent(){return this.visible=!1,this}async onClosePressed(){await this.shouldConitnueWithUnsavedChanges()&&this.emit(ot.CLOSE,this)}onInit(){super.onInit(this.engine.lib.animateClasses.CloseXButtonHitBoxDisplay)}areSettingsDirty(){return this.audioSubPanel.areSettingsDirty||this.devicesSubPanel.areSettingsDirty||this.storybookSubPanel.areSettingsDirty}async shouldConitnueWithUnsavedChanges(){return this.areSettingsDirty()?await this.engine.createMessagePanel(`You have unsaved changes.
Continue to close settings?`,this.engine.lib.animateClasses.MessagePanelYNDisplay)===it.Yes:!0}async onExitPressed(){await this.shouldConitnueWithUnsavedChanges()&&this.emit(an.EXIT,this)}onSavePressed(){this.emit(an.SAVE,this)}}const oe={IsFromNav:"isFromNav",IsFromUi:"isFromUi"};class Yd extends Z{constructor(e,r){super();a(this,"engine");a(this,"timelineStartFrame");a(this,"contentVideoBitmap");a(this,"buffer");a(this,"_videoElement");this.engine=e,this.timelineStartFrame=0,this._videoElement=r,r&&this.init(r)}dispose(){var e,r;this.removeAllListeners(),this.stop(),(r=(e=this.contentVideoBitmap)==null?void 0:e.parent)==null||r.removeChild(this.contentVideoBitmap),this.contentVideoBitmap=void 0}init(e){var i;return this.contentVideoBitmap?this:((i=this.engine.config)!=null&&i.shouldUseVideoBuffer&&(this.buffer=new createjs.VideoBuffer(e)),this.contentVideoBitmap=new createjs.Bitmap(this.buffer||e),this.contentVideoBitmap.visible=!1,(this.engine.videoContainer||this.engine.exportRoot.display).addChildAt(this.contentVideoBitmap,0),this)}async play(){if(!this._videoElement||this._videoElement.ended)return!1;try{await this._videoElement.play()}catch(e){return console.warn(e),!1}return!0}seekTo(e){return this._videoElement&&(this._videoElement.currentTime=e),this}seekToFrame(e){if(!this._videoElement)return this;const i=Math.max(0,e-this.timelineStartFrame)/this.engine.config.videoFps;return this.seekTo(i)}setVisible(e){return this.contentVideoBitmap&&(this.contentVideoBitmap.visible=e),this}stop(){var e;return(e=this._videoElement)==null||e.pause(),this}get videoElement(){return this._videoElement}}const Xd={VIDEO_LOAD_COMPLETE:"videoLoadComplete"};class Jd{constructor(n){a(this,"engine");this.engine=n}convertTimelineFrameToVideoTime(n){return Math.max(0,this.resolveTimelineFrame(n)-this.startTimelineFrame)/this.engine.config.videoFps}resolveTimelineFrame(n){return typeof n=="number"?n:this.exportRoot.timeline.resolve(n)??0}resolveVideoTime(n){n||(n={timelineFrame:0,videoFrame:0,videoTimeSecs:0});const{contentVideoElement:e}=this;return e&&(n.timelineFrame=this.exportRoot.currentFrame-this.startTimelineFrame,n.videoTimeSecs=e.currentTime,n.videoFrame=Math.ceil(n.videoTimeSecs*this.engine.config.videoFps)),n}get contentVideoElement(){return this.engine.contentVideoElement}get exportRoot(){return this.engine.exportRoot}get startTimelineFrame(){return this.engine.startTimelineFrame}}function Zd(t){return F(t)&&("action"in t||"callback"in t||"frame"in t)}const Nr={Play:"play",Stop:"stop"},{ContentVideoId:pa}=x;class tf extends Z{constructor(e){super();a(this,"engine");a(this,"pauseConfig");a(this,"videoMath");a(this,"contentVideoLastTime");a(this,"contentVideo");a(this,"videoTimeProps");this.engine=e,this.pauseConfig={isFromNav:!1,isFromUi:!1},this.contentVideoLastTime=-1,this.videoMath=new Jd(e)}get videoElement(){var e;return(e=this.contentVideo)==null?void 0:e.videoElement}dispose(){this.contentVideo?(this.contentVideo.dispose(),this.contentVideo=void 0):this.exportRoot.stop()}loadContentVideo(e){if(this.contentVideo)return this;const r=new createjs.LoadQueue;return r.on(v.FILE_LOAD,i=>{const s=i;s.item.id===pa&&this.setContentVideo(s.result)},this),r.on(v.COMPLETE,()=>{r.destroy(),this.emit(Xd.VIDEO_LOAD_COMPLETE,this)},this,!0),r.loadFile({id:pa,src:e,type:"video"},!0),this}navTo(e,r){const i=r[e];if(i===void 0){this.resume(oe.IsFromNav);return}let s;if(Zd(i)?s=i:s={action:Nr.Play,frame:i},s.callback!==void 0){s.callback.call(s.context);return}const o=s.frame;if(o===void 0){this.resume(oe.IsFromNav);return}const l=this.exportRoot.timeline.resolve(o);this.contentVideo&&s.action?this.navToJumpVideo(l,s.action):this.navToJumpRoot(l,s)}pause(e){return this.pauseTarget(e),this}resume(e,r,i){return this.resumeTarget(e,r,i),this}setContentVideo(e){return this.contentVideo?(console.info("A content video has already been set."),this):(this.contentVideo=new Yd(this.engine,e),this)}start(e){var i;const r=e??this.startTimelineFrame;return(i=this.contentVideo)!=null&&i.videoElement?this.startWithVideo(r):this.startWithTimeline(r),this.engine.updateFromSettings(),this}update(){var e;(e=this.contentVideo)!=null&&e.videoElement&&(this.videoTimeProps=this.videoMath.resolveVideoTime(this.videoTimeProps))}get exportRoot(){return this.engine.exportRoot}navToJumpRoot(e,r){console.log("navToJumpRoot:",e,this.exportRoot.currentFrame,"param:",r),r.action===Nr.Play?this.resume(oe.IsFromNav,e,r.endFrame):this.exportRoot.stop(e)}navToJumpVideo(e,r){var i,s;this.exportRoot.stop(e),r===Nr.Play?(i=this.contentVideo)!=null&&i.videoElement&&(this.contentVideo.seekToFrame(e),this.contentVideoLastTime=this.contentVideo.videoElement.currentTime,this.resume(oe.IsFromNav)):(s=this.contentVideo)!=null&&s.videoElement&&(this.contentVideo.seekToFrame(e),this.contentVideoLastTime=this.contentVideo.videoElement.currentTime)}pauseTarget(e){this.pauseConfig[e]=!0,this.contentVideo?this.contentVideo.stop():(console.log("pause target",this.exportRoot.currentFrame,this.exportRoot.display.currentLabel),this.exportRoot.stop())}async resumeTarget(e,r,i){this.pauseConfig[e]=!1,!(this.pauseConfig.isFromNav||this.pauseConfig.isFromUi)&&(this.contentVideo?(r!==void 0&&this.exportRoot.stop(r),this.contentVideo.play()):(console.log("resume target",this.exportRoot.currentFrame,this.exportRoot.display.currentLabel,r!==void 0?`starting from: ${r}`:""),r!==void 0?i!==void 0?this.exportRoot.playTo(i,r):this.exportRoot.play(r):this.exportRoot.play()))}get startTimelineFrame(){return this.engine.startTimelineFrame}startWithTimeline(e){const{config:r}=this.engine;r.startCallback&&r.startCallback.call(r.startCallbackContext)}startWithVideo(e){var r;(r=this.contentVideo)!=null&&r.videoElement&&(this.exportRoot.stop(e),this.contentVideo.videoElement.currentTime=this.videoMath.convertTimelineFrameToVideoTime(e),this.contentVideo.play(),this.contentVideo.setVisible(!0))}}function ln(t){const n=window.location.search;return new URLSearchParams(n).get(t)}const un={ContentVideo:"contentVideo",DeleteProgress:"deleteProgress",ExitRedirect:"exitRedirect",StorybookId:"storybookId"};function da(){const t=Object.keys(AdobeAn.compositions)[0];return t?AdobeAn.compositions[t]:void 0}function ef(t){return t??(t=da()),t==null?void 0:t.getLibrary()}let O;function nf(t){const n=t??[];return["canvas","_preload_div_","animation_container","dom_overlay_container"].forEach((e,r)=>{n[r]||(n[r]=document.getElementById(e))}),n}function fa(){const t=ef();if(!t)return;const n=t.properties.width,e=t.properties.height,r=window.innerWidth,i=window.innerHeight,s=window.devicePixelRatio||1,o=r/n,l=i/e;let u=1;O.isResp&&(O.respDim==="width"&&O.lastW===r||O.respDim==="height"&&O.lastH===i?u=O.lastS:O.isScale?O.scaleType===1?u=Math.min(o,l):O.scaleType===2&&(u=Math.max(o,l)):(r<n||i<e)&&(u=Math.min(o,l)));const{domContainers:c}=O;c.forEach((h,p)=>{h&&(p===0&&h instanceof HTMLCanvasElement?(h.width=n*s*u,h.height=e*s*u):(h.style.width=`${n*u}px`,h.style.height=`${e*u}px`))}),O.lastW=r,O.lastH=i,O.lastS=u,stage&&(stage.scaleX=s*u,stage.scaleY=s*u,stage.tickOnUpdate=!1,stage.update(),stage.tickOnUpdate=!0)}function rf(t=!0,n="both",e=!1,r=1){O={domContainers:nf(),isResp:t,respDim:n,isScale:e,scaleType:r,lastH:0,lastS:1,lastW:0},window.addEventListener(Tr.Resize,fa),fa()}function sf(t){const n=ln(un.ContentVideo);n&&t.loadFile({id:x.ContentVideoId,src:n,type:"video"})}function of(t){const n=document.getElementById(x.HtmlElementIds.ProgressBarFill);if(n){const e=Math.round((1-V(t,0,1))*100);n.style.right=`${e}%`}}function af(){canvas=document.getElementById(x.HtmlElementIds.Canvas),anim_container=document.getElementById(x.HtmlElementIds.AnimationContainer),dom_overlay_container=document.getElementById(x.HtmlElementIds.DomOverlayContainer);const t=da();if(!t){console.warn("no compoision library found");return}const n=t.getLibrary(),e=new createjs.LoadQueue(!1);e.installPlugin(createjs.Sound),e.addEventListener(v.PROGRESS,r=>{of(r.progress)}),e.addEventListener(v.FILE_LOAD,r=>{const i=r;i.item.id===x.ContentVideoId?n.contentVideo=i.result:handleFileLoad(r,t)}),e.addEventListener(v.COMPLETE,r=>{handleComplete(r,t),e.destroy()}),e.loadManifest(n.properties.manifest),sf(e),rf()}function Fr(t,n,e=!1){return rn(t,n,e)??e}function lf(t){const n=t??{};return n.defaultCorrectSoundKey=Et(t,"defaultCorrectSoundKey"),n.defaultInorrectSoundKey=Et(t,"defaultInorrectSoundKey"),n}const X=D.EngineConfig;function uf(t){return Et(t,"storybookId")||(ln(un.StorybookId)??"")}function cf(t,n){const e=rt(t,"videoFps",n==null?void 0:n.header.properties.fps);return e>0?e:X.videoFps}function hf(t,n,e){return e??(e={}),e.buttonsMenu=lf(t==null?void 0:t.buttonsMenu),e.contentVideoUrl=Et(t,"contentVideoUrl",X.contentVideoUrl),e.exitRedirectUrl=Et(t,"exitRedirectUrl",X.exitRedirectUrl),e.navButtonsSoundKey=Et(t,"navButtonsSoundKey",X.navButtonsSoundKey),e.pressIndicatorDelay=rt(t,"pressIndicatorDelay",X.pressIndicatorDelay),e.sceneHandler=rn(t,"sceneHandler",X.sceneHandler),e.shouldUseVideoBuffer=Fr(t,"shouldUseVideoBuffer",X.shouldUseVideoBuffer),e.shouldWaitForNavSounds=Fr(t,"shouldWaitForNavSounds",X.shouldWaitForNavSounds),e.singleDeviceDelayMs=rt(t,"singleDeviceDelayMs",X.singleDeviceDelayMs),e.startCallback=(t==null?void 0:t.startCallback)??X.startCallback,e.startCallbackContext=(t==null?void 0:t.startCallbackContext)??X.startCallbackContext,e.storybookId=uf(t),e.videoFps=cf(t,n),e}function pf(t){return(t&1)===0}function df(t){return!pf(t)}function ff(t){const n=t??{};return n.numShakes=rt(n,"numShakes",8),n.shouldUseTicks=Fr(n,"shouldUseTicks",!0),n.tiltIntensityInDegrees=rt(n,"tiltIntensityInDegrees",2),n.tremorIntensity=rt(n,"tremorIntensity",5),n.waitDuration=rt(n,"waitDuration",n.shouldUseTicks?1:25),n}function yf(t,n){const e=t instanceof Dt?t.display:t,r=ff(n),i=createjs.Tween.get(e,{useTicks:r.shouldUseTicks}),s={rotation:e.rotation,x:e.x,y:e.y};for(let o=0;o<r.numShakes;o+=1){o>0&&i.wait(r.waitDuration);const l=df(o)?-1:1;i.to({rotation:s.rotation+r.tiltIntensityInDegrees*l,x:s.x+Math.random()*(r.tremorIntensity*l),y:s.y+Math.random()*(r.tremorIntensity*l)})}i.wait(r.waitDuration).to({rotation:s.rotation,x:s.x,y:s.y})}function gf(t){const n=t??{};return{callback:n.callback,callbackContext:n.callbackContext,incorrectConfig:n.incorrectConfig,isCorrect:n.isCorrect,isDisabled:n.isDisabled,isHidden:n.isHidden}}const Rr={OPTION_SELECTED:"optionSelected"};class cn extends Z{constructor(e){super();a(this,"quizData");a(this,"buttonsByConfig");a(this,"buttonsOrder");a(this,"engine");a(this,"inputDeviceHandler");a(this,"selectedButtonIndex");a(this,"config");this.engine=e,this.buttonsByConfig=new Map,this.buttonsOrder=[],this.inputDeviceHandler=this.initInputDeviceHandler(),this.selectedButtonIndex=-1}dispose(){super.removeAllListeners(),this.uninitResources()}resolveConfigs(e){const r=e.buttons??{},i={buttons:r,buttonsContainer:e.buttonsContainer,correctSoundKey:e.correctSoundKey,defaultButtonName:e.defaultButtonName,incorrectSoundKey:e.incorrectSoundKey,isQuiz:e.isQuiz,shouldCloseMenu:e.shouldCloseMenu??!0};return this.config=i,{buttonConfigsByName:r,thisConfig:i}}start(e){const r=this.resolveConfigs(e);return this.initButtonsFromConfigs(r),this.inputDeviceHandler.isEnabled=this.inputDeviceHandler.isSingleSwitchEnabled()||this.inputDeviceHandler.isDualSwitchEnabled(),this.initDefaultSelectedButton(r.thisConfig),this.quizData=r.thisConfig.isQuiz?{numAttempts:0,totalSelection:Object.keys(r.buttonConfigsByName).length,percentageCorrect:0}:void 0,this}updateFromSettings(){this.inputDeviceHandler.setEnabled(this.inputDeviceHandler.isSingleSwitchEnabled()||this.inputDeviceHandler.isDualSwitchEnabled()).updateFromSettings()}confirmSelectedButton(){const{selectedButton:e}=this;e&&this.onButtonPressed(e)}disposeButtons(){this.buttonsByConfig.forEach(e=>{e.dispose()}),this.buttonsByConfig.clear(),this.buttonsOrder.length=0}getDefaultSelectedButtonIndex(e){let r;const i=e.defaultButtonName;return e.defaultButtonName?(r=this.buttonsOrder.findIndex(s=>s.name===i),r===-1&&console.warn(`no default menu button found with name: ${i}`)):r=0,r}static HandleButtonCallback(e,r){r.callback!==void 0&&r.callback.call(r.callbackContext,e.name)}handleIfCorrectButton(e,r){var i;return r.isCorrect!==!0?!1:(this.playSound((i=this.config)==null?void 0:i.correctSoundKey),this.updateQuizPerformance(r.isCorrect),this.emit(Rr.OPTION_SELECTED,e.name,r.isCorrect,this),!0)}handleIfIncorrectButton(e,r){var i;return r.isCorrect!==!1?!1:(this.playSound((i=this.config)==null?void 0:i.incorrectSoundKey),yf(e,r.incorrectConfig),this.updateQuizPerformance(r.isCorrect),this.emit(Rr.OPTION_SELECTED,e.name,r.isCorrect,this),!0)}initButtonsFromConfigs(e){const r=e.thisConfig.buttonsContainer||this.engine.exportRoot.display,i=e.buttonConfigsByName??{};Object.keys(i).forEach(o=>{const l=vt(r,o,this.onButtonPressed,void 0,this);if(l){const u=gf(i[o]);i[o]=u,this.buttonsByConfig.set(u,l),this.buttonsOrder.push(l),l.enabled=u.isDisabled!==!0,l.visible=u.isHidden!==!0}else console.warn("no menu button found with name:",o,"on container:",r),r instanceof createjs.MovieClip&&console.warn("affected frame:",r.currentFrame)})}initDefaultSelectedButton(e){if(this.inputDeviceHandler.isEnabled){const r=this.getDefaultSelectedButtonIndex(e);this.selectButtonAt(r)}}initInputDeviceHandler(){return new ea(this.engine).on(Pt.NEXT,this.onInputDeviceNext,this).on(Pt.SELECT,this.onInputDeviceSelect,this)}onButtonPressed(e){var s,o;const r=e,i=(s=this.config)!=null&&s.buttons?this.config.buttons[r.name]:void 0;if(!F(i)){console.warn("no menu button config found for menu button with name:",r.name);return}if(this.handleIfIncorrectButton(r,i)){cn.HandleButtonCallback(r,i);return}this.handleIfCorrectButton(r,i),(o=this.config)!=null&&o.shouldCloseMenu&&this.engine.unpresentMenu(),cn.HandleButtonCallback(r,i)}onInputDeviceNext(){this.selectNextButton()}onInputDeviceSelect(){this.confirmSelectedButton()}playSound(e){e&&this.engine.playSound(e)}selectButtonAt(e){const r=this.selectedButton,i=this.buttonsOrder[e];r!==i&&(this.selectedButtonIndex=e,r==null||r.setSelected(!1),i==null||i.setSelected(!0))}get selectedButton(){return this.buttonsOrder[this.selectedButtonIndex]}selectNextButton(){this.buttonsOrder.length>0&&this.selectButtonAt((this.selectedButtonIndex+1)%this.buttonsOrder.length)}uninitResources(){this.inputDeviceHandler.dispose(),this.disposeButtons(),this.config=void 0}updateQuizPerformance(e){this.quizData&&(this.quizData.numAttempts+=1,e&&(this.quizData.percentageCorrect=1/this.quizData.numAttempts))}}function _f(t){return F(t)&&("defaultSelectedNavButtonId"in t||"navButtonsToHide"in t||"params"in t)}function bf(t){return F(t)&&Object.keys(t).every(n=>Xe(n,Tl))}function vf(t){let n;return _f(t)?n=t:bf(t)?n={params:t}:n={},n.defaultSelectedNavButtonId??(n.defaultSelectedNavButtonId=D.SelectedNavButtonId),n}const Vr={};function mf(t){const n=t.lastIndexOf(".");return n===-1?t:t.substring(0,n)}function Sf(t){const n=t.lastIndexOf("/");return n===-1?t:t.substring(n+1)}function ya(t){let n=mf(t);return n=Sf(n),n=n.replace(/[^a-zA-Z0-9_]/g,""),/^\d/.test(n)&&(n=`_${n}`),n}function wf(t){if(typeof t=="string")return ya(t);const n=[];return t.forEach(e=>{n.push(ya(e))}),n}function Bf(t){switch(typeof t){case"boolean":return t?-1:0;case"number":return t;default:return 0}}function Hr(t,n=1,e=!1,r=void 0,i=void 0){let s;typeof t=="string"?s={audioId:t,callbackContext:i,completeCallback:r,loop:e,volume:n}:s=t;const o=wf(s.audioId),l=createjs.Sound.play(o);if(l.playState===createjs.Sound.PLAY_FAILED){console.warn(`failed to play sound: ${s.audioId}. resolved audio id: ${o}`),l.destroy();return}return s.completeCallback&&new tn(l).once(v.COMPLETE,s.completeCallback,s.callbackContext),l.loop=Bf(s.loop),l.volume=s.volume??1,l}function ae(t){if(t.currentIndex>=t.soundIds.length){t.resolve();return}const n=t.soundIds[t.currentIndex];if(!n){t.currentIndex+=1,ae(t);return}const e=Hr(n,t.volume);if(!e){t.currentIndex+=1,ae(t);return}e.on(v.COMPLETE,()=>{t.currentIndex+=1,ae(t)},void 0,!0),e.on(v.ERROR,()=>{console.warn("failed to play sound:",e),t.currentIndex+=1,ae(t)})}function Cf(t,n){return new Promise(e=>{const r={currentIndex:0,resolve:e,soundIds:Array.isArray(t)?[...t]:[t],volume:n};ae(r)})}function kf(t){return Je(t)&&t>=0}function ga(t){return t instanceof createjs.MovieClip}function Df(t){return Je(t)&&t>0}class Pf{constructor(n,e){a(this,"indicator");a(this,"timer");this.indicator=n,Df(e)&&this.start(e)}start(n){return this.hide(),this.startTimer(n),this}stop(){return this.hide(),this.stopTimer(),this}hide(){this.indicator.visible=!1,ga(this.indicator)&&this.indicator.stop()}show(){this.indicator.visible=!0,ga(this.indicator)&&this.indicator.gotoAndPlay(0)}startTimer(n){this.stopTimer(),this.timer=mt.Create({callback:()=>{this.show()},delayMs:n})}stopTimer(){var n;(n=this.timer)==null||n.stop(),this.timer=void 0}}const vn=class vn{constructor(n){a(this,"engine");a(this,"indicator");this.engine=n}start(n=void 0,e=void 0,r=vn.DEFAULT_NAME){const i=St(e??this.engine.exportRoot.display,r);if(!i){console.warn(`no display object found with name: ${r}`);return}if(this.indicator=new Pf(i),this.engine.userSettingsData.device.inputDevice!==tt.TapMouse){this.indicator.stop();return}this.indicator.start(n??this.engine.config.pressIndicatorDelay),this.engine.exportRoot.display.on(v.MOUSE_DOWN,()=>{this.indicator&&(this.indicator.stop(),this.indicator=void 0)},this,!0)}stop(){var n;(n=this.indicator)==null||n.stop(),this.indicator=void 0}updateBgmFromSettings(){this.engine.userSettingsData.device.inputDevice!==tt.TapMouse&&this.stop()}};a(vn,"DEFAULT_NAME","pressIndicatorDisplay");let zr=vn;async function Ef(t,n,e){return new Promise(r=>{var i;Tt.Create(t.exportRoot.stage,n,t.lib.animateClasses.MessagePanelCloseDisplay,{autoClose:!0}),e?(i=Wt.Get())==null||i.once(xr.CLOSE,()=>{r()}):r()})}async function Tf(t,n,e){return new Promise(r=>{let i,s=!1;const o=n.writeToLocalStorage();if(o?(i=e==null?void 0:e.successMessage,s=!0):(console.warn("unable to write settings to local storage"),i=e==null?void 0:e.failMessage),i){(async()=>(await Ef(t,i,s),r(o)))();return}r(o)})}function _a(){return{failMessage:"Unable to update settings.",successMessage:"Settings have been updated!"}}class If extends Ut{constructor(e,r){super(e,r);a(this,"subPanel");this.subPanel=new ca(this,r.lib),this.subPanel.setSettings(r.userSettingsData.device),this.subPanel.updateFromSettings()}present(){return this.visible=!0,this}unpresent(){return this.visible=!1,this}async onClosePressed(){this.subPanel.areSettingsDirty&&await this.engine.saveSettings(_a()),super.onClosePressed()}}function ba(t){return new Promise(n=>{mt.Create({delayMs:t,callback:()=>{n()}})})}const Mf={PlayIntroSound:"play_intro_sound"};class xf extends Ut{constructor(e,r){super(e,r);a(this,"scene");a(this,"isSoundResolved");a(this,"isSceneResolved");a(this,"soundInstance");this.scene=new Ir(r,e),this.scene.addFrameCallback(Mf.PlayIntroSound,this.onPlayIntroSound,this),this.scene.addFrameCallback(this.scene.totalFrames-1,this.onComplete,this),this.isSceneResolved=!1,this.isSoundResolved=!1}dispose(){this.stopSound(),this.isSceneResolved=!1,this.isSoundResolved=!1,this.scene.dispose(),super.dispose()}present(){return this.stopSound(),this.isSceneResolved=!1,this.isSoundResolved=!1,this.scene.playTo(this.scene.totalFrames-1,0),this.visible=!0,this}async continueIfAllAreResolved(){this.isSceneResolved&&this.isSoundResolved&&(await ba(x.IntroCompleteWaitDelayMs),this.emit(ot.CLOSE,this))}onPlayIntroSound(){this.soundInstance=this.engine.playSound({audioId:this.engine.lib.audioIds.Logo,completeCallback:()=>{this.resolveSound()}}),this.soundInstance||this.resolveSound()}onComplete(){this.resolveScene()}resolveScene(){this.isSceneResolved=!0,this.continueIfAllAreResolved()}resolveSound(){this.isSoundResolved=!0,this.continueIfAllAreResolved()}stopSound(){var e;(e=this.soundInstance)==null||e.destroy(),this.soundInstance=void 0}}/*! js-cookie v3.0.5 | MIT */function hn(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)t[r]=e[r]}return t}var Lf={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function jr(t,n){function e(i,s,o){if(!(typeof document>"u")){o=hn({},n,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,o[u]!==!0&&(l+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+l}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},l=0;l<s.length;l++){var u=s[l].split("="),c=u.slice(1).join("=");try{var h=decodeURIComponent(u[0]);if(o[h]=t.read(c,h),i===h)break}catch{}}return i?o[i]:o}}return Object.create({set:e,get:r,remove:function(i,s){e(i,"",hn({},s,{expires:-1}))},withAttributes:function(i){return jr(this.converter,hn({},this.attributes,i))},withConverter:function(i){return jr(hn({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}var Ur=jr(Lf,{path:"/"});class Gr{constructor(n){a(this,"engine");a(this,"_quizzes");a(this,"sessionStartTime");a(this,"sessionDurationMs");a(this,"sbCookies");this.engine=n,this._quizzes=[],this.sessionStartTime=0,this.sessionDurationMs=0}addQuizData(n){this._quizzes.push(R(n))}get quizzes(){return wn(this._quizzes)}removeAllQuizzes(){this._quizzes.length=0}start(){this.sessionStartTime=Date.now(),this.sessionDurationMs=0}stop(){if(this.sessionStartTime===0)return;const n=Date.now();this.sessionDurationMs=Math.max(0,n-this.sessionStartTime),this.sessionStartTime=0}submit(){if(this.stop(),this.sessionDurationMs===0){console.warn("no session is currently being recorded. first start a session with the start method");return}this.sbCookies||(this.sbCookies=(Ur.noConflict?Ur.noConflict():Ur).withConverter({read:i=>i,write:i=>i.replace(/%25/g,"%")}));const n=this.calculateTotalTimeMin();this.sbCookies.set("Totaltime",n.toString(10));const e=this.calculateTotalSelection();this.sbCookies.set("TotalSelection",e.toString(10));const r=this.calculatePercentageCorrect();this.sbCookies.set("Percentage_correct",Gr.FormatPercentage(r)),console.info("total time (mins):",n),console.info("total selectionm:",e),console.info("average percentage correct:",r)}calculatePercentageCorrect(){return this._quizzes.length===0?0:this._quizzes.reduce((r,i)=>r+i.percentageCorrect,0)/this._quizzes.length}calculateTotalSelection(){return this._quizzes.reduce((n,e)=>n+e.totalSelection,0)}calculateTotalTimeMin(){return this.sessionDurationMs/1e3/60}static FormatPercentage(n){return`${(n*100).toFixed(2)}%`}}const J={DevicesPanel:"devicesPanelDisplay",MainPanel:"mainPanelDisplay",PasscodePanel:"passcodePanelDisplay",SettingsPanel:"settingsPanelDisplay",TiggieIntro:"tiggieIntroDisplay",VideoContainer:"videoContainer"};class pn extends Z{constructor(e,r){super();a(this,"exportRoot");a(this,"lib");a(this,"contentHandler");a(this,"startTimelineFrame");a(this,"userPerformanceData");a(this,"contextLayers");a(this,"userSettings");a(this,"engineConfig");a(this,"pressIndicatorMgr");a(this,"mainPanel");a(this,"passcodePanel");a(this,"settingsPanel");a(this,"devicesPanel");a(this,"buttonsMenu");a(this,"tiggieIntro");a(this,"sceneHandler");a(this,"navParams");a(this,"bgmSoundInstance");a(this,"previousSettingsData");this.exportRoot=new Ir(this,e),this.lib={animateClasses:r,audioIds:Dl,header:r},this.exportRoot.display.framerate=this.lib.header.properties.fps,this.engineConfig=R(D.EngineConfig),this.userSettings=new Sd,this.startTimelineFrame=this.getStartTimelineFrame(),this.contextLayers=new kd(this),this.contentHandler=new tf(this),this.pressIndicatorMgr=new zr(this),this.userPerformanceData=new Gr(this),this.initMainPanel().initPasscodePanel().initSettingsPanel().initDevicesPanel().initTiggieIntro(),createjs.Ticker.on(v.TICK,()=>{this.exportRoot.stop(Ci.SbInit)},this,!0)}get config(){return this.engineConfig}get contentVideoElement(){return this.contentHandler.videoElement}createMessagePanel(e,r,i){return Tt.Create(this.exportRoot.stage,e,r,i)}async deleteProgress(e){if(e??(e=this.config.storybookId),!e)return console.warn("no storybook id specified"),!1;const{storybooksStates:r}=this.userSettings.data;return e in r?(delete r[e],await this.saveSettings()?(console.info(`progress deleted for storybook id "${e}"`),!0):!1):!0}dispose(){var e,r,i,s;super.removeAllListeners(),(e=this.buttonsMenu)==null||e.dispose(),this.buttonsMenu=void 0,this.contentHandler.dispose(),(r=this.mainPanel)==null||r.dispose(),this.mainPanel=void 0,(i=this.passcodePanel)==null||i.dispose(),this.passcodePanel=void 0,(s=this.settingsPanel)==null||s.dispose(),this.settingsPanel=void 0}init(e){return hf(e,this.lib,this.engineConfig),console.info("Storybook engine config: %o",this.engineConfig),this.initSceneHandler(),this.engineConfig.storybookId&&this.deleteProgressUsingQueryParam(this.engineConfig.storybookId),this.presentDevicesPanel(),this}static LogVersion(){const e=["background: blue","color: yellow","display: block"].join(";");console.info(`%cStorybookEngine v: ${x.Version}`,e)}playBgm(e,r){return e?(this.stopBgm(),r=this.userSettingsData.audio.bgm.isEnabled?this.resolveSettingsVolume(lt.Bgm,r):0,this.bgmSoundInstance=Hr(e,r,!0),!!this.bgmSoundInstance):!1}playSound(e,r=1,i=!1,s=void 0,o=void 0){if(!this.userSettingsData.audio.sound.isEnabled)return;const l=typeof e=="string"?{audioId:e,callbackContext:o,completeCallback:s,loop:i,volume:r}:e;if(l.audioId)return l.volume=this.resolveSettingsVolume(lt.Sound,l.volume),Hr(l)}playVoice(e,r){return r=this.resolveSettingsVolume(lt.Voice,r),Cf(e,r)}presentMenu(e){this.unpresentMenu(),this.buttonsMenu=new cn(this),this.buttonsMenu.on(Rr.OPTION_SELECTED,this.onButtonsMenuOptionPressed,this);const r=e??{};return this.config.buttonsMenu&&(r.correctSoundKey??(r.correctSoundKey=this.config.buttonsMenu.defaultCorrectSoundKey),r.incorrectSoundKey??(r.incorrectSoundKey=this.config.buttonsMenu.defaultInorrectSoundKey)),this.buttonsMenu.start(r),this}presentNav(e){var i;const r=vf(e);return this.navParams=r.params,(i=this.mainPanel)==null||i.presentNavUi(r),this}get progress(){var e,r;return((r=(e=this.mainPanel)==null?void 0:e.progressBar)==null?void 0:r.value)??0}set progress(e){var r;(r=this.mainPanel)!=null&&r.progressBar&&(this.mainPanel.progressBar.value=e)}resolveSettingsVolume(e,r){if(kf(r))return r;const i=this.userSettings.data.audio[e];return i!=null&&i.isEnabled?i.volume:0}async saveProgress(e,r){if(e??(e=this.config.storybookId),!e)return console.warn("no storybook id specified"),!1;if(r!==void 0){if(!this.exportRoot.isFrameValid(r))return console.warn(`invalid progress frame or label specified: ${r}`),!1}else r=this.exportRoot.currentFrame;const{storybooksStates:i}=this.userSettings.data;let s=i[e];return s||(s={},i[e]=s),s.progresFrameOrLabel=r,await this.saveSettings()&&console.info(`progress saved for storybook id "${e}" @: ${r}`),!1}async saveSettings(e){return Tf(this,this.userSettings,e)}static SbDocPrep(){af()}setBgmVolume(e){return this.bgmSoundInstance&&(this.bgmSoundInstance.volume=e),this}startPressIndicator(e,r,i){return this.pressIndicatorMgr.start(e,r,i),this}stopBgm(){var e;return(e=this.bgmSoundInstance)==null||e.destroy(),this.bgmSoundInstance=void 0,this}submitUserPerformanceData(){return this.userPerformanceData.submit(),this}unpresentMenu(){var e;return(e=this.buttonsMenu)==null||e.dispose(),this.buttonsMenu=void 0,this}updateFromSettings(){var e;return this.contextLayers.updateFromSettings(),(e=this.buttonsMenu)==null||e.updateFromSettings(),this.updateBgmFromSettings(),this.pressIndicatorMgr.updateBgmFromSettings(),this}get userSettingsData(){return this.userSettings.data}get videoContainer(){return nn(this.exportRoot.display,J.VideoContainer)}closeSettingsPanel(){var e,r;this.restorePreviousSettings(),(e=this.settingsPanel)==null||e.unpresent(),(r=this.mainPanel)==null||r.updateFromSettings(),this.updateFromSettings()}continueAftarTutorial(){this.updateFromSettings(),this.presentContent()}deleteProgressUsingQueryParam(e){ln(un.DeleteProgress)!==null&&this.deleteProgress(e)}static ExitRedirect(){const e=ln(un.ExitRedirect);window.location.replace(e||window.location.href)}getStartTimelineFrame(){const e=Vr.StartLabel?Vr.StartLabel:Ci.Start;let r;if(typeof e=="string"){const i=Sn(this.exportRoot.display).find(s=>s.label===e);r=(i==null?void 0:i.position)??this.exportRoot.currentFrame+1}else r=e;return console.info("start frame number:",r),r}async handleNavAction(e,r){var i;(i=this.mainPanel)==null||i.unpresentNavUi(),await this.playNavButtonSound(),r?this.contentHandler.navTo(e,r):this.contentHandler.resume(oe.IsFromNav)}initDevicesPanel(){const e=k(this.exportRoot.display,J.DevicesPanel);return e?(this.devicesPanel=new If(e,this).addListener(ot.CLOSE,this.onDevicesPanelClose,this).setVisible(!1),this):(console.warn("no devices panel found with name:",J.DevicesPanel),this)}initMainPanel(){var r;const e=k(this.exportRoot.display,J.MainPanel);return e?(this.mainPanel=new Rd(e,this).addListener(A.NEXT,this.onMainPanelNextPressed,this).addListener(A.PREV,this.onMainPanelPrevPressed,this).addListener(A.RESTART,this.onMainPanelRestartPressed,this).addListener(A.SETTINGS,this.onMainPanelSettingsPressed,this).setVisible(!0).unpresentNavUi(),(r=this.mainPanel.progressBar)==null||r.setVisible(!1),this):(console.warn("no main panel found with name:",J.MainPanel),this)}initPasscodePanel(){const e=k(this.exportRoot.display,J.PasscodePanel);return e?(this.passcodePanel=new Ud(e,this).addListener(ot.CLOSE,this.onPasscodePanelClose,this).addListener($r.SUBMIT,this.onPasscodePanelSubmit,this).setVisible(!1),this):(console.warn("no passcode panel found with name:",J.PasscodePanel),this)}initSceneHandler(){const e=this.config.sceneHandler;e&&(this.sceneHandler=new e(this))}initSettingsPanel(){const e=k(this.exportRoot.display,J.SettingsPanel);return e?(this.settingsPanel=new Qd(e,this).addListener(ot.CLOSE,this.onSettingsPanelClose,this).addListener(an.EXIT,this.onSettingsPanelExit,this).addListener(an.SAVE,this.onSettingsPanelSave,this).setVisible(!1),this):(console.warn("no settings panel found with name:",J.SettingsPanel),this)}initTiggieIntro(){const e=k(this.exportRoot.display,J.TiggieIntro);return e?(this.tiggieIntro=new xf(e,this).addListener(ot.CLOSE,this.onTiggieIntroClose,this).setVisible(!1),this):(console.warn("no tiggie intro display found with name:",J.TiggieIntro),this)}onButtonsMenuOptionPressed(e,r,i){r&&i.quizData&&(this.userPerformanceData.addQuizData(i.quizData),console.info("user performance data:",this.userPerformanceData))}onDevicesPanelClose(){this.devicesPanel&&(this.devicesPanel.unpresent().dispose(),this.devicesPanel=void 0),this.presentTutorial()||this.presentContent()}onMainPanelNextPressed(){this.handleNavAction($.Next,this.navParams)}onMainPanelPrevPressed(){this.handleNavAction($.Prev,this.navParams)}onMainPanelRestartPressed(){this.handleNavAction($.Restart,this.navParams)}onMainPanelSettingsPressed(){var e,r;(e=this.mainPanel)==null||e.setVisible(!1),x.AreSettingsProtected?(r=this.passcodePanel)==null||r.present():this.presentSettingsPanel()}onPasscodePanelClose(){var e,r;(e=this.passcodePanel)==null||e.unpresent(),(r=this.mainPanel)==null||r.setVisible(!0)}onPasscodePanelSubmit(e){var r,i,s;e?((r=this.mainPanel)==null||r.setVisible(!1),(i=this.passcodePanel)==null||i.setVisible(!1),this.presentSettingsPanel()):(s=this.passcodePanel)==null||s.clearAnswer()}onSettingsPanelClose(){this.closeSettingsPanel()}onSettingsPanelExit(){this.createMessagePanel("Are you sure you want to exit the activity?",this.lib.animateClasses.MessagePanelYNDisplay).then(e=>{e===it.Yes&&pn.ExitRedirect()})}async onSettingsPanelSave(e){this.userSettings.apply(e.settingsData),this.previousSettingsData=void 0,await this.saveSettings(_a()),this.closeSettingsPanel()}onTiggieIntroClose(){var e;(e=this.tiggieIntro)==null||e.dispose()}async playNavButtonSound(){return new Promise(e=>{this.config.shouldWaitForNavSounds?this.playSound({audioId:this.config.navButtonsSoundKey,completeCallback:()=>{e()}})||e():(this.playSound(this.config.navButtonsSoundKey),e())})}presentContent(){const{storybookId:e}=this.engineConfig,r=e?this.userSettings.data.storybooksStates[e]:void 0;(r==null?void 0:r.progresFrameOrLabel)===void 0?(this.presentContent2(),this.contentHandler.start()):this.createMessagePanel("Would you like to resume form where you left off?",this.lib.animateClasses.MessagePanelYNDisplay,{buttonLabels:{[it.Yes]:"Yes, Resume",[it.No]:"No, Restart"}}).then(i=>{let s;i===it.Yes?(s=r.progresFrameOrLabel,typeof s=="number"&&(s+=1)):(e&&this.deleteProgress(e),s=0),this.presentContent2(s)})}presentContent2(e){!Vr.ShouldSkipIntro&&this.tiggieIntro?(this.tiggieIntro.present(),this.tiggieIntro.once(ot.CLOSE,()=>{var r;(r=this.tiggieIntro)==null||r.dispose(),this.tiggieIntro=void 0,this.presentContent3(e)})):this.presentContent3(e)}presentContent3(e){this.mainPanel&&(this.mainPanel.settingsButtonVisible=!0),this.contentHandler.start(e),this.contextLayers.start(),this.startSceneHandler(),this.userPerformanceData.start()}presentDevicesPanel(){this.devicesPanel?(this.mainPanel&&(this.mainPanel.settingsButtonVisible=!1),this.devicesPanel.present()):this.presentTutorial()||this.presentContent()}presentSettingsPanel(){var e;this.previousSettingsData=R(this.userSettings.data),(e=this.settingsPanel)==null||e.present(this.userSettings.data)}presentTutorial(){return!this.mainPanel||!this.shouldShowTutorial()||!this.mainPanel.presentTutorial()?!1:(this.mainPanel.once(A.TUTORIAL_COMPLETE,async e=>{var r;e&&(this.userSettings.data.hasCompletedTutorial=!0,await this.saveSettings()),(r=this.mainPanel)==null||r.unpresentTutorial(),this.continueAftarTutorial()}),!0)}restorePreviousSettings(){this.previousSettingsData&&(this.userSettings.apply(this.previousSettingsData),this.previousSettingsData=void 0)}shouldShowTutorial(){return!this.userSettingsData.hasCompletedTutorial}startSceneHandler(){var e;(e=this.sceneHandler)==null||e.run()}updateBgmFromSettings(){this.bgmSoundInstance&&(this.bgmSoundInstance.volume=this.userSettingsData.audio.bgm.isEnabled?this.userSettings.data.audio.bgm.volume:0)}}class $f{constructor(n){a(this,"engine");this.engine=n}get exportRoot(){return this.engine.exportRoot}}function va(t,n,e){const r=n.shift();r?(e.stop(r.frameOrLabel),e.playVoices(r.soundId).then(()=>{va(t,n,e)})):t()}function w(t,n){const e=[...t];return new Promise(r=>{va(r,e,n)})}const Af="speakerButtonDisplay";let Wr,le,qr;function Of(){qr&&Wr&&qr.playVoices(Wr)}function y(t,n,e,r=Af){if(le&&le.dispose(),le=vt(t.display,r,Of),!le){console.warn("unable to create speaker button for display with name:",r);return}qr=t,le.enabled=n,e&&(Wr=e)}function Nf(t){t.stop("boy_complete"),t.engine.submitUserPerformanceData()}async function Ff(t){await t.playSyncVoice("SBL-0001_Parents-you-may-want-to-ask-t_48.0k_stereo.mp3","boy_outro_tips_voc_begin","boy_outro_tips_voc_end"),t.engine.presentNav({next:{callback:()=>{Nf(t)}},prev:{callback:()=>{Kr(t)}},restart:{callback:()=>{ht(t)}}})}function Rf(t){t.playTo("boy_outro_tips_end","boy_outro_tips_begin",()=>{Ff(t)})}const Vf=6,Hf=[1,0,2,4,5,3];let ct,dn;function ma(t){return`boyHelpWearClothesMenuButton${t}Display`}function zf(){if(!ct){console.warn("no scene defined");return}const t=ct;t.playTo("boy_help_wear_clothes_quiz_correct_end","boy_help_wear_clothes_quiz_correct_start",()=>{t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_well_done_start","boy_well_done_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Rf(t)}},prev:{callback:()=>{Kr(t)}},restart:{callback:()=>{ht(t)}}})})})}function jf(){if(!ct){console.warn("no scene defined");return}dn.shift(),dn.length===0?zf():(ct.nextFrame(),Sa(ct,!0))}function Uf(t,n){const e={};for(let r=0;r<Vf;r+=1){const i=r===t,s=ma(r);e[s]={isCorrect:i,isDisabled:!n,callback:i?jf:void 0}}return e}function Gf(t,n){return{buttons:Uf(t,n),defaultButtonName:ma(0),isQuiz:!0}}function Sa(t,n){const e=dn[0]??0;t.engine.presentMenu(Gf(e,n))}function Kr(t){ct=t,ct.stop("boy_help_wear_clothes_quiz"),y(ct,!1),dn=[...Hf],Sa(ct,!0)}function Wf(t){w([{frameOrLabel:"boy_how_you_where_clothes_aac_how",soundId:"SBL-0027_How"},{frameOrLabel:"boy_how_you_where_clothes_aac_you",soundId:"SBL-0032_you_48.0k_stereo.mp3"},{frameOrLabel:"boy_how_you_where_clothes_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"boy_how_you_where_clothes_aac_clothes",soundId:"SBL-0030_clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Kr(t)}},prev:{callback:()=>{ht(t)}},restart:{callback:()=>{ht(t)}}})})}function qf(t){t.playSyncVoice("SBL-0002_How-do-you-wear-your-clothes_48.0k_stereo.mp3","boy_how_you_where_clothes_start","boy_how_you_where_clothes_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Wf(t)}},prev:{callback:()=>{ht(t)}},restart:{callback:()=>{ht(t)}}})})}function Kf(t){w([{frameOrLabel:"boy_this_how_where_clothes_aac_how",soundId:"SBL-0027_How"},{frameOrLabel:"boy_this_how_where_clothes_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"boy_this_how_where_clothes_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"boy_this_how_where_clothes_aac_clothes",soundId:"SBL-0030_clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{qf(t)}},prev:{callback:()=>{ht(t)}},restart:{callback:()=>{ht(t)}}})})}function ht(t){t.playSyncVoice("SBL-0001_This-is-how-I-wear-my-clothes_48.0k_stereo.mp3","boy_this_how_where_clothes_start","boy_this_how_where_clothes_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Kf(t)}},prev:{callback:()=>{ue(t)}},restart:{callback:()=>{ue(t)}}})})}async function Qf(t){await t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_glasses_quiz_correct_voc_begin","boy_help_wear_glasses_quiz_correct_voc_end"),t.engine.presentNav({next:{callback:()=>{ht(t)}},prev:{callback:()=>{ue(t)}},restart:{callback:()=>{ue(t)}}})}function Yf(t){t.playTo("boy_help_wear_glasses_quiz_correct_begin","boy_help_wear_glasses_quiz_correct_end",()=>{Qf(t)})}function Xf(t,n){const e=!t;return{buttons:{boyGlassesSlotButton0Display:{isCorrect:!1,isDisabled:e},boyGlassesSlotButton2Display:{isCorrect:!1,isDisabled:e},boyGlassesSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{Yf(n)}}},defaultButtonName:"boyGlassesSlotButton0Display",isQuiz:!0}}function wa(t,n){t.engine.presentMenu(Xf(n,t))}function ue(t){const n="boy_help_wear_glasses_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),wa(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-glas_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),wa(t,!0)})}function Jf(t){t.engine.presentNav({next:{callback:()=>{ue(t)}},prev:{callback:()=>{Qr(t)}},restart:{callback:()=>{Qr(t)}}})}function Zf(t,n){const e=!t;return{buttons:{boyGlassesMenuButton0Display:{isCorrect:!1,isDisabled:e},boyGlassesMenuButton1Display:{isCorrect:!1,isDisabled:e},boyGlassesMenuButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_glasses2_48.0k_stereo.mp3","boy_select_glasses_quiz_correct_start","boy_select_glasses_quiz_correct_end").then(()=>{Jf(n)})}}},defaultButtonName:"boyGlassesMenuButton0Display",isQuiz:!0}}function Ba(t,n){t.engine.presentMenu(Zf(n,t))}function Qr(t){const n="boy_menu_select_glasses_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ba(t,!1);const i="SBL-0001_Can-you-select-the-glasses";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Ba(t,!0)})}function ty(t){t.playTo("boy_wear_glasses_close_how_end","boy_wear_glasses_close_how_start",()=>{Qr(t)})}function ey(t){w([{frameOrLabel:"boy_wear_glasses_how_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"boy_wear_glasses_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"boy_wear_glasses_how_aac_glasses",soundId:"SBL-0025_glasses_48.0k_stereo.mp3"},{frameOrLabel:"boy_wear_glasses_how_aac_eyes",soundId:"SBL-0026_eyes_48.0k_stereo.mp3"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{ty(t)}},prev:{callback:()=>{Ca(t)}},restart:{callback:()=>{fn(t)}}})})}function Ca(t){t.playSyncVoice("SBL-0002_I-wear-my-glasses-over-my-eyes","boy_wear_glasses_how_start","boy_wear_glasses_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{ey(t)}},prev:{callback:()=>{fn(t)}},restart:{callback:()=>{fn(t)}}})})}function ny(t){t.playTo("boy_wear_glasses_animation_end","boy_wear_glasses_animation_start",()=>{Ca(t)})}function ry(t){t.engine.presentMenu({buttons:{boyWearGlassesButtonDisplay:{callback:()=>{ny(t)}}},defaultButtonName:"boyWearGlassesButtonDisplay"}),t.engine.startPressIndicator()}function fn(t){t.playSyncVoice("SBL-0001_I-wear-my-glasses_48.0k_stereo.mp3","boy_wear_glasses_start","boy_wear_glasses_end").then(()=>{ry(t)})}async function iy(t){await t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_cap_quiz_correct_voc_begin","boy_help_wear_cap_quiz_correct_voc_end"),t.engine.presentNav({next:{callback:()=>{fn(t)}},prev:{callback:()=>{Yr(t)}},restart:{callback:()=>{Yr(t)}}})}function sy(t){t.playTo("boy_help_wear_cap_quiz_correct_end","boy_help_wear_cap_quiz_correct_begin",()=>{iy(t)})}function oy(t,n){const e=!t;return{buttons:{boyCapSlotButton1Display:{isCorrect:!1,isDisabled:e},boyCapSlotButton2Display:{isCorrect:!1,isDisabled:e},boyCapSlotButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{sy(n)}}},defaultButtonName:"boyCapSlotButton0Display",isQuiz:!0}}function ka(t,n){t.engine.presentMenu(oy(n,t))}function Yr(t){const n="boy_help_wear_cap_quiz_voc",e=`${n}_begin`,r=`${n}_end`;t.stop(e),ka(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-cap_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),ka(t,!0)})}function ay(t){t.engine.presentNav({next:{callback:()=>{Yr(t)}},prev:{callback:()=>{Xr(t)}},restart:{callback:()=>{Xr(t)}}})}function ly(t,n){const e=!t;return{buttons:{boyCapMenuButton1Display:{isCorrect:!1,isDisabled:e},boyCapMenuButton2Display:{isCorrect:!1,isDisabled:e},boyCapMenuButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_cap2_48.0k_stereo.mp3","boy_select_cap_quiz_correct_start","boy_select_cap_quiz_correct_end").then(()=>{ay(n)})}}},defaultButtonName:"boyCapMenuButton0Display",isQuiz:!0}}function Da(t,n){t.engine.presentMenu(ly(n,t))}function Xr(t){const n="boy_menu_select_cap_quiz_voc",e=`${n}_begin`,r=`${n}_end`;t.stop(e),Da(t,!1);const i="SBL-0001_Can-you-select-the-cap";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Da(t,!0)})}function uy(t){t.playTo("boy_wear_cap_close_how_end","boy_wear_cap_close_how_start",()=>{Xr(t)})}function cy(t){w([{frameOrLabel:"boy_wear_cap_how_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"boy_wear_cap_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"boy_wear_cap_how_aac_cap",soundId:"SBL-0021_cap"},{frameOrLabel:"boy_wear_cap_how_aac_head",soundId:"SBL-0022_head"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{uy(t)}},prev:{callback:()=>{Pa(t)}},restart:{callback:()=>{yn(t)}}})})}function Pa(t){t.playSyncVoice("SBL-0002_I-wear-my-cap-on-my-head","boy_wear_cap_how_start","boy_wear_cap_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{cy(t)}},prev:{callback:()=>{yn(t)}},restart:{callback:()=>{yn(t)}}})})}function hy(t){t.playTo("boy_wear_cap_animation_end","boy_wear_cap_animation_start",()=>{Pa(t)})}function py(t){t.engine.presentMenu({buttons:{boyWearCapButtonDisplay:{callback:()=>{hy(t)}}},defaultButtonName:"boyWearCapButtonDisplay"}),t.engine.startPressIndicator()}function yn(t){t.playSyncVoice("SBL-0001_I-wear-my-cap","boy_wear_cap_start","boy_wear_cap_end").then(()=>{py(t)})}async function dy(t){await t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_shoes_quiz_correct_voc_begin","boy_help_wear_shoes_quiz_correct_voc_end"),t.engine.presentNav({next:{callback:()=>{yn(t)}},prev:{callback:()=>{Jr(t)}},restart:{callback:()=>{Jr(t)}}})}function fy(t){t.playTo("boy_help_wear_shoes_quiz_correct_begin","boy_help_wear_shoes_quiz_correct_end",()=>{dy(t)})}function yy(t,n){const e=!t;return{buttons:{boyShoesSlotButton0Display:{isCorrect:!1,isDisabled:e},boyShoesSlotButton1Display:{isCorrect:!1,isDisabled:e},boyShoesSlotButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{fy(n)}}},defaultButtonName:"boyShoesMenuButton0Display",isQuiz:!0}}function Ea(t,n){t.engine.presentMenu(yy(n,t))}function Jr(t){const n="boy_help_wear_shoes_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ea(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-shoe_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),Ea(t,!0)})}function gy(t){t.engine.presentNav({next:{callback:()=>{Jr(t)}},prev:{callback:()=>{Zr(t)}},restart:{callback:()=>{Zr(t)}}})}function _y(t,n){const e=!t;return{buttons:{boyShoesMenuButton0Display:{isCorrect:!1,isDisabled:e},boyShoesMenuButton2Display:{isCorrect:!1,isDisabled:e},boyShoesMenuButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_shoes_48.0k_stereo.mp3","boy_select_shoes_quiz_correct_start","boy_select_shoes_quiz_correct_end").then(()=>{gy(n)})}}},defaultButtonName:"boyShoesMenuButton0Display",isQuiz:!0}}function Ta(t,n){t.engine.presentMenu(_y(n,t))}function Zr(t){const n="boy_menu_select_shoes_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ta(t,!1);const i="SBL-0001_Can-you-select-the-shoes";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Ta(t,!0)})}function by(t){t.playTo("boy_shoes_tips_closing_end","boy_shoes_tips_closing_begin",()=>{Zr(t)})}async function vy(t){await t.playSyncVoice("SBL-0001_For-a-start-encourage-your-ki_48.0k_stereo.mp3","boy_shoes_tips_voc_begin","boy_shoes_tips_voc_end"),t.engine.presentNav({next:{callback:()=>{by(t)}},prev:{callback:()=>{Ia(t)}},restart:{callback:()=>{ce(t)}}})}function my(t){t.playTo("boy_shoes_open_tips_end","boy_shoes_open_tips_begin",()=>{vy(t)})}function Ia(t){w([{frameOrLabel:"boy_wear_shoes_how_aac_i",soundId:"SBL-0015_I"},{frameOrLabel:"boy_wear_shoes_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"boy_wear_shoes_how_aac_shoes",soundId:"SBL-0017_shoes"},{frameOrLabel:"boy_wear_shoes_how_aac_socks",soundId:"SBL-0018_socks"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{my(t)}},prev:{callback:()=>{Ma(t)}},restart:{callback:()=>{ce(t)}}})})}function Ma(t){t.playSyncVoice("SBL-0002_I-wear-my-shoes-over-my-socks","boy_wear_shoes_how_start","boy_wear_shoes_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Ia(t)}},prev:{callback:()=>{ce(t)}},restart:{callback:()=>{ce(t)}}})})}function Sy(t){t.playTo("boy_wear_shoes_animation_end","boy_wear_shoes_animation_start",()=>{Ma(t)})}function wy(t){t.engine.presentMenu({buttons:{boyWearShoesButtonDisplay:{callback:()=>{Sy(t)}}},defaultButtonName:"boyWearShoesButtonDisplay"}),t.engine.startPressIndicator()}function ce(t){t.playSyncVoice("SBL-0001_I-wear-my-shoes","boy_wear_shoes_start","boy_wear_shoes_end").then(()=>{wy(t)})}function By(t){t.engine.presentNav({next:{callback:()=>{ce(t)}},prev:{callback:()=>{ti(t)}},restart:{callback:()=>{ti(t)}}})}function Cy(t){t.playTo("boy_help_wear_socks_correct_end","boy_help_wear_socks_correct_begin",async()=>{await t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_socks_correct_voc_begin","boy_help_wear_socks_correct_voc_end"),By(t)})}function ky(t,n){const e=!t;return{buttons:{boySocksSlotButton0Display:{isCorrect:!1,isDisabled:e},boySocksSlotButton1Display:{isCorrect:!1,isDisabled:e},boySocksSlotButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{Cy(n)}}},defaultButtonName:"boySocksMenuButton0Display",isQuiz:!0}}function xa(t,n){t.engine.presentMenu(ky(n,t))}function ti(t){const n="boy_help_wear_socks_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),xa(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-sock_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),xa(t,!0)})}function Dy(t){t.engine.presentNav({next:{callback:()=>{ti(t)}},prev:{callback:()=>{ei(t)}},restart:{callback:()=>{ei(t)}}})}function Py(t,n){const e=!t;return{buttons:{boySocksMenuButton0Display:{isCorrect:!1,isDisabled:e},boySocksMenuButton1Display:{isCorrect:!1,isDisabled:e},boySocksMenuButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_socks_48.0k_stereo.mp3","boy_select_socks_quiz_correct_start","boy_select_socks_quiz_correct_end").then(()=>{Dy(n)})}}},defaultButtonName:"boySocksMenuButton0Display",isQuiz:!0}}function La(t,n){t.engine.presentMenu(Py(n,t))}function ei(t){const n="boy_menu_select_socks_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),La(t,!1);const i="SBL-0001_Can-you-select-the-socks";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),La(t,!0)})}function Ey(t){t.playTo("boy_wear_socks_tips_closing_end","boy_wear_socks_tips_closing_begin",()=>{ei(t)})}async function Ty(t){await t.playSyncVoice("SBL-0001_Encourage-your-kids-to-explore_48.0k_stereo.mp3","boy_wear_socks_tips_voc_begin","boy_wear_socks_tips_voc_end"),t.engine.presentNav({next:{callback:()=>{Ey(t)}},prev:{callback:()=>{$a(t)}},restart:{callback:()=>{he(t)}}})}function Iy(t){t.playTo("boy_wear_socks_tips_end","boy_wear_socks_tips_begin",()=>{Ty(t)})}function $a(t){w([{frameOrLabel:"boy_wear_socks_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"boy_wear_socks_how_aac_wear",soundId:"SBL-0012_Wear"},{frameOrLabel:"boy_wear_socks_how_aac_socks",soundId:"SBL-0013_Socks"},{frameOrLabel:"boy_wear_socks_how_aac_feet",soundId:"SBL-0014_Feet"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Iy(t)}},prev:{callback:()=>{Aa(t)}},restart:{callback:()=>{he(t)}}})})}function Aa(t){t.playSyncVoice("SBL-0002_I-wear-my-socks-on-my-feet","boy_wear_socks_how_start","boy_wear_socks_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{$a(t)}},prev:{callback:()=>{he(t)}},restart:{callback:()=>{he(t)}}})})}function My(t){t.playTo("boy_wear_socks_animation_end","boy_wear_socks_animation_start",()=>{Aa(t)})}function xy(t){t.engine.presentMenu({buttons:{boyWearSocksButtonDisplay:{callback:()=>{My(t)}}},defaultButtonName:"boyWearSocksButtonDisplay"}),t.engine.startPressIndicator()}function he(t){t.playSyncVoice("SBL-0001_I-wear-my-socks","boy_wear_socks_start","boy_wear_socks_end").then(()=>{xy(t)})}function Ly(t){t.engine.presentNav({next:{callback:()=>{he(t)}},prev:{callback:()=>{ni(t)}},restart:{callback:()=>{ni(t)}}})}async function $y(t){await t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_pants_quiz_correct_voc_begin","boy_help_wear_pants_quiz_correct_voc_end"),Ly(t)}function Ay(t,n){const e=!t;return{buttons:{boyPantsSlotButton0Display:{isCorrect:!1,isDisabled:e},boyPantsSlotButton2Display:{isCorrect:!1,isDisabled:e},boyPantsSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playTo("boy_help_wear_pants_quiz_correct_end","boy_help_wear_pants_quiz_correct_start",()=>{$y(n)})}}},defaultButtonName:"boyPantsMenuButton0Display",isQuiz:!0}}function Oa(t,n){t.engine.presentMenu(Ay(n,t))}function ni(t){const n="boy_help_wear_pants_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Oa(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-pant_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),Oa(t,!0)})}function Oy(t){t.engine.presentNav({next:{callback:()=>{ni(t)}},prev:{callback:()=>{ri(t)}},restart:{callback:()=>{ri(t)}}})}function Ny(t,n){const e=!t;return{buttons:{boyPantsMenuButton1Display:{isCorrect:!1,isDisabled:e},boyPantsMenuButton2Display:{isCorrect:!1,isDisabled:e},boyPantsMenuButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_pants_48.0k_stereo.mp3","boy_select_pants_quiz_correct_start","boy_select_pants_quiz_correct_end").then(()=>{Oy(n)})}}},defaultButtonName:"boyPantsMenuButton0Display",isQuiz:!0}}function Na(t,n){t.engine.presentMenu(Ny(n,t))}function ri(t){const n="boy_menu_select_pants_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Na(t,!1);const i="SBL-0001_Can-you-select-the-pants";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Na(t,!0)})}function Fy(t){t.playTo("boy_wear_pants_tips_closing_end","boy_wear_pants_tips_closing_begin",()=>{ri(t)})}async function Ry(t){await t.playSyncVoice("SBL-0001_pants_tips","boy_wear_pants_tips_voc_begin","boy_wear_pants_tips_voc_end"),t.engine.presentNav({next:{callback:()=>{Fy(t)}},prev:{callback:()=>{Fa(t)}},restart:{callback:()=>{pe(t)}}})}function Vy(t){t.playTo("boy_wear_pants_closing_end","boy_wear_pants_closing_begin",()=>{Ry(t)})}function Fa(t){w([{frameOrLabel:"boy_wear_pants_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"boy_wear_pants_how_aac_wear",soundId:"SBL-0008_Wear"},{frameOrLabel:"boy_wear_pants_how_aac_pants",soundId:"SBL-0009_pants"},{frameOrLabel:"boy_wear_pants_how_aac_legs",soundId:"SBL-0010_legs"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Vy(t)}},prev:{callback:()=>{Ra(t)}},restart:{callback:()=>{pe(t)}}})})}async function Ra(t){await t.playSyncVoice("SBL-0002_I-wear-my-pants-over-my-legs","boy_wear_pants_how_start","boy_wear_pants_how_end"),t.engine.presentNav({next:{callback:()=>{Fa(t)}},prev:{callback:()=>{pe(t)}},restart:{callback:()=>{pe(t)}}})}function Hy(t){t.playTo("boy_wear_pants_animation_end","boy_wear_pants_animation_start",()=>{Ra(t)})}function zy(t){t.engine.presentMenu({buttons:{boyWearPantsButtonDisplay:{callback:()=>{Hy(t)}}},defaultButtonName:"boyWearPantsButtonDisplay"}),t.engine.startPressIndicator()}async function pe(t){await t.playSyncVoice("SBL-0001_I-wear-my-pants","boy_wear_pants_start","boy_wear_pants_end"),zy(t)}function jy(t){t.engine.presentNav({next:{callback:()=>{pe(t)}},prev:{callback:()=>{ii(t)}},restart:{callback:()=>{ii(t)}}})}function Uy(t,n){const e=!t;return{buttons:{boyShirtSlotButton0Display:{isCorrect:!1,isDisabled:e},boyShirtSlotButton2Display:{isCorrect:!1,isDisabled:e},boyShirtSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playTo("boy_help_wear_shirt_quiz_correct_end","boy_help_wear_shirt_quiz_correct_start",async()=>{await n.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","boy_help_wear_shirt_quiz_correct_voc_begin","boy_help_wear_shirt_quiz_correct_voc_end"),jy(n)})}}},defaultButtonName:"boyShirtMenuButton0Display",isQuiz:!0}}function Va(t,n){t.engine.presentMenu(Uy(n,t))}function ii(t){const n="boy_help_wear_shirt_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Va(t,!1);const i="SBL-0005_Can-you-help-him-wear-his-tee_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),Va(t,!0)})}function Gy(t){t.engine.presentNav({next:{callback:()=>{ii(t)}},prev:{callback:()=>{si(t)}},restart:{callback:()=>{si(t)}}})}function Wy(t,n){const e=!t;return{buttons:{boyShirtMenuButton0Display:{isCorrect:!1,isDisabled:e},boyShirtMenuButton2Display:{isCorrect:!1,isDisabled:e},boyShirtMenuButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL0002_ThatsrightYouhavechosen_shirt_480k_stereo","boy_select_shirt_quiz_correct_start","boy_select_shirt_quiz_correct_end").then(()=>{Gy(n)})}}},defaultButtonName:"boyShirtMenuButton0Display",isQuiz:!0}}function Ha(t,n){t.engine.presentMenu(Wy(n,t))}function si(t){const n="boy_menu_select_shirt_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ha(t,!1);const i="SBL-0001_Can-you-select-the-shirt";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Ha(t,!0)})}async function qy(t){t.stop("boy_wear_shirt_tips_menu"),await ba(2e3),await t.playVoices("SBL-0001_shirts_tips"),t.engine.presentNav({next:{callback:()=>{t.playTo("boy_wear_shirt_tips_menu_closed_end","boy_wear_shirt_tips_menu_closed_begin",()=>{si(t)})}},prev:{callback:()=>{za(t)}},restart:{callback:()=>{de(t)}}})}function za(t){w([{frameOrLabel:"boy_wear_shirt_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"boy_wear_shirt_how_aac_wear",soundId:"SBL-0008_Wear"},{frameOrLabel:"boy_wear_shirt_how_aac_shirt",soundId:"SBL-0005_tee-shirt"},{frameOrLabel:"boy_wear_shirt_how_aac_body",soundId:"SBL-0006_body"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{qy(t)}},prev:{callback:()=>{ja(t)}},restart:{callback:()=>{de(t)}}})})}function ja(t){t.playSyncVoice("SBL-0004_I-wear-my-tee-shirt-over-my-body","boy_wear_shirt_how_start","boy_wear_shirt_how_end").then(()=>{za(t)})}function Ky(t){t.playTo("boy_wear_shirt_animation_end","boy_wear_shirt_animation_start",()=>{t.engine.presentNav({next:{callback:()=>{ja(t)}},prev:{callback:()=>{de(t)}},restart:{callback:()=>{de(t)}}})})}function Qy(t){t.engine.presentMenu({buttons:{boyWearShirtMenuButtonDisplay:{callback:()=>{Ky(t)}}},defaultButtonName:"boyWearShirtMenuButtonDisplay"}),t.engine.startPressIndicator()}function de(t){t.playSyncVoice("SBL0003_Iwearmyteeshirt_480k_stereo","boy_wear_shirt_start","boy_wear_shirt_end").then(()=>{Qy(t)})}function Yy(t){w([{frameOrLabel:"boy_how_wear_clothes_aac_how",soundId:"SBL-0027_How_48.0k_stereo.mp3"},{frameOrLabel:"boy_how_wear_clothes_aac_i",soundId:"SBL-0028_I"},{frameOrLabel:"boy_how_wear_clothes_aac_wear",soundId:"SBL-0029_wear"},{frameOrLabel:"boy_how_wear_clothes_aac_clothes",soundId:"SBL-0002_Clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{de(t)}},prev:{callback:()=>{Ua(t)}},restart:{callback:()=>{ye(t)}}})})}function Ua(t){t.stop("boy_how_wear_clothes"),t.playVoices("SBL-0002_How-do-I-wear-my-clothes").then(()=>{t.engine.presentNav({next:{callback:()=>{Yy(t)}},prev:{callback:()=>{Ga(t)}},restart:{callback:()=>{ye(t)}}})})}function Ga(t){w([{frameOrLabel:"boy_my_clothes_aac_my",soundId:"SBL-0001_My"},{frameOrLabel:"boy_my_clothes_aac_clothes",soundId:"SBL-0002_Clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Ua(t)}},prev:{callback:()=>{ye(t)}},restart:{callback:()=>{ye(t)}}})})}const oi=["boy_present_clothes_shirt","boy_present_clothes_pants","boy_present_clothes_socks","boy_present_clothes_hat","boy_present_clothes_shoes","boy_present_clothes_eyewear"];let fe;class T{constructor(){throw new Error("Instances of this class are not allowed.")}static OpenWardrobe(n){T.PresentMenu(!1,n),n.playSound({audioId:"my_clothes_wardrobe_open.mp3",completeCallback:async()=>{await n.playSyncVoice("SBL-0001_These-are-my-clothes","boy_these_are_my_clothes_voc_start","boy_these_are_my_clothes_voc_end"),T.PresentMenu(!0,n)}})}static Start(n){fe=-1,n.playTo("boy_present_clothes_end","boy_present_clothes_start",()=>{T.OpenWardrobe(n)})}static BuildMenuConfig(n,e){return{buttons:{wardrobeButtonDisplay:{isDisabled:!n,callback:()=>{T.PresentNextItem(e)}}}}}static PresentItemAt(n,e){fe=n;const r=oi[fe];if(r){T.PresentMenu(!1,e);const i=`${r}_end`,s=`${r}_start`;e.playTo(i,s,T.OnPresentItemComplete),e.playSound("my_clothes_present_item.mp3")}else T.Complete(e)}static PresentItemOf(n,e){const r=oi.indexOf(n);T.PresentItemAt(r,e)}static Complete(n){n.engine.presentNav({next:{callback:()=>{Ga(n)}},prev:{callback:()=>{T.PresentItemOf("boy_present_clothes_shoes",n)}},restart:{callback:()=>{T.Start(n)}}})}static OnPresentItemComplete(n){oi[fe+1]?T.PresentMenu(!0,n):T.Complete(n)}static PresentMenu(n,e){e.engine.presentMenu(T.BuildMenuConfig(n,e)),n&&e.engine.startPressIndicator()}static PresentNextItem(n){T.PresentItemAt(fe+1,n)}}function ye(t){T.Start(t)}function Xy(t){t.stop("boy_lets_read"),t.engine.presentNav({navButtonsToHide:["prev","restart"],params:{next:{callback:()=>{ye(t)}}}})}function Jy(t){w([{frameOrLabel:"boy_selected_aac_choose",soundId:"SBL-0035_choose_48.0k_stereo.mp3"},{frameOrLabel:"boy_selected_aac_boy",soundId:"SBL-0037_boy_48.0k_stereo.mp3"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Xy(t)}},prev:{callback:()=>{Wa(t)}},restart:{callback:()=>{It(t)}}})})}function Wa(t){t.playSyncVoice("SBL0001_YouhavechosenBoy_480k_stereo","boy_selected_start","boy_selected_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Jy(t)}},prev:{callback:()=>{mi(t)}},restart:{callback:()=>{It(t)}}})})}function Zy(t){t.stop("girl_complete"),t.engine.submitUserPerformanceData()}async function tg(t){await t.playSyncVoice("SBL-0001_Parents-you-may-want-to-ask-t_48.0k_stereo.mp3","girl_outro_tips_voc_begin","girl_outro_tips_voc_end"),t.engine.presentNav({next:{callback:()=>{Zy(t)}},prev:{callback:()=>{ai(t)}},restart:{callback:()=>{dt(t)}}})}function eg(t){t.playTo("girl_outro_tips_end","girl_outro_tips_begin",()=>{tg(t)})}const ng=6,rg=[1,0,2,4,5,3];let pt,gn;function qa(t){return`girlHelpWearClothesMenuButton${t}Display`}function ig(){if(!pt){console.warn("no scene defined");return}const t=pt;t.playTo("girl_help_wear_clothes_quiz_correct_end","girl_help_wear_clothes_quiz_correct_start",()=>{t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_well_done_start","girl_well_done_end").then(()=>{t.engine.presentNav({next:{callback:()=>{eg(t)}},prev:{callback:()=>{ai(t)}},restart:{callback:()=>{dt(t)}}})})})}function sg(){if(!pt){console.warn("no scene defined");return}gn.shift(),gn.length===0?ig():(pt.nextFrame(),Ka(pt,!0))}function og(t,n){const e={};for(let r=0;r<ng;r+=1){const i=r===t,s=qa(r);e[s]={isCorrect:i,isDisabled:!n,callback:i?sg:void 0}}return e}function ag(t,n){return{buttons:og(t,n),defaultButtonName:qa(0),isQuiz:!0}}function Ka(t,n){const e=gn[0]??0;t.engine.presentMenu(ag(e,n))}function ai(t){pt=t,pt.stop("girl_help_wear_clothes_quiz"),y(pt,!1),gn=[...rg],Ka(pt,!0)}function lg(t){w([{frameOrLabel:"girl_how_you_where_clothes_aac_how",soundId:"SBL-0027_How"},{frameOrLabel:"girl_how_you_where_clothes_aac_you",soundId:"SBL-0032_you_48.0k_stereo.mp3"},{frameOrLabel:"girl_how_you_where_clothes_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"girl_how_you_where_clothes_aac_clothes",soundId:"SBL-0030_clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{ai(t)}},prev:{callback:()=>{dt(t)}},restart:{callback:()=>{dt(t)}}})})}function ug(t){t.playSyncVoice("SBL-0002_How-do-you-wear-your-clothes_48.0k_stereo.mp3","girl_how_you_where_clothes_start","girl_how_you_where_clothes_end").then(()=>{t.engine.presentNav({next:{callback:()=>{lg(t)}},prev:{callback:()=>{dt(t)}},restart:{callback:()=>{dt(t)}}})})}function cg(t){w([{frameOrLabel:"girl_this_how_where_clothes_aac_how",soundId:"SBL-0027_How"},{frameOrLabel:"girl_this_how_where_clothes_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"girl_this_how_where_clothes_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"girl_this_how_where_clothes_aac_clothes",soundId:"SBL-0030_clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{ug(t)}},prev:{callback:()=>{dt(t)}},restart:{callback:()=>{dt(t)}}})})}function dt(t){t.playSyncVoice("SBL-0001_This-is-how-I-wear-my-clothes_48.0k_stereo.mp3","girl_this_how_where_clothes_start","girl_this_how_where_clothes_end").then(()=>{t.engine.presentNav({next:{callback:()=>{cg(t)}},prev:{callback:()=>{ge(t)}},restart:{callback:()=>{ge(t)}}})})}function hg(t){t.engine.presentNav({next:{callback:()=>{dt(t)}},prev:{callback:()=>{ge(t)}},restart:{callback:()=>{ge(t)}}})}function pg(t,n){const e=!t;return{buttons:{girlGlassesSlotButton0Display:{isCorrect:!1,isDisabled:e},girlGlassesSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playTo("girl_help_wear_glasses_quiz_correct_end","girl_help_wear_glasses_quiz_correct_start",()=>{hg(n)})}},girlGlassesSlotButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlGlassesSlotButton0Display",isQuiz:!0}}function Qa(t,n){t.engine.presentMenu(pg(n,t))}function ge(t){const n="girl_help_wear_glasses_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Qa(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-glas_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),Qa(t,!0)})}function dg(t){t.engine.presentNav({next:{callback:()=>{ge(t)}},prev:{callback:()=>{li(t)}},restart:{callback:()=>{li(t)}}})}function fg(t,n){const e=!t;return{buttons:{girlGlassesMenuButton0Display:{isCorrect:!1,isDisabled:e},girlGlassesMenuButton1Display:{isCorrect:!1,isDisabled:e},girlGlassesMenuButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_glasses2_48.0k_stereo.mp3","girl_select_glasses_quiz_correct_start","girl_select_glasses_quiz_correct_end").then(()=>{dg(n)})}}},defaultButtonName:"girlGlassesMenuButton0Display",isQuiz:!0}}function Ya(t,n){t.engine.presentMenu(fg(n,t))}function li(t){const n="girl_menu_select_glasses_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ya(t,!1);const i="SBL-0001_Can-you-select-the-glasses";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Ya(t,!0)})}function yg(t){t.playTo("girl_wear_glasses_close_how_end","girl_wear_glasses_close_how_start",()=>{li(t)})}function gg(t){w([{frameOrLabel:"girl_wear_glasses_how_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"girl_wear_glasses_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"girl_wear_glasses_how_aac_glasses",soundId:"SBL-0025_glasses_48.0k_stereo.mp3"},{frameOrLabel:"girl_wear_glasses_how_aac_eyes",soundId:"SBL-0026_eyes_48.0k_stereo.mp3"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{yg(t)}},prev:{callback:()=>{Xa(t)}},restart:{callback:()=>{_n(t)}}})})}function Xa(t){t.playSyncVoice("SBL-0002_I-wear-my-glasses-over-my-eyes","girl_wear_glasses_how_start","girl_wear_glasses_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{gg(t)}},prev:{callback:()=>{_n(t)}},restart:{callback:()=>{_n(t)}}})})}function _g(t){t.playTo("girl_wear_glasses_animation_end","girl_wear_glasses_animation_start",()=>{Xa(t)})}function bg(t){t.engine.presentMenu({buttons:{girlWearGlassesButtonDisplay:{callback:()=>{_g(t)}}},defaultButtonName:"girlWearGlassesButtonDisplay"}),t.engine.startPressIndicator()}function _n(t){t.playSyncVoice("SBL-0001_I-wear-my-glasses_48.0k_stereo.mp3","girl_wear_glasses_start","girl_wear_glasses_end").then(()=>{bg(t)})}function vg(t){t.engine.presentNav({next:{callback:()=>{_n(t)}},prev:{callback:()=>{ui(t)}},restart:{callback:()=>{ui(t)}}})}function mg(t,n){const e=!t;return{buttons:{girlCapSlotButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_help_wear_cap_quiz_correct_start","girl_help_wear_cap_quiz_correct_end").then(()=>{vg(n)})}},girlCapSlotButton1Display:{isCorrect:!1,isDisabled:e},girlCapSlotButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlCapSlotButton0Display",isQuiz:!0}}function Ja(t,n){t.engine.presentMenu(mg(n,t))}function ui(t){const n="girl_help_wear_cap_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Ja(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-cap_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),Ja(t,!0)})}function Sg(t){t.engine.presentNav({next:{callback:()=>{ui(t)}},prev:{callback:()=>{ci(t)}},restart:{callback:()=>{ci(t)}}})}function wg(t,n){const e=!t;return{buttons:{girlCapMenuButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_cap2_48.0k_stereo.mp3","girl_select_cap_quiz_correct_start","girl_select_cap_quiz_correct_end").then(()=>{Sg(n)})}},girlCapMenuButton1Display:{isCorrect:!1,isDisabled:e},girlCapMenuButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlCapMenuButton0Display",isQuiz:!0}}function Za(t,n){t.engine.presentMenu(wg(n,t))}function ci(t){const n="girl_menu_select_cap_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),Za(t,!1);const i="SBL-0001_Can-you-select-the-cap";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),Za(t,!0)})}function Bg(t){t.playTo("girl_wear_cap_close_how_end","girl_wear_cap_close_how_start",()=>{ci(t)})}function Cg(t){w([{frameOrLabel:"girl_wear_cap_how_aac_i",soundId:"SBL-0019_I"},{frameOrLabel:"girl_wear_cap_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"girl_wear_cap_how_aac_cap",soundId:"SBL-0021_cap"},{frameOrLabel:"girl_wear_cap_how_aac_head",soundId:"SBL-0022_head"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Bg(t)}},prev:{callback:()=>{tl(t)}},restart:{callback:()=>{bn(t)}}})})}function tl(t){t.playSyncVoice("SBL-0002_I-wear-my-cap-on-my-head","girl_wear_cap_how_start","girl_wear_cap_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{Cg(t)}},prev:{callback:()=>{bn(t)}},restart:{callback:()=>{bn(t)}}})})}function kg(t){t.playTo("girl_wear_cap_animation_end","girl_wear_cap_animation_start",()=>{tl(t)})}function Dg(t){t.engine.presentMenu({buttons:{girlWearCapButtonDisplay:{callback:()=>{kg(t)}}},defaultButtonName:"girlWearCapButtonDisplay"}),t.engine.startPressIndicator()}function bn(t){t.playSyncVoice("SBL-0001_I-wear-my-cap","girl_wear_cap_start","girl_wear_cap_end").then(()=>{Dg(t)})}function Pg(t){t.engine.presentNav({next:{callback:()=>{bn(t)}},prev:{callback:()=>{hi(t)}},restart:{callback:()=>{hi(t)}}})}function Eg(t,n){const e=!t;return{buttons:{girlShoesSlotButton0Display:{isCorrect:!1,isDisabled:e},girlShoesSlotButton1Display:{isCorrect:!1,isDisabled:e},girlShoesSlotButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_help_wear_shoes_quiz_correct_start","girl_help_wear_shoes_quiz_correct_end").then(()=>{Pg(n)})}}},defaultButtonName:"girlShoesSlotButton0Display",isQuiz:!0}}function el(t,n){t.engine.presentMenu(Eg(n,t))}function hi(t){const n="girl_help_wear_shoes_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),el(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-shoe_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),el(t,!0)})}function Tg(t){t.engine.presentNav({next:{callback:()=>{hi(t)}},prev:{callback:()=>{pi(t)}},restart:{callback:()=>{pi(t)}}})}function Ig(t,n){const e=!t;return{buttons:{girlShoesMenuButton0Display:{isCorrect:!1,isDisabled:e},girlShoesMenuButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_shoes_48.0k_stereo.mp3","girl_select_shoes_quiz_correct_start","girl_select_shoes_quiz_correct_end").then(()=>{Tg(n)})}},girlShoesMenuButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlShoesMenuButton0Display",isQuiz:!0}}function nl(t,n){t.engine.presentMenu(Ig(n,t))}function pi(t){const n="girl_menu_select_shoes_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),nl(t,!1);const i="SBL-0001_Can-you-select-the-shoes";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),nl(t,!0)})}async function Mg(t){await t.playSyncVoice("SBL-0001_For-a-start-you-can-let-the-k_48.0k_stereo.mp3","girl_wear_shoes_tips1_start","girl_wear_shoes_tips1_end"),await t.playSyncVoice("SBL-0002_It-is-good-to-start-by-teaching-shoes","girl_wear_shoes_tips2_start","girl_wear_shoes_tips2_end"),t.engine.presentNav({next:{callback:()=>{t.playToEnd("girl_wear_shoes_tips_menu_closed",()=>{pi(t)})}},prev:{callback:()=>{rl(t)}},restart:{callback:()=>{_e(t)}}})}function rl(t){w([{frameOrLabel:"girl_wear_shoes_how_aac_i",soundId:"SBL-0015_I"},{frameOrLabel:"girl_wear_shoes_how_aac_wear",soundId:"SBL-0016_wear"},{frameOrLabel:"girl_wear_shoes_how_aac_shoes",soundId:"SBL-0017_shoes"},{frameOrLabel:"girl_wear_shoes_how_aac_socks",soundId:"SBL-0018_socks"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Mg(t)}},prev:{callback:()=>{il(t)}},restart:{callback:()=>{_e(t)}}})})}function il(t){t.playSyncVoice("SBL-0002_I-wear-my-shoes-over-my-socks","girl_wear_shoes_how_start","girl_wear_shoes_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{rl(t)}},prev:{callback:()=>{_e(t)}},restart:{callback:()=>{_e(t)}}})})}function xg(t){t.playTo("girl_wear_shoes_animation_end","girl_wear_shoes_animation_start",()=>{il(t)})}function Lg(t){t.engine.presentMenu({buttons:{girlWearShoesButtonDisplay:{callback:()=>{xg(t)}}},defaultButtonName:"girlWearShoesButtonDisplay"}),t.engine.startPressIndicator()}function _e(t){t.playSyncVoice("SBL-0001_I-wear-my-shoes","girl_wear_shoes_start","girl_wear_shoes_end").then(()=>{Lg(t)})}function $g(t){t.engine.presentNav({next:{callback:()=>{_e(t)}},prev:{callback:()=>{di(t)}},restart:{callback:()=>{di(t)}}})}function Ag(t,n){const e=!t;return{buttons:{girlSocksSlotButton0Display:{isCorrect:!1,isDisabled:e},girlSocksSlotButton1Display:{isCorrect:!1,isDisabled:e},girlSocksSlotButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_help_wear_socks_quiz_correct_start","girl_help_wear_socks_quiz_correct_end").then(()=>{$g(n)})}}},defaultButtonName:"girlSocksSlotButton0Display",isQuiz:!0}}function sl(t,n){t.engine.presentMenu(Ag(n,t))}function di(t){const n="girl_help_wear_socks_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),sl(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-sock_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),sl(t,!0)})}function Og(t){t.engine.presentNav({next:{callback:()=>{di(t)}},prev:{callback:()=>{fi(t)}},restart:{callback:()=>{fi(t)}}})}function Ng(t,n){const e=!t;return{buttons:{girlSocksMenuButton0Display:{isCorrect:!1,isDisabled:e},girlSocksMenuButton1Display:{isCorrect:!1,isDisabled:e},girlSocksMenuButton2Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_socks_48.0k_stereo.mp3","girl_select_socks_quiz_correct_start","girl_select_socks_quiz_correct_end").then(()=>{Og(n)})}}},defaultButtonName:"girlSocksMenuButton0Display",isQuiz:!0}}function ol(t,n){t.engine.presentMenu(Ng(n,t))}function fi(t){const n="girl_menu_select_socks_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),ol(t,!1);const i="SBL-0001_Can-you-select-the-socks";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),ol(t,!0)})}async function Fg(t){await t.playSyncVoice("SBL-0001_For-a-start-you-can-let-your_48.0k_stereo.mp3","girl_wear_socks_tips1_start","girl_wear_socks_tips1_end"),await t.playSyncVoice("SBL-0002_You-can-start-by-teaching-them_48.0k_stereo.mp3","girl_wear_socks_tips2_start","girl_wear_socks_tips2_end"),t.engine.presentNav({next:{callback:()=>{t.playToEnd("girl_wear_socks_tips_menu_closed",()=>{fi(t)})}},prev:{callback:()=>{al(t)}},restart:{callback:()=>{be(t)}}})}function al(t){w([{frameOrLabel:"girl_wear_socks_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"girl_wear_socks_how_aac_wear",soundId:"SBL-0012_Wear"},{frameOrLabel:"girl_wear_socks_how_aac_socks",soundId:"SBL-0013_Socks"},{frameOrLabel:"girl_wear_socks_how_aac_feet",soundId:"SBL-0014_Feet"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Fg(t)}},prev:{callback:()=>{ll(t)}},restart:{callback:()=>{be(t)}}})})}function ll(t){t.playSyncVoice("SBL-0002_I-wear-my-socks-on-my-feet","girl_wear_socks_how_start","girl_wear_socks_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{al(t)}},prev:{callback:()=>{be(t)}},restart:{callback:()=>{be(t)}}})})}function Rg(t){t.playTo("girl_wear_socks_animation_end","girl_wear_socks_animation_start",()=>{ll(t)})}function Vg(t){t.engine.presentMenu({buttons:{girlWearSocksButtonDisplay:{callback:()=>{Rg(t)}}},defaultButtonName:"girlWearSocksButtonDisplay"}),t.engine.startPressIndicator()}function be(t){t.playSyncVoice("SBL-0001_I-wear-my-socks","girl_wear_socks_start","girl_wear_socks_end").then(()=>{Vg(t)})}function Hg(t){t.engine.presentNav({next:{callback:()=>{be(t)}},prev:{callback:()=>{yi(t)}},restart:{callback:()=>{yi(t)}}})}function zg(t,n){const e=!t;return{buttons:{girlPantsSlotButton0Display:{isCorrect:!1,isDisabled:e},girlPantsSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_help_wear_pants_quiz_correct_start","girl_help_wear_pants_quiz_correct_end").then(()=>{Hg(n)})}},girlPantsSlotButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlPantsSlotButton0Display",isQuiz:!0}}function ul(t,n){t.engine.presentMenu(zg(n,t))}function yi(t){const n="girl_help_wear_pants_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),ul(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-pant_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),ul(t,!0)})}function jg(t){t.engine.presentNav({next:{callback:()=>{yi(t)}},prev:{callback:()=>{gi(t)}},restart:{callback:()=>{gi(t)}}})}function Ug(t,n){const e=!t;return{buttons:{girlPantsMenuButton1Display:{isCorrect:!1,isDisabled:e},girlPantsMenuButton2Display:{isCorrect:!1,isDisabled:e},girlPantsMenuButton0Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL-0002_Thats-right-You-have-chosen_pants_48.0k_stereo.mp3","girl_select_pants_quiz_correct_start","girl_select_pants_quiz_correct_end").then(()=>{jg(n)})}}},defaultButtonName:"girlPantsMenuButton0Display",isQuiz:!0}}function cl(t,n){t.engine.presentMenu(Ug(n,t))}function gi(t){const n="girl_menu_select_pants_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),cl(t,!1);const i="SBL-0001_Can-you-select-the-pants";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),cl(t,!0)})}function Gg(t){t.playSyncVoice("SBL-0002_It-is-good-to-start-by-teaching-pants2","girl_wear_pants_tips_start","girl_wear_pants_tips_end").then(()=>{t.stop("girl_wear_pants_tips_end"),t.engine.presentNav({next:{callback:()=>{t.playToEnd("girl_wear_pants_tips_menu_closed",()=>{gi(t)})}},prev:{callback:()=>{hl(t)}},restart:{callback:()=>{ve(t)}}})})}function hl(t){w([{frameOrLabel:"girl_wear_pants_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"girl_wear_pants_how_aac_wear",soundId:"SBL-0008_Wear"},{frameOrLabel:"girl_wear_pants_how_aac_pants",soundId:"SBL-0009_pants"},{frameOrLabel:"girl_wear_pants_how_aac_legs",soundId:"SBL-0010_legs"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Gg(t)}},prev:{callback:()=>{pl(t)}},restart:{callback:()=>{ve(t)}}})})}function pl(t){t.playSyncVoice("SBL-0002_I-wear-my-pants-over-my-legs","girl_wear_pants_how_start","girl_wear_pants_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{hl(t)}},prev:{callback:()=>{ve(t)}},restart:{callback:()=>{ve(t)}}})})}function Wg(t){t.playTo("girl_wear_pants_animation_end","girl_wear_pants_animation_start",()=>{pl(t)})}function qg(t){t.engine.presentMenu({buttons:{girlWearPantsButtonDisplay:{callback:()=>{Wg(t)}}},defaultButtonName:"girlWearPantsButtonDisplay"}),t.engine.startPressIndicator()}function ve(t){t.playSyncVoice("SBL-0001_I-wear-my-pants","girl_wear_pants_start","girl_wear_pants_end").then(()=>{qg(t)})}function Kg(t){t.playSyncVoice("SBL-0001_Well-done-Great-job_48.0k_stereo.mp3","girl_help_wear_shirt_praise_start","girl_help_wear_shirt_praise_end").then(()=>{t.engine.presentNav({next:{callback:()=>{ve(t)}},prev:{callback:()=>{_i(t)}},restart:{callback:()=>{_i(t)}}})})}function Qg(t,n){const e=!t;return{buttons:{girlShirtSlotButton0Display:{isCorrect:!1,isDisabled:e},girlShirtSlotButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playTo("girl_help_wear_shirt_quiz_correct_end","girl_help_wear_shirt_quiz_correct_start",()=>{Kg(n)})}},girlShirtSlotButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlShirtSlotButton0Display",isQuiz:!0}}function dl(t,n){t.engine.presentMenu(Qg(n,t))}function _i(t){const n="girl_help_wear_shirt_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),dl(t,!1);const i="SBL-0004_Can-you-help-her-wear-her-tee_48.0k_stereo.mp3";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0,i),dl(t,!0)})}function Yg(t){t.engine.presentNav({next:{callback:()=>{_i(t)}},prev:{callback:()=>{bi(t)}},restart:{callback:()=>{bi(t)}}})}function Xg(t,n){const e=!t;return{buttons:{girlShirtMenuButton0Display:{isCorrect:!1,isDisabled:e},girlShirtMenuButton1Display:{isCorrect:!0,isDisabled:e,callback:()=>{n.playSyncVoice("SBL0002_ThatsrightYouhavechosen_shirt_480k_stereo","girl_select_shirt_quiz_correct_start","girl_select_shirt_quiz_correct_end").then(()=>{Yg(n)})}},girlShirtMenuButton2Display:{isCorrect:!1,isDisabled:e}},defaultButtonName:"girlShirtMenuButton0Display",isQuiz:!0}}function fl(t,n){t.engine.presentMenu(Xg(n,t))}function bi(t){const n="girl_menu_select_shirt_quiz",e=`${n}_start`,r=`${n}_end`;t.stop(e),fl(t,!1);const i="SBL-0001_Can-you-select-the-shirt";y(t,!1,i),t.playSyncVoice(i,e,r).then(()=>{y(t,!0),fl(t,!0)})}function Jg(t){t.playSyncVoice("SBL-0002_It-is-good-to-start-by-teaching-shirts","girl_wear_shirt_tips_start","girl_wear_shirt_tips_end").then(()=>{t.stop("girl_wear_shirt_tips_end"),t.engine.presentNav({next:{callback:()=>{t.playToEnd("girl_wear_shirt_tips_menu_closed",()=>{bi(t)})}},prev:{callback:()=>{yl(t)}},restart:{callback:()=>{me(t)}}})})}function yl(t){w([{frameOrLabel:"girl_wear_shirt_how_aac_i",soundId:"SBL-0007_I"},{frameOrLabel:"girl_wear_shirt_how_aac_wear",soundId:"SBL-0008_Wear"},{frameOrLabel:"girl_wear_shirt_how_aac_shirt",soundId:"SBL-0005_tee-shirt"},{frameOrLabel:"girl_wear_shirt_how_aac_body",soundId:"SBL-0006_body"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{Jg(t)}},prev:{callback:()=>{gl(t)}},restart:{callback:()=>{me(t)}}})})}function gl(t){t.playSyncVoice("SBL-0004_I-wear-my-tee-shirt-over-my-body","girl_wear_shirt_how_start","girl_wear_shirt_how_end").then(()=>{t.engine.presentNav({next:{callback:()=>{yl(t)}},prev:{callback:()=>{me(t)}},restart:{callback:()=>{me(t)}}})})}function Zg(t){t.playTo("girl_wear_shirt_animation_end","girl_wear_shirt_animation_start",()=>{gl(t)})}function t_(t){t.engine.presentMenu({buttons:{girlWearShirtMenuButtonDisplay:{callback:()=>{Zg(t)}}},defaultButtonName:"girlWearShirtMenuButtonDisplay"}),t.engine.startPressIndicator()}async function me(t){await t.playSyncVoice("SBL0003_Iwearmyteeshirt_480k_stereo","girl_wear_shirt_start","girl_wear_shirt_end"),t_(t)}function e_(t){w([{frameOrLabel:"girl_how_wear_clothes_aac_how",soundId:"SBL-0027_How_48.0k_stereo.mp3"},{frameOrLabel:"girl_how_wear_clothes_aac_i",soundId:"SBL-0028_I"},{frameOrLabel:"girl_how_wear_clothes_aac_wear",soundId:"SBL-0029_wear"},{frameOrLabel:"girl_how_wear_clothes_aac_clothes",soundId:"SBL-0002_Clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{me(t)}},prev:{callback:()=>{_l(t)}},restart:{callback:()=>{we(t)}}})})}function _l(t){t.playSyncVoice("SBL-0002_How-do-I-wear-my-clothes2","girl_how_wear_clothes_begin","girl_how_wear_clothes_end").then(()=>{t.engine.presentNav({next:{callback:()=>{e_(t)}},prev:{callback:()=>{bl(t)}},restart:{callback:()=>{we(t)}}})})}function bl(t){w([{frameOrLabel:"girl_my_clothes_aac_my",soundId:"SBL-0001_My"},{frameOrLabel:"girl_my_clothes_aac_clothes",soundId:"SBL-0002_Clothes"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{_l(t)}},prev:{callback:()=>{we(t)}},restart:{callback:()=>{we(t)}}})})}const vi=["girl_present_clothes_shirt","girl_present_clothes_pants","girl_present_clothes_socks","girl_present_clothes_hat","girl_present_clothes_shoes","girl_present_clothes_eyewear"];let Se;class I{constructor(){throw new Error("Instances of this class are not allowed.")}static OpenWardrobe(n){I.PresentMenu(!1,n),n.playSound({audioId:"my_clothes_wardrobe_open.mp3",completeCallback:async()=>{await n.playSyncVoice("SBL-0001_These-are-my-clothes","girl_these_are_my_clothes_voc_start","girl_these_are_my_clothes_voc_end"),I.PresentMenu(!0,n)}})}static Start(n){Se=-1,n.playTo("girl_present_clothes_end","girl_present_clothes_start",()=>{I.OpenWardrobe(n)})}static BuildMenuConfig(n,e){return{buttons:{wardrobeButtonDisplay:{isDisabled:!n,callback:()=>{I.PresentNextItem(e)}}}}}static PresentItemAt(n,e){Se=n;const r=vi[Se];if(r){I.PresentMenu(!1,e);const i=`${r}_end`,s=`${r}_start`;e.playTo(i,s,I.OnPresentItemComplete),e.playSound("my_clothes_present_item.mp3")}else I.Complete(e)}static PresentItemOf(n,e){const r=vi.indexOf(n);I.PresentItemAt(r,e)}static Complete(n){n.engine.presentNav({next:{callback:()=>{bl(n)}},prev:{callback:()=>{I.PresentItemOf("girl_present_clothes_shoes",n)}},restart:{callback:()=>{I.Start(n)}}})}static OnPresentItemComplete(n){vi[Se+1]?I.PresentMenu(!0,n):I.Complete(n)}static PresentMenu(n,e){e.engine.presentMenu(I.BuildMenuConfig(n,e)),n&&e.engine.startPressIndicator()}static PresentNextItem(n){I.PresentItemAt(Se+1,n)}}function we(t){I.Start(t)}function n_(t){t.stop("girl_lets_read"),t.engine.presentNav({navButtonsToHide:["prev","restart"],params:{next:{callback:()=>{we(t)}}}})}function r_(t){w([{frameOrLabel:"girl_selected_aac_choose",soundId:"SBL-0035_choose_48.0k_stereo.mp3"},{frameOrLabel:"girl_selected_aac_girl",soundId:"SBL-0036_girl_48.0k_stereo.mp3"}],t).then(()=>{t.engine.presentNav({next:{callback:()=>{n_(t)}},prev:{callback:()=>{vl(t)}},restart:{callback:()=>{It(t)}}})})}function vl(t){t.playSyncVoice("SBL-0001_You-have-chosen-Girl_48.0k_stereo.mp3","girl_selected_start","girl_selected_end").then(()=>{t.engine.presentNav({next:{callback:()=>{r_(t)}},prev:{callback:()=>{mi(t)}},restart:{callback:()=>{It(t)}}})})}function i_(t,n){const e=!t;return{buttons:{boyButtonDisplay:{isDisabled:e,callback:()=>{n.engine.playSound({audioId:"my_clothes_correct.mp3",completeCallback:()=>{Wa(n)}})}},girlButtonDisplay:{isDisabled:e,callback:()=>{n.engine.playSound({audioId:"my_clothes_correct.mp3",completeCallback:()=>{vl(n)}})}}},defaultButtonName:"boyButtonDisplay"}}function ml(t,n){t.engine.presentMenu(i_(n,t))}function mi(t){t.stop("character_selection"),ml(t,!1),t.playVoices("SBL0001_Firstchooseacharacter_480k_stereo").then(()=>{ml(t,!0)})}function s_(t){t.stop("prep"),t.playVoices(["SBL-0001_For-a-more-immersive-experienc_48.0k_stereo.mp3","SBL-0002_shirt-pants-socks-shoes-cap-an_48.0k_stereo.mp3"]).then(()=>{t.engine.presentNav({next:{callback:()=>{mi(t)}},prev:{callback:()=>{It(t)}},restart:{callback:()=>{It(t)}}})})}function o_(t){t.playTo("intro_closing_end","intro_closing_begin",()=>{s_(t)})}function a_(t){t.engine.presentNav({navButtonsToHide:["prev","restart"],params:{next:{callback:()=>{o_(t)}}}})}function It(t){t.playTo("start_end","start",()=>{a_(t)})}class l_ extends $f{run(){this.engine.playBgm("my_clothes_bgm.mp3"),It(this.exportRoot)}}const u_=Object.freeze(Object.defineProperty({__proto__:null,MyClothesEntrySceneHandler:l_},Symbol.toStringTag,{value:"Module"}));pn.LogVersion(),N.Engine=pn,N.SceneHandlers=u_,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=storybook-engine.umd.js.map
