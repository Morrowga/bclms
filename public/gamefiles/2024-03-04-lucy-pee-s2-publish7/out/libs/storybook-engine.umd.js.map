{"version":3,"file":"storybook-engine.umd.js","sources":["../node_modules/eventemitter3/index.js","../node_modules/js-cookie/dist/js.cookie.mjs","../src/utils/createjs/events/CjsEvents.ts","../src/utils/createjs/objects/CjsGetDisplayObject.ts","../src/utils/createjs/objects/CjsGetMovieClip.ts","../src/utils/createjs/utils/CjsGetMovieClipLabels.ts","../src/utils/object/IsObject.ts","../src/utils/collections/arrays/CloneArray.ts","../src/utils/object/IsPlainObject.ts","../src/utils/object/CloneObject.ts","../src/engine/data/SbAssetLib.ts","../src/engine/data/SbDesignData.ts","../src/engine/ui/messagePanel/SbMessagePanelButtonIds.ts","../src/engine/data/SbInputDevices.ts","../src/engine/ui/main/nav/SbNavToDirections.ts","../src/engine/data/defaults/SbDefaults.ts","../node_modules/object-keys/isArguments.js","../node_modules/object-keys/implementation.js","../node_modules/object-keys/index.js","../node_modules/has-symbols/shams.js","../node_modules/has-symbols/index.js","../node_modules/has-proto/index.js","../node_modules/function-bind/implementation.js","../node_modules/function-bind/index.js","../node_modules/hasown/index.js","../node_modules/get-intrinsic/index.js","../node_modules/has-property-descriptors/index.js","../node_modules/gopd/index.js","../node_modules/define-data-property/index.js","../node_modules/define-properties/index.js","../node_modules/set-function-length/index.js","../node_modules/call-bind/index.js","../node_modules/call-bind/callBound.js","../node_modules/object.assign/implementation.js","../node_modules/object.assign/polyfill.js","../node_modules/object.assign/shim.js","../node_modules/object.assign/index.js","../node_modules/functions-have-names/index.js","../node_modules/set-function-name/index.js","../node_modules/regexp.prototype.flags/implementation.js","../node_modules/regexp.prototype.flags/polyfill.js","../node_modules/regexp.prototype.flags/shim.js","../node_modules/regexp.prototype.flags/index.js","../node_modules/has-tostringtag/shams.js","../node_modules/is-arguments/index.js","../__vite-browser-external","../node_modules/object-inspect/index.js","../node_modules/side-channel/index.js","../node_modules/internal-slot/index.js","../node_modules/stop-iteration-iterator/index.js","../node_modules/isarray/index.js","../node_modules/is-string/index.js","../node_modules/is-map/index.js","../node_modules/is-set/index.js","../node_modules/es-get-iterator/index.js","../node_modules/object-is/implementation.js","../node_modules/object-is/polyfill.js","../node_modules/object-is/shim.js","../node_modules/object-is/index.js","../node_modules/is-callable/index.js","../node_modules/for-each/index.js","../node_modules/available-typed-arrays/index.js","../node_modules/which-typed-array/index.js","../node_modules/is-typed-array/index.js","../node_modules/is-array-buffer/index.js","../node_modules/is-date-object/index.js","../node_modules/is-regex/index.js","../node_modules/is-shared-array-buffer/index.js","../node_modules/is-number-object/index.js","../node_modules/is-boolean-object/index.js","../node_modules/is-symbol/index.js","../node_modules/has-bigints/index.js","../node_modules/is-bigint/index.js","../node_modules/which-boxed-primitive/index.js","../node_modules/is-weakmap/index.js","../node_modules/is-weakset/index.js","../node_modules/which-collection/index.js","../node_modules/array-buffer-byte-length/index.js","../node_modules/deep-equal/index.js","../src/utils/parsers/ParseBoolean.ts","../src/utils/parsers/ParseStringToDataObject.ts","../src/utils/Utils.ts","../src/utils/math/Clamp.ts","../src/utils/parsers/ParseNumber.ts","../src/engine/data/settings/storage/parsers/SbParseAudioSettings.ts","../src/utils/collections/arrays/IncludesIs.ts","../src/engine/data/settings/storage/parsers/SbParseDeviceSettings.ts","../src/engine/data/settings/storage/parsers/SbParseStorybookSettings.ts","../src/utils/number/IsValidNumber.ts","../src/utils/number/IsValidPositiveZeroInteger.ts","../src/utils/string/IsValidString.ts","../src/engine/data/settings/storage/parsers/SbParseUserStorybooksStates.ts","../src/engine/data/settings/storage/parsers/SbUserSettingsDataParser.ts","../src/engine/data/settings/storage/SbUserSettingsStorage.ts","../src/engine/data/settings/SbUserSettings.ts","../src/utils/createjs/utils/CjsGetBounds.ts","../src/utils/display/color/RgbColor.ts","../src/utils/display/CjsApplyColor.ts","../src/engine/ui/content/UpdateCaptionHilitesFromSettings.ts","../src/engine/ui/content/SbContextLayers.ts","../src/engine/ui/events/SbUiComponentEvents.ts","../src/utils/collections/maps/SearchForMapKeyByValue.ts","../src/utils/collections/arrays/actions/SetPropertyInArray.ts","../src/utils/createjs/actions/CjsSetVisible.ts","../src/utils/createjs/objects/buttons/CjsButtonLabels.ts","../src/utils/createjs/objects/buttons/CjsButtonEvents.ts","../src/utils/createjs/events/CjsEventsHandler.ts","../src/utils/createjs/objects/display/CjsDisplayObject.ts","../src/utils/createjs/objects/CjsGetBitmapText.ts","../src/utils/createjs/objects/CjsSetText.ts","../src/utils/createjs/objects/CjsGetText.ts","../src/utils/createjs/objects/CjsGetTextObject.ts","../src/utils/createjs/utils/CjsGetMovieClipLabelsByName.ts","../src/utils/createjs/objects/buttons/CjsButtonsOverHelperKludge.ts","../src/utils/createjs/objects/buttons/CjsButtonHelper.ts","../src/utils/createjs/objects/buttons/CjsButton.ts","../src/utils/createjs/objects/CjsGetButton.ts","../src/utils/createjs/objects/buttons/CjsCompoundButton.ts","../src/utils/createjs/objects/CjsGetContainer.ts","../src/utils/createjs/objects/buttons/CjsCheckboxCompNames.ts","../src/utils/createjs/objects/buttons/CjsCheckbox.ts","../src/utils/createjs/objects/buttons/CjsCreateCheckbox.ts","../src/engine/ui/SbUiComponent.ts","../src/utils/web/dom/GlobalDomEvents.ts","../src/utils/web/keys/KeyCodes.ts","../src/engine/ui/inputDeviceHandler/SbInputDeviceHandlerEvents.ts","../src/utils/object/HasOwnProperty.ts","../src/utils/object/GetValue.ts","../src/utils/object/GetNumberValue.ts","../src/utils/timers/Timer.ts","../src/engine/ui/inputDeviceHandler/SbInputDeviceHandler.ts","../src/utils/createjs/utils/dragManager/CjsDragManagerEvents.ts","../src/utils/createjs/utils/dragManager/CjsDragManager.ts","../src/utils/createjs/objects/sliders/CjsSliderEvents.ts","../src/utils/createjs/objects/sliders/CjsSliderCompNames.ts","../src/utils/createjs/objects/sliders/CjsSlider.ts","../src/engine/ui/progressBar/SbProgressBar.ts","../src/utils/createjs/utils/CjsResolveFrame.ts","../src/engine/data/settings/audio/SbUserAudioSettingsDataKeys.ts","../src/engine/storybookScene/utils/SbResolveSceneDisplay.ts","../src/engine/storybookScene/SbScene.ts","../src/engine/ui/tutorial/SbTutorialManagerEvents.ts","../src/engine/ui/tutorial/SbTutorialManager.ts","../src/engine/ui/main/SbMainPanelDisplayObjectNames.ts","../src/engine/ui/main/SbMainPanelEvents.ts","../src/engine/ui/main/helpfulTipsPanel/SbHelpfulTipsPanelEvents.ts","../src/engine/ui/main/helpfulTipsPanel/SbHelpfulTipsPanel.ts","../src/engine/ui/main/SbMainPanel.ts","../src/engine/ui/messagePanel/SbMessagePanelEvents.ts","../src/engine/ui/messagePanel/SbMessagePanelResults.ts","../src/utils/createjs/utils/CjsTextMetrics.ts","../src/utils/object/GetStringValue.ts","../src/engine/ui/messagePanel/configs/SbMessagePanelDimBackConfig.ts","../src/engine/ui/messagePanel/configs/SbMessagePanelConfig.ts","../src/engine/ui/messagePanel/SbMessagePanelSingleton.ts","../src/engine/ui/messagePanel/SbMessagePanel.ts","../src/engine/ui/passcode/SbPasscodePanelEvents.ts","../src/utils/math/RandomIntegerInclusive.ts","../src/engine/ui/passcode/challengeExpression/ChallengeExpression.ts","../src/engine/ui/passcode/SbPasscodePanel.ts","../src/utils/createjs/objects/sliders/CjsCreateSlider.ts","../src/engine/ui/settings/subPanels/SbSettingsSubPanel.ts","../src/engine/ui/settings/subPanels/audio/SbSettingsAudioSubPanel.ts","../src/engine/ui/events/SbRadioGroupEvents.ts","../src/utils/createjs/objects/buttons/CjsRadioGroup.ts","../src/engine/ui/settings/subPanels/devices/SbSettingsDevicesSubPanel.ts","../src/engine/ui/settings/SbCaptionHiliteColorCheckbox.ts","../src/engine/ui/settings/subPanels/storybook/SbSettingsStorybookSubPanel.ts","../src/engine/ui/settings/events/SbSettingsPanelEvents.ts","../src/engine/ui/settings/SbSettingsPanel.ts","../src/engine/ui/content/SbPauseConfig.ts","../src/engine/ui/content/SbContentVideo.ts","../src/engine/utils/SbContentHandlerEvents.ts","../src/engine/utils/videoMath/SbVideoMath.ts","../src/engine/ui/main/nav/SbNavToParam.ts","../src/engine/config/nav/SbNavActions.ts","../src/engine/utils/SbContentHandler.ts","../src/utils/web/window/GetWindowQueryParamValue.ts","../src/engine/data/SbQueryParams.ts","../src/engine/utils/docPrep/SbCompLib.ts","../src/engine/utils/docPrep/SbMakeResponsive.ts","../src/engine/utils/docPrep/SbDocPrepUtil.ts","../src/utils/object/GetBooleanValue.ts","../src/engine/config/engine/utils/SbEngineButtonsMenuConfig.ts","../src/engine/config/engine/utils/SbResolveEngineConfig.ts","../src/utils/math/IsEven.ts","../src/utils/math/IsOdd.ts","../src/engine/ui/buttonsMenu/config/utils/SbHiliteIncorrectConfig.ts","../src/engine/ui/buttonsMenu/config/utils/SbHiliteIncorrect.ts","../src/engine/ui/buttonsMenu/config/SbButtonsMenuButtonConfig.ts","../src/engine/ui/buttonsMenu/events/SbButtonsMenuEvents.ts","../src/engine/ui/buttonsMenu/SbButtonsMenu.ts","../src/engine/ui/main/nav/SbIsPresentNavConfig.ts","../src/engine/ui/main/nav/SbPresentNavConfig.ts","../src/engine/data/SbDebugData.ts","../src/utils/adobeAnimate/ValidateResourceName.ts","../src/engine/audio/SbPlaySound.ts","../src/engine/utils/SbPlayVoice.ts","../src/utils/number/IsValidPositiveZeroNumber.ts","../src/utils/createjs/objects/ObjectUtils.ts","../src/utils/number/IsValidPositiveNumber.ts","../src/engine/ui/pressIndicator/SbPressIndicator.ts","../src/engine/ui/pressIndicator/SbPressIndicatorManager.ts","../src/engine/utils/saveSettings/SbSaveSettings.ts","../src/engine/data/SbSaveSettingsCommonConfig.ts","../src/engine/ui/devices/SbDevicesPanel.ts","../src/utils/timers/Wait.ts","../src/engine/ui/tiggieIntro/SbTiggieIntro.ts","../src/engine/data/userPerformance/SbUserPerformanceData.ts","../src/utils/createjs/audio/CjsDestroySound.ts","../src/engine/StorybookEngine.ts","../src/engine/storybookScene/utils/SbBaseSceneHandler.ts","../src/sceneHandlers/lucyPee/scene2/LucyS2Quiz.ts","../src/sceneHandlers/lucyPee/scene2/LucyS2WherePee.ts","../src/sceneHandlers/lucyPee/scene2/LucyS2EnterBathroom.ts","../src/sceneHandlers/lucyPee/scene2/LucyPeeScene2Handler.ts","../src/index.ts"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","const CjsEvents = {\n  CHANGE: 'change',\n  CLICK: 'click',\n  COMPLETE: 'complete',\n  ERROR: 'error',\n  FILE_LOAD: 'fileload',\n  MOUSE_DOWN: 'mousedown',\n  PRESS_MOVE: 'pressmove',\n  PRESS_UP: 'pressup',\n  PROGRESS: 'progress',\n  TICK: 'tick',\n} as const;\n\ntype CjsEvent = typeof CjsEvents[keyof typeof CjsEvents];\n\ntype CjsBaseEventType = createjs.Event | createjs.ErrorEvent | createjs.ProgressEvent\n| createjs.TickerEvent;\n\nconst CjsEventsArray = Object.values(CjsEvents) as ReadonlyArray<CjsEvent>;\n\nexport {\n  CjsBaseEventType,\n  CjsEvent,\n  CjsEvents,\n  CjsEventsArray,\n};\n","export default function CjsGetDisplayObject<\n  D extends createjs.DisplayObject = createjs.DisplayObject\n>(container: createjs.Container, name: string): D | undefined {\n  const object = container.getChildByName(name);\n  return (object ? object as D : undefined);\n}\n","import CjsGetDisplayObject from './CjsGetDisplayObject';\n\nexport default function CjsGetMovieClip<T extends createjs.MovieClip = createjs.MovieClip>(\n  container: createjs.Container,\n  name: string,\n): T | undefined {\n  const clip = CjsGetDisplayObject(container, name);\n  return (clip instanceof createjs.MovieClip ? clip as T : undefined);\n}\n","import CjsLabel from '../objects/buttons/CjsLabel';\n\nfunction CjsGetMovieClipLabels(movieClip: createjs.MovieClip): CjsLabel[] {\n  return (movieClip.labels as unknown as CjsLabel[]);\n}\n\nexport default CjsGetMovieClipLabels;\n","import DataObject from './DataObject';\n\nfunction IsObject(value: unknown): value is DataObject {\n  return (value === Object(value));\n}\n\nexport default IsObject;\n","import CloneObject from '../../object/CloneObject';\nimport IsObject from '../../object/IsObject';\n\nfunction CloneArray<T>(source: T[]): T[] {\n  const out: T[] = [];\n  source.forEach((value) => {\n    if (IsObject(value)) {\n      out.push(CloneObject(value) as T);\n    } else if (Array.isArray(value)) {\n      out.push(CloneArray(value) as T);\n    } else {\n      out.push(value);\n    }\n  });\n\n  return (out);\n}\n\nexport default CloneArray;\n","import DataObject from './DataObject';\n\nfunction IsPlainObject(value: unknown): value is DataObject {\n  return (typeof value === 'object' && value !== null && value.constructor === Object);\n}\n\nexport default IsPlainObject;\n","import CloneArray from '../collections/arrays/CloneArray';\nimport DataObject from './DataObject';\nimport IsPlainObject from './IsPlainObject';\nimport RecursiveReadonly from './RecursiveReadonly';\n\nfunction CloneObject<T extends DataObject>(source: RecursiveReadonly<T>): T {\n  const out: DataObject = {};\n\n  Object.keys(source).forEach((key) => {\n    const value = source[key];\n    if (Array.isArray(value)) {\n      out[key] = CloneArray(value);\n    } else if (IsPlainObject(value)) {\n      out[key] = CloneObject(value);\n    } else {\n      out[key] = value;\n    }\n  });\n\n  return (out as T);\n}\n\nexport default CloneObject;\n","import IMovieClipDisplayCtor from '../../utils/adobeAnimate/IMovieClipDisplayCtor';\n\ninterface ISbAnCompLibClasses {\n  CloseXButtonHitBoxDisplay: IMovieClipDisplayCtor;\n  MessagePanelCloseDisplay: IMovieClipDisplayCtor;\n  MessagePanelYNDisplay: IMovieClipDisplayCtor;\n  NextButtonDisplay: IMovieClipDisplayCtor;\n  PasscodeButtonBackDisplay: IMovieClipDisplayCtor;\n  PrevtButtonDisplay: IMovieClipDisplayCtor;\n  RadioButtonHitBoxDisplay: IMovieClipDisplayCtor;\n  RestartButtonDisplay: IMovieClipDisplayCtor;\n  SettingsButtonDisplay: IMovieClipDisplayCtor;\n  TapMouseButtonStateDisplay: IMovieClipDisplayCtor;\n  TutorialNextNavButtonHitDisplay: IMovieClipDisplayCtor;\n  TutorialSkipNavButtonHitDisplay: IMovieClipDisplayCtor;\n}\n\ninterface ISbAnLibManifestEntry {\n  id: string\n  src: string;\n}\n\ninterface ISbAnCompLibProperties {\n  color: string;\n  fps: number;\n  height: number;\n  id: string;\n  manifest: ISbAnLibManifestEntry[];\n  opacity: number;\n  width: number;\n}\n\ninterface ISbAnCompLibHeader {\n  contentVideo?: HTMLVideoElement;\n  properties: ISbAnCompLibProperties;\n}\n\ninterface ISbAnCompLib extends ISbAnCompLibHeader, ISbAnCompLibClasses {}\n\nconst SbSoundTypeIds = {\n  Bgm: 'bgm',\n  Sound: 'snd',\n  Voice: 'voc',\n} as const;\n\ntype SbSoundTypeId = typeof SbSoundTypeIds[keyof typeof SbSoundTypeIds];\n\nconst SbAudioIds = {\n  BigButtonPres: 'sndbigbuttonpress',\n  Logo: 'sndlogo',\n  RadioHeavyButtonPress: 'sndradioheavybuttonpress',\n  RadioLightButtonPress: 'sndradiolightbuttonpress',\n  SyncTest: 'sndsynctest',\n  VolumeTest: 'sndvolumetestwav',\n} as const;\n\ntype SbAudioId = typeof SbAudioIds[keyof typeof SbAudioIds];\n\ntype SbAssetLib = {\n  readonly animateClasses: ISbAnCompLibClasses;\n  readonly audioIds: typeof SbAudioIds;\n  readonly header: ISbAnCompLibHeader;\n};\n\nconst SbFrameLabels = {\n  SbInit: 'sbinit',\n  Start: 'start',\n} as const;\n\nexport {\n  ISbAnCompLib,\n  ISbAnCompLibClasses,\n  ISbAnCompLibHeader,\n  ISbAnCompLibProperties,\n  ISbAnLibManifestEntry,\n  SbAssetLib,\n  SbAudioId,\n  SbAudioIds,\n  SbFrameLabels,\n  SbSoundTypeId,\n  SbSoundTypeIds,\n};\n","const SbDesignData = Object.freeze({\n  AreSettingsProtected: true,\n  CaptionHilites: {\n    Colors: [\n      '#FFF450',\n      '#B9E5FB',\n      '#C6DD7F',\n      '#ED1846',\n    ] as const,\n\n    Stroke: {\n      Color: '#333333',\n      Thickness: 2,\n    } as const,\n  },\n\n  ContentVideoId: 'contentVideo',\n\n  ExitRedirectDelayMs: 3000,\n\n  HtmlElementIds: {\n    AnimationContainer: 'animation_container',\n    Canvas: 'canvas',\n    DomOverlayContainer: 'dom_overlay_container',\n    ProgressBarFill: 'progressBarFill',\n  } as const,\n\n  IntroCompleteWaitDelayMs: 1500,\n  TutorialIntroDelayMs: 2500,\n  Version: '2024.03.04.01',\n});\n\nexport default SbDesignData;\n","const SbMessagePanelButtonIds = {\n  Cancel: 'cancel',\n  Close: 'close',\n  No: 'no',\n  Yes: 'yes',\n} as const;\n\ntype SbMessagePanelButtonId = typeof SbMessagePanelButtonIds[keyof typeof SbMessagePanelButtonIds];\n\nconst SbMessagePanelButtonIdsArray = Object.values(SbMessagePanelButtonIds) as\n  ReadonlyArray<SbMessagePanelButtonId>;\n\nexport {\n  SbMessagePanelButtonId,\n  SbMessagePanelButtonIds,\n  SbMessagePanelButtonIdsArray,\n};\n","const SbInputDevices = {\n  DualSwitch: 'dualSwitch',\n  EyeTracker: 'eyeTracker',\n  SingleSwitch: 'singleSwitch',\n  TapMouse: 'tapMouse',\n} as const;\n\ntype SbInputDevice = typeof SbInputDevices[keyof typeof SbInputDevices];\n\nconst SbInputDevicesArray = Object.values(SbInputDevices) as ReadonlyArray<SbInputDevice>;\n\nexport {\n  SbInputDevice,\n  SbInputDevices,\n  SbInputDevicesArray,\n};\n","const SbNavToDirections = {\n  Prev: 'prev',\n  Next: 'next',\n  Restart: 'restart',\n} as const;\n\ntype SbNavToDirection = typeof SbNavToDirections[\n  keyof typeof SbNavToDirections\n];\n\nconst SbNavToDirectionsArray = Object.values(SbNavToDirections) as ReadonlyArray<SbNavToDirection>;\n\nexport {\n  SbNavToDirection,\n  SbNavToDirections,\n  SbNavToDirectionsArray,\n};\n","import RecursiveReadonly from '../../../utils/object/RecursiveReadonly';\nimport { SbMessagePanelButtonIds } from '../../ui/messagePanel/SbMessagePanelButtonIds';\nimport { SbInputDevices } from '../SbInputDevices';\nimport { SbNavToDirections } from '../../ui/main/nav/SbNavToDirections';\nimport SbDefaultsType from './SbDefaultsType';\n\nconst SbDefaults: RecursiveReadonly<SbDefaultsType> = {\n  EngineConfig: {\n    buttonsMenu: null,\n    contentVideoUrl: '',\n    exitRedirectUrl: '',\n    navButtonsSoundKey: '',\n    pressIndicatorDelay: 2500,\n    sceneHandler: null,\n    shouldSkipIntro: false,\n    singleDeviceDelayMs: 3000,\n    startCallback: null,\n    startCallbackContext: undefined,\n    shouldUseVideoBuffer: true,\n    shouldWaitForNavSounds: false,\n    storybookId: '',\n    videoFps: 30,\n  },\n\n  MessagePanel: {\n    AutoClose: {\n      ButtonId: SbMessagePanelButtonIds.Close,\n      DelayMs: 1250,\n    },\n\n    DimBack: {\n      Alpha: 0.4,\n      Color: '#000',\n    },\n  },\n\n  SelectedNavButtonId: SbNavToDirections.Next,\n\n  Settings: {\n    audio: {\n      bgm: {\n        isEnabled: true,\n        volume: 0.5,\n      },\n\n      sound: {\n        isEnabled: true,\n        volume: 1.0,\n      },\n\n      voice: {\n        isEnabled: true,\n        volume: 1.0,\n      },\n    },\n\n    device: {\n      inputDevice: SbInputDevices.TapMouse,\n    },\n\n    hasCompletedTutorial: false,\n\n    storybook: {\n      aacSymbolsEnabled: true,\n      captionsEnabled: true,\n      captionHiliteColorIndex: 0,\n      captionHilitesEnabled: true,\n      helpfulTipsEnabled: true,\n    },\n\n    storybooksStates: {},\n  },\n};\n\nexport default SbDefaults;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\nvar test = {\n\tfoo: {}\n};\n\nvar $Object = Object;\n\nmodule.exports = function hasProto() {\n\treturn { __proto__: test }.foo === test.foo && !({ __proto__: null } instanceof $Object);\n};\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {(o: {}, p: PropertyKey) => p is keyof o} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\tif ($defineProperty) {\n\t\ttry {\n\t\t\t$defineProperty({}, 'a', { value: 1 });\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// IE 8 has a broken defineProperty\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn false;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!hasPropertyDescriptors()) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar hasPropertyDescriptors = require('has-property-descriptors')();\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $defineProperty = hasPropertyDescriptors && GetIntrinsic('%Object.defineProperty%', true);\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nvar $SyntaxError = GetIntrinsic('%SyntaxError%');\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nvar gopd = require('gopd');\n\n/** @type {(obj: Record<PropertyKey, unknown>, property: PropertyKey, value: unknown, nonEnumerable?: boolean | null, nonWritable?: boolean | null, nonConfigurable?: boolean | null, loose?: boolean) => void} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $floor = GetIntrinsic('%Math.floor%');\n\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(fn, 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(fn, 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bind/callBound');\nvar toObject = Object;\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = toObject(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = toObject(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && (Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\nmodule.exports = function shimAssign() {\n\tvar polyfill = getPolyfill();\n\tdefine(\n\t\tObject,\n\t\t{ assign: polyfill },\n\t\t{ assign: function () { return Object.assign !== polyfill; } }\n\t);\n\treturn polyfill;\n};\n","'use strict';\n\nvar defineProperties = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind.apply(getPolyfill());\n// eslint-disable-next-line no-unused-vars\nvar bound = function assign(target, source1) {\n\treturn polyfill(Object, arguments);\n};\n\ndefineProperties(bound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = bound;\n","'use strict';\n\nvar functionsHaveNames = function functionsHaveNames() {\n\treturn typeof function f() {}.name === 'string';\n};\n\nvar gOPD = Object.getOwnPropertyDescriptor;\nif (gOPD) {\n\ttry {\n\t\tgOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\tgOPD = null;\n\t}\n}\n\nfunctionsHaveNames.functionsHaveConfigurableNames = function functionsHaveConfigurableNames() {\n\tif (!functionsHaveNames() || !gOPD) {\n\t\treturn false;\n\t}\n\tvar desc = gOPD(function () {}, 'name');\n\treturn !!desc && !!desc.configurable;\n};\n\nvar $bind = Function.prototype.bind;\n\nfunctionsHaveNames.boundFunctionsHaveNames = function boundFunctionsHaveNames() {\n\treturn functionsHaveNames() && typeof $bind === 'function' && function f() {}.bind().name !== '';\n};\n\nmodule.exports = functionsHaveNames;\n","'use strict';\n\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar functionsHaveConfigurableNames = require('functions-have-names').functionsHaveConfigurableNames();\n\nvar $TypeError = TypeError;\n\nmodule.exports = function setFunctionName(fn, name) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\tif (!loose || functionsHaveConfigurableNames) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(fn, 'name', name, true, true);\n\t\t} else {\n\t\t\tdefine(fn, 'name', name);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar setFunctionName = require('set-function-name');\n\nvar $Object = Object;\nvar $TypeError = TypeError;\n\nmodule.exports = setFunctionName(function flags() {\n\tif (this != null && this !== $Object(this)) {\n\t\tthrow new $TypeError('RegExp.prototype.flags getter called on non-object');\n\t}\n\tvar result = '';\n\tif (this.hasIndices) {\n\t\tresult += 'd';\n\t}\n\tif (this.global) {\n\t\tresult += 'g';\n\t}\n\tif (this.ignoreCase) {\n\t\tresult += 'i';\n\t}\n\tif (this.multiline) {\n\t\tresult += 'm';\n\t}\n\tif (this.dotAll) {\n\t\tresult += 's';\n\t}\n\tif (this.unicode) {\n\t\tresult += 'u';\n\t}\n\tif (this.unicodeSets) {\n\t\tresult += 'v';\n\t}\n\tif (this.sticky) {\n\t\tresult += 'y';\n\t}\n\treturn result;\n}, 'get flags', true);\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar $gOPD = Object.getOwnPropertyDescriptor;\n\nmodule.exports = function getPolyfill() {\n\tif (supportsDescriptors && (/a/mig).flags === 'gim') {\n\t\tvar descriptor = $gOPD(RegExp.prototype, 'flags');\n\t\tif (\n\t\t\tdescriptor\n\t\t\t&& typeof descriptor.get === 'function'\n\t\t\t&& typeof RegExp.prototype.dotAll === 'boolean'\n\t\t\t&& typeof RegExp.prototype.hasIndices === 'boolean'\n\t\t) {\n\t\t\t/* eslint getter-return: 0 */\n\t\t\tvar calls = '';\n\t\t\tvar o = {};\n\t\t\tObject.defineProperty(o, 'hasIndices', {\n\t\t\t\tget: function () {\n\t\t\t\t\tcalls += 'd';\n\t\t\t\t}\n\t\t\t});\n\t\t\tObject.defineProperty(o, 'sticky', {\n\t\t\t\tget: function () {\n\t\t\t\t\tcalls += 'y';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (calls === 'dy') {\n\t\t\t\treturn descriptor.get;\n\t\t\t}\n\t\t}\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar getPolyfill = require('./polyfill');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar TypeErr = TypeError;\nvar getProto = Object.getPrototypeOf;\nvar regex = /a/;\n\nmodule.exports = function shimFlags() {\n\tif (!supportsDescriptors || !getProto) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tvar polyfill = getPolyfill();\n\tvar proto = getProto(regex);\n\tvar descriptor = gOPD(proto, 'flags');\n\tif (!descriptor || descriptor.get !== polyfill) {\n\t\tdefineProperty(proto, 'flags', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tget: polyfill\n\t\t});\n\t}\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar flagsBound = callBind(getPolyfill());\n\ndefine(flagsBound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = flagsBound;\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","export default {}","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = require('./util.inspect');\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        if (mapForEach) {\n            mapForEach.call(obj, function (value, key) {\n                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n            });\n        }\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        if (setForEach) {\n            setForEach.call(obj, function (value) {\n                setParts.push(inspect(value, obj));\n            });\n        }\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other\n    /* eslint-env browser */\n    if (typeof window !== 'undefined' && obj === window) {\n        return '{ [object Window] }';\n    }\n    if (obj === global) {\n        return '{ [object globalThis] }';\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n * This function traverses the list returning the node corresponding to the\n * given key.\n *\n * That node is also moved to the head of the list, so that if it's accessed\n * again we don't need to traverse the whole list. By doing so, all the recently\n * used nodes can be accessed relatively quickly.\n */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\tfor (var prev = list, curr; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\tcurr.next = list.next;\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = { // eslint-disable-line no-param-reassign\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t};\n\t}\n};\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\nmodule.exports = function getSideChannel() {\n\tvar $wm;\n\tvar $m;\n\tvar $o;\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Initialize the linked list as an empty node, so that we don't have\n\t\t\t\t\t * to special-case handling of the first node: we can always refer to\n\t\t\t\t\t * it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t */\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar hasOwn = require('hasown');\nvar channel = require('side-channel')();\n\nvar $TypeError = GetIntrinsic('%TypeError%');\n\nvar SLOT = {\n\tassert: function (O, slot) {\n\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\tthrow new $TypeError('`O` is not an object');\n\t\t}\n\t\tif (typeof slot !== 'string') {\n\t\t\tthrow new $TypeError('`slot` must be a string');\n\t\t}\n\t\tchannel.assert(O);\n\t\tif (!SLOT.has(O, slot)) {\n\t\t\tthrow new $TypeError('`' + slot + '` is not present on `O`');\n\t\t}\n\t},\n\tget: function (O, slot) {\n\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\tthrow new $TypeError('`O` is not an object');\n\t\t}\n\t\tif (typeof slot !== 'string') {\n\t\t\tthrow new $TypeError('`slot` must be a string');\n\t\t}\n\t\tvar slots = channel.get(O);\n\t\treturn slots && slots['$' + slot];\n\t},\n\thas: function (O, slot) {\n\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\tthrow new $TypeError('`O` is not an object');\n\t\t}\n\t\tif (typeof slot !== 'string') {\n\t\t\tthrow new $TypeError('`slot` must be a string');\n\t\t}\n\t\tvar slots = channel.get(O);\n\t\treturn !!slots && hasOwn(slots, '$' + slot);\n\t},\n\tset: function (O, slot, V) {\n\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\tthrow new $TypeError('`O` is not an object');\n\t\t}\n\t\tif (typeof slot !== 'string') {\n\t\t\tthrow new $TypeError('`slot` must be a string');\n\t\t}\n\t\tvar slots = channel.get(O);\n\t\tif (!slots) {\n\t\t\tslots = {};\n\t\t\tchannel.set(O, slots);\n\t\t}\n\t\tslots['$' + slot] = V;\n\t}\n};\n\nif (Object.freeze) {\n\tObject.freeze(SLOT);\n}\n\nmodule.exports = SLOT;\n","'use strict';\n\nvar SLOT = require('internal-slot');\n\nvar $SyntaxError = SyntaxError;\nvar $StopIteration = typeof StopIteration === 'object' ? StopIteration : null;\n\nmodule.exports = function getStopIterationIterator(origIterator) {\n\tif (!$StopIteration) {\n\t\tthrow new $SyntaxError('this environment lacks StopIteration');\n\t}\n\n\tSLOT.set(origIterator, '[[Done]]', false);\n\n\tvar siIterator = {\n\t\tnext: function next() {\n\t\t\tvar iterator = SLOT.get(this, '[[Iterator]]');\n\t\t\tvar done = SLOT.get(iterator, '[[Done]]');\n\t\t\ttry {\n\t\t\t\treturn {\n\t\t\t\t\tdone: done,\n\t\t\t\t\tvalue: done ? void undefined : iterator.next()\n\t\t\t\t};\n\t\t\t} catch (e) {\n\t\t\t\tSLOT.set(iterator, '[[Done]]', true);\n\t\t\t\tif (e !== $StopIteration) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t\tvalue: void undefined\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t};\n\n\tSLOT.set(siIterator, '[[Iterator]]', origIterator);\n\n\treturn siIterator;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\nvar strValue = String.prototype.valueOf;\nvar tryStringObject = function tryStringObject(value) {\n\ttry {\n\t\tstrValue.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar strClass = '[object String]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isString(value) {\n\tif (typeof value === 'string') {\n\t\treturn true;\n\t}\n\tif (typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryStringObject(value) : toStr.call(value) === strClass;\n};\n","'use strict';\n\nvar $Map = typeof Map === 'function' && Map.prototype ? Map : null;\nvar $Set = typeof Set === 'function' && Set.prototype ? Set : null;\n\nvar exported;\n\nif (!$Map) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isMap(x) {\n\t\t// `Map` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $Map ? Map.prototype.has : null;\nvar $setHas = $Set ? Set.prototype.has : null;\nif (!exported && !$mapHas) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isMap(x) {\n\t\t// `Map` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\nmodule.exports = exported || function isMap(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$mapHas.call(x);\n\t\tif ($setHas) {\n\t\t\ttry {\n\t\t\t\t$setHas.call(x);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn x instanceof $Map; // core-js workaround, pre-v2.5.0\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\nvar $Map = typeof Map === 'function' && Map.prototype ? Map : null;\nvar $Set = typeof Set === 'function' && Set.prototype ? Set : null;\n\nvar exported;\n\nif (!$Set) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isSet(x) {\n\t\t// `Set` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $Map ? Map.prototype.has : null;\nvar $setHas = $Set ? Set.prototype.has : null;\nif (!exported && !$setHas) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isSet(x) {\n\t\t// `Set` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\nmodule.exports = exported || function isSet(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$setHas.call(x);\n\t\tif ($mapHas) {\n\t\t\ttry {\n\t\t\t\t$mapHas.call(x);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn x instanceof $Set; // core-js workaround, pre-v2.5.0\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\n/* eslint global-require: 0 */\n// the code is structured this way so that bundlers can\n// alias out `has-symbols` to `() => true` or `() => false` if your target\n// environments' Symbol capabilities are known, and then use\n// dead code elimination on the rest of this module.\n//\n// Similarly, `isarray` can be aliased to `Array.isArray` if\n// available in all target environments.\n\nvar isArguments = require('is-arguments');\nvar getStopIterationIterator = require('stop-iteration-iterator');\n\nif (require('has-symbols')() || require('has-symbols/shams')()) {\n\tvar $iterator = Symbol.iterator;\n\t// Symbol is available natively or shammed\n\t// natively:\n\t//  - Chrome >= 38\n\t//  - Edge 12-14?, Edge >= 15 for sure\n\t//  - FF >= 36\n\t//  - Safari >= 9\n\t//  - node >= 0.12\n\tmodule.exports = function getIterator(iterable) {\n\t\t// alternatively, `iterable[$iterator]?.()`\n\t\tif (iterable != null && typeof iterable[$iterator] !== 'undefined') {\n\t\t\treturn iterable[$iterator]();\n\t\t}\n\t\tif (isArguments(iterable)) {\n\t\t\t// arguments objects lack Symbol.iterator\n\t\t\t// - node 0.12\n\t\t\treturn Array.prototype[$iterator].call(iterable);\n\t\t}\n\t};\n} else {\n\t// Symbol is not available, native or shammed\n\tvar isArray = require('isarray');\n\tvar isString = require('is-string');\n\tvar GetIntrinsic = require('get-intrinsic');\n\tvar $Map = GetIntrinsic('%Map%', true);\n\tvar $Set = GetIntrinsic('%Set%', true);\n\tvar callBound = require('call-bind/callBound');\n\tvar $arrayPush = callBound('Array.prototype.push');\n\tvar $charCodeAt = callBound('String.prototype.charCodeAt');\n\tvar $stringSlice = callBound('String.prototype.slice');\n\n\tvar advanceStringIndex = function advanceStringIndex(S, index) {\n\t\tvar length = S.length;\n\t\tif ((index + 1) >= length) {\n\t\t\treturn index + 1;\n\t\t}\n\n\t\tvar first = $charCodeAt(S, index);\n\t\tif (first < 0xD800 || first > 0xDBFF) {\n\t\t\treturn index + 1;\n\t\t}\n\n\t\tvar second = $charCodeAt(S, index + 1);\n\t\tif (second < 0xDC00 || second > 0xDFFF) {\n\t\t\treturn index + 1;\n\t\t}\n\n\t\treturn index + 2;\n\t};\n\n\tvar getArrayIterator = function getArrayIterator(arraylike) {\n\t\tvar i = 0;\n\t\treturn {\n\t\t\tnext: function next() {\n\t\t\t\tvar done = i >= arraylike.length;\n\t\t\t\tvar value;\n\t\t\t\tif (!done) {\n\t\t\t\t\tvalue = arraylike[i];\n\t\t\t\t\ti += 1;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdone: done,\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t};\n\n\tvar getNonCollectionIterator = function getNonCollectionIterator(iterable, noPrimordialCollections) {\n\t\tif (isArray(iterable) || isArguments(iterable)) {\n\t\t\treturn getArrayIterator(iterable);\n\t\t}\n\t\tif (isString(iterable)) {\n\t\t\tvar i = 0;\n\t\t\treturn {\n\t\t\t\tnext: function next() {\n\t\t\t\t\tvar nextIndex = advanceStringIndex(iterable, i);\n\t\t\t\t\tvar value = $stringSlice(iterable, i, nextIndex);\n\t\t\t\t\ti = nextIndex;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdone: nextIndex > iterable.length,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// es6-shim and es-shims' es-map use a string \"_es6-shim iterator_\" property on different iterables, such as MapIterator.\n\t\tif (noPrimordialCollections && typeof iterable['_es6-shim iterator_'] !== 'undefined') {\n\t\t\treturn iterable['_es6-shim iterator_']();\n\t\t}\n\t};\n\n\tif (!$Map && !$Set) {\n\t\t// the only language iterables are Array, String, arguments\n\t\t// - Safari <= 6.0\n\t\t// - Chrome < 38\n\t\t// - node < 0.12\n\t\t// - FF < 13\n\t\t// - IE < 11\n\t\t// - Edge < 11\n\n\t\tmodule.exports = function getIterator(iterable) {\n\t\t\tif (iterable != null) {\n\t\t\t\treturn getNonCollectionIterator(iterable, true);\n\t\t\t}\n\t\t};\n\t} else {\n\t\t// either Map or Set are available, but Symbol is not\n\t\t// - es6-shim on an ES5 browser\n\t\t// - Safari 6.2 (maybe 6.1?)\n\t\t// - FF v[13, 36)\n\t\t// - IE 11\n\t\t// - Edge 11\n\t\t// - Safari v[6, 9)\n\n\t\tvar isMap = require('is-map');\n\t\tvar isSet = require('is-set');\n\n\t\t// Firefox >= 27, IE 11, Safari 6.2 - 9, Edge 11, es6-shim in older envs, all have forEach\n\t\tvar $mapForEach = callBound('Map.prototype.forEach', true);\n\t\tvar $setForEach = callBound('Set.prototype.forEach', true);\n\t\tif (typeof process === 'undefined' || !process.versions || !process.versions.node) { // \"if is not node\"\n\n\t\t\t// Firefox 17 - 26 has `.iterator()`, whose iterator `.next()` either\n\t\t\t// returns a value, or throws a StopIteration object. These browsers\n\t\t\t// do not have any other mechanism for iteration.\n\t\t\tvar $mapIterator = callBound('Map.prototype.iterator', true);\n\t\t\tvar $setIterator = callBound('Set.prototype.iterator', true);\n\t\t}\n\t\t// Firefox 27-35, and some older es6-shim versions, use a string \"@@iterator\" property\n\t\t// this returns a proper iterator object, so we should use it instead of forEach.\n\t\t// newer es6-shim versions use a string \"_es6-shim iterator_\" property.\n\t\tvar $mapAtAtIterator = callBound('Map.prototype.@@iterator', true) || callBound('Map.prototype._es6-shim iterator_', true);\n\t\tvar $setAtAtIterator = callBound('Set.prototype.@@iterator', true) || callBound('Set.prototype._es6-shim iterator_', true);\n\n\t\tvar getCollectionIterator = function getCollectionIterator(iterable) {\n\t\t\tif (isMap(iterable)) {\n\t\t\t\tif ($mapIterator) {\n\t\t\t\t\treturn getStopIterationIterator($mapIterator(iterable));\n\t\t\t\t}\n\t\t\t\tif ($mapAtAtIterator) {\n\t\t\t\t\treturn $mapAtAtIterator(iterable);\n\t\t\t\t}\n\t\t\t\tif ($mapForEach) {\n\t\t\t\t\tvar entries = [];\n\t\t\t\t\t$mapForEach(iterable, function (v, k) {\n\t\t\t\t\t\t$arrayPush(entries, [k, v]);\n\t\t\t\t\t});\n\t\t\t\t\treturn getArrayIterator(entries);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isSet(iterable)) {\n\t\t\t\tif ($setIterator) {\n\t\t\t\t\treturn getStopIterationIterator($setIterator(iterable));\n\t\t\t\t}\n\t\t\t\tif ($setAtAtIterator) {\n\t\t\t\t\treturn $setAtAtIterator(iterable);\n\t\t\t\t}\n\t\t\t\tif ($setForEach) {\n\t\t\t\t\tvar values = [];\n\t\t\t\t\t$setForEach(iterable, function (v) {\n\t\t\t\t\t\t$arrayPush(values, v);\n\t\t\t\t\t});\n\t\t\t\t\treturn getArrayIterator(values);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tmodule.exports = function getIterator(iterable) {\n\t\t\treturn getCollectionIterator(iterable) || getNonCollectionIterator(iterable);\n\t\t};\n\t}\n}\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","'use strict';\n\nvar possibleNames = [\n\t'BigInt64Array',\n\t'BigUint64Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Int8Array',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray'\n];\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\nmodule.exports = function availableTypedArrays() {\n\tvar out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar found = false;\n\tforEach(cache, function (getter, typedArray) {\n\t\tif (!found) {\n\t\t\ttry {\n\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t}\n\t\t\t} catch (e) { /**/ }\n\t\t}\n\t});\n\treturn found;\n};\n\nvar trySlices = function tryAllSlices(value) {\n\tvar found = false;\n\tforEach(cache, function (getter, name) {\n\t\tif (!found) {\n\t\t\ttry {\n\t\t\t\tgetter(value);\n\t\t\t\tfound = $slice(name, 1);\n\t\t\t} catch (e) { /**/ }\n\t\t}\n\t});\n\treturn found;\n};\n\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar GetIntrinsic = require('get-intrinsic');\nvar isTypedArray = require('is-typed-array');\n\nvar $ArrayBuffer = GetIntrinsic('ArrayBuffer', true);\nvar $Float32Array = GetIntrinsic('Float32Array', true);\nvar $byteLength = callBound('ArrayBuffer.prototype.byteLength', true);\n\n// in node 0.10, ArrayBuffers have no prototype methods, but have an own slot-checking `slice` method\nvar abSlice = $ArrayBuffer && !$byteLength && new $ArrayBuffer().slice;\nvar $abSlice = abSlice && callBind(abSlice);\n\nmodule.exports = $byteLength || $abSlice\n\t? function isArrayBuffer(obj) {\n\t\tif (!obj || typeof obj !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tif ($byteLength) {\n\t\t\t\t$byteLength(obj);\n\t\t\t} else {\n\t\t\t\t$abSlice(obj, 0);\n\t\t\t}\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t: $Float32Array\n\t\t// in node 0.8, ArrayBuffers have no prototype or own methods\n\t\t? function IsArrayBuffer(obj) {\n\t\t\ttry {\n\t\t\t\treturn (new $Float32Array(obj)).buffer === obj && !isTypedArray(obj);\n\t\t\t} catch (e) {\n\t\t\t\treturn typeof obj === 'object' && e.name === 'RangeError';\n\t\t\t}\n\t\t}\n\t\t: function isArrayBuffer(obj) { // eslint-disable-line no-unused-vars\n\t\t\treturn false;\n\t\t};\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateGetDayCall(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar has;\nvar $exec;\nvar isRegexMarker;\nvar badStringifier;\n\nif (hasToStringTag) {\n\thas = callBound('Object.prototype.hasOwnProperty');\n\t$exec = callBound('RegExp.prototype.exec');\n\tisRegexMarker = {};\n\n\tvar throwRegexMarker = function () {\n\t\tthrow isRegexMarker;\n\t};\n\tbadStringifier = {\n\t\ttoString: throwRegexMarker,\n\t\tvalueOf: throwRegexMarker\n\t};\n\n\tif (typeof Symbol.toPrimitive === 'symbol') {\n\t\tbadStringifier[Symbol.toPrimitive] = throwRegexMarker;\n\t}\n}\n\nvar $toString = callBound('Object.prototype.toString');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar regexClass = '[object RegExp]';\n\nmodule.exports = hasToStringTag\n\t// eslint-disable-next-line consistent-return\n\t? function isRegex(value) {\n\t\tif (!value || typeof value !== 'object') {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar descriptor = gOPD(value, 'lastIndex');\n\t\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\t\tif (!hasLastIndexDataProperty) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t$exec(value, badStringifier);\n\t\t} catch (e) {\n\t\t\treturn e === isRegexMarker;\n\t\t}\n\t}\n\t: function isRegex(value) {\n\t\t// In older browsers, typeof regex incorrectly returns 'function'\n\t\tif (!value || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn $toString(value) === regexClass;\n\t};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\n\nvar $byteLength = callBound('SharedArrayBuffer.prototype.byteLength', true);\n\nmodule.exports = $byteLength\n\t? function isSharedArrayBuffer(obj) {\n\t\tif (!obj || typeof obj !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\t$byteLength(obj);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t: function isSharedArrayBuffer(obj) { // eslint-disable-line no-unused-vars\n\t\treturn false;\n\t};\n","'use strict';\n\nvar numToStr = Number.prototype.toString;\nvar tryNumberObject = function tryNumberObject(value) {\n\ttry {\n\t\tnumToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar numClass = '[object Number]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isNumberObject(value) {\n\tif (typeof value === 'number') {\n\t\treturn true;\n\t}\n\tif (typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryNumberObject(value) : toStr.call(value) === numClass;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar $boolToStr = callBound('Boolean.prototype.toString');\nvar $toString = callBound('Object.prototype.toString');\n\nvar tryBooleanObject = function booleanBrandCheck(value) {\n\ttry {\n\t\t$boolToStr(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar boolClass = '[object Boolean]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isBoolean(value) {\n\tif (typeof value === 'boolean') {\n\t\treturn true;\n\t}\n\tif (value === null || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag && Symbol.toStringTag in value ? tryBooleanObject(value) : $toString(value) === boolClass;\n};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = require('has-symbols')();\n\nif (hasSymbols) {\n\tvar symToStr = Symbol.prototype.toString;\n\tvar symStringRegex = /^Symbol\\(.*\\)$/;\n\tvar isSymbolObject = function isRealSymbolObject(value) {\n\t\tif (typeof value.valueOf() !== 'symbol') {\n\t\t\treturn false;\n\t\t}\n\t\treturn symStringRegex.test(symToStr.call(value));\n\t};\n\n\tmodule.exports = function isSymbol(value) {\n\t\tif (typeof value === 'symbol') {\n\t\t\treturn true;\n\t\t}\n\t\tif (toStr.call(value) !== '[object Symbol]') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\treturn isSymbolObject(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n} else {\n\n\tmodule.exports = function isSymbol(value) {\n\t\t// this environment does not support Symbols.\n\t\treturn false && value;\n\t};\n}\n","'use strict';\n\nvar $BigInt = typeof BigInt !== 'undefined' && BigInt;\n\nmodule.exports = function hasNativeBigInts() {\n\treturn typeof $BigInt === 'function'\n\t\t&& typeof BigInt === 'function'\n\t\t&& typeof $BigInt(42) === 'bigint' // eslint-disable-line no-magic-numbers\n\t\t&& typeof BigInt(42) === 'bigint'; // eslint-disable-line no-magic-numbers\n};\n","'use strict';\n\nvar hasBigInts = require('has-bigints')();\n\nif (hasBigInts) {\n\tvar bigIntValueOf = BigInt.prototype.valueOf;\n\tvar tryBigInt = function tryBigIntObject(value) {\n\t\ttry {\n\t\t\tbigIntValueOf.call(value);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t}\n\t\treturn false;\n\t};\n\n\tmodule.exports = function isBigInt(value) {\n\t\tif (\n\t\t\tvalue === null\n\t\t\t|| typeof value === 'undefined'\n\t\t\t|| typeof value === 'boolean'\n\t\t\t|| typeof value === 'string'\n\t\t\t|| typeof value === 'number'\n\t\t\t|| typeof value === 'symbol'\n\t\t\t|| typeof value === 'function'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof value === 'bigint') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn tryBigInt(value);\n\t};\n} else {\n\tmodule.exports = function isBigInt(value) {\n\t\treturn false && value;\n\t};\n}\n","'use strict';\n\nvar isString = require('is-string');\nvar isNumber = require('is-number-object');\nvar isBoolean = require('is-boolean-object');\nvar isSymbol = require('is-symbol');\nvar isBigInt = require('is-bigint');\n\n// eslint-disable-next-line consistent-return\nmodule.exports = function whichBoxedPrimitive(value) {\n\t// eslint-disable-next-line eqeqeq\n\tif (value == null || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\treturn null;\n\t}\n\tif (isString(value)) {\n\t\treturn 'String';\n\t}\n\tif (isNumber(value)) {\n\t\treturn 'Number';\n\t}\n\tif (isBoolean(value)) {\n\t\treturn 'Boolean';\n\t}\n\tif (isSymbol(value)) {\n\t\treturn 'Symbol';\n\t}\n\tif (isBigInt(value)) {\n\t\treturn 'BigInt';\n\t}\n};\n","'use strict';\n\nvar $WeakMap = typeof WeakMap === 'function' && WeakMap.prototype ? WeakMap : null;\nvar $WeakSet = typeof WeakSet === 'function' && WeakSet.prototype ? WeakSet : null;\n\nvar exported;\n\nif (!$WeakMap) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isWeakMap(x) {\n\t\t// `WeakMap` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $WeakMap ? $WeakMap.prototype.has : null;\nvar $setHas = $WeakSet ? $WeakSet.prototype.has : null;\nif (!exported && !$mapHas) {\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isWeakMap(x) {\n\t\t// `WeakMap` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\nmodule.exports = exported || function isWeakMap(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$mapHas.call(x, $mapHas);\n\t\tif ($setHas) {\n\t\t\ttry {\n\t\t\t\t$setHas.call(x, $setHas);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn x instanceof $WeakMap; // core-js workaround, pre-v3\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\n\nvar $WeakSet = GetIntrinsic('%WeakSet%', true);\n\nvar $setHas = callBound('WeakSet.prototype.has', true);\n\nif ($setHas) {\n\tvar $mapHas = callBound('WeakMap.prototype.has', true);\n\n\tmodule.exports = function isWeakSet(x) {\n\t\tif (!x || typeof x !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\t$setHas(x, $setHas);\n\t\t\tif ($mapHas) {\n\t\t\t\ttry {\n\t\t\t\t\t$mapHas(x, $mapHas);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn x instanceof $WeakSet; // core-js workaround, pre-v3\n\t\t} catch (e) {}\n\t\treturn false;\n\t};\n} else {\n\t// eslint-disable-next-line no-unused-vars\n\tmodule.exports = function isWeakSet(x) {\n\t\t// `WeakSet` does not exist, or does not have a `has` method\n\t\treturn false;\n\t};\n}\n","'use strict';\n\nvar isMap = require('is-map');\nvar isSet = require('is-set');\nvar isWeakMap = require('is-weakmap');\nvar isWeakSet = require('is-weakset');\n\nmodule.exports = function whichCollection(value) {\n\tif (value && typeof value === 'object') {\n\t\tif (isMap(value)) {\n\t\t\treturn 'Map';\n\t\t}\n\t\tif (isSet(value)) {\n\t\t\treturn 'Set';\n\t\t}\n\t\tif (isWeakMap(value)) {\n\t\t\treturn 'WeakMap';\n\t\t}\n\t\tif (isWeakSet(value)) {\n\t\t\treturn 'WeakSet';\n\t\t}\n\t}\n\treturn false;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar $byteLength = callBound('ArrayBuffer.prototype.byteLength', true);\n\nvar isArrayBuffer = require('is-array-buffer');\n\nmodule.exports = function byteLength(ab) {\n\tif (!isArrayBuffer(ab)) {\n\t\treturn NaN;\n\t}\n\treturn $byteLength ? $byteLength(ab) : ab.byteLength;\n}; // in node < 0.11, byteLength is an own nonconfigurable property\n","'use strict';\n\nvar assign = require('object.assign');\nvar callBound = require('call-bind/callBound');\nvar flags = require('regexp.prototype.flags');\nvar GetIntrinsic = require('get-intrinsic');\nvar getIterator = require('es-get-iterator');\nvar getSideChannel = require('side-channel');\nvar is = require('object-is');\nvar isArguments = require('is-arguments');\nvar isArray = require('isarray');\nvar isArrayBuffer = require('is-array-buffer');\nvar isDate = require('is-date-object');\nvar isRegex = require('is-regex');\nvar isSharedArrayBuffer = require('is-shared-array-buffer');\nvar objectKeys = require('object-keys');\nvar whichBoxedPrimitive = require('which-boxed-primitive');\nvar whichCollection = require('which-collection');\nvar whichTypedArray = require('which-typed-array');\nvar byteLength = require('array-buffer-byte-length');\n\nvar sabByteLength = callBound('SharedArrayBuffer.prototype.byteLength', true);\n\nvar $getTime = callBound('Date.prototype.getTime');\nvar gPO = Object.getPrototypeOf;\nvar $objToString = callBound('Object.prototype.toString');\n\nvar $Set = GetIntrinsic('%Set%', true);\nvar $mapHas = callBound('Map.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSize = callBound('Map.prototype.size', true);\nvar $setAdd = callBound('Set.prototype.add', true);\nvar $setDelete = callBound('Set.prototype.delete', true);\nvar $setHas = callBound('Set.prototype.has', true);\nvar $setSize = callBound('Set.prototype.size', true);\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L401-L414\nfunction setHasEqualElement(set, val1, opts, channel) {\n  var i = getIterator(set);\n  var result;\n  while ((result = i.next()) && !result.done) {\n    if (internalDeepEqual(val1, result.value, opts, channel)) { // eslint-disable-line no-use-before-define\n      // Remove the matching element to make sure we do not check that again.\n      $setDelete(set, result.value);\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L416-L439\nfunction findLooseMatchingPrimitives(prim) {\n  if (typeof prim === 'undefined') {\n    return null;\n  }\n  if (typeof prim === 'object') { // Only pass in null as object!\n    return void 0;\n  }\n  if (typeof prim === 'symbol') {\n    return false;\n  }\n  if (typeof prim === 'string' || typeof prim === 'number') {\n    // Loose equal entries exist only if the string is possible to convert to a regular number and not NaN.\n    return +prim === +prim; // eslint-disable-line no-implicit-coercion\n  }\n  return true;\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L449-L460\nfunction mapMightHaveLoosePrim(a, b, prim, item, opts, channel) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = $mapGet(b, altValue);\n  var looseOpts = assign({}, opts, { strict: false });\n  if (\n    (typeof curB === 'undefined' && !$mapHas(b, altValue))\n    // eslint-disable-next-line no-use-before-define\n    || !internalDeepEqual(item, curB, looseOpts, channel)\n  ) {\n    return false;\n  }\n  // eslint-disable-next-line no-use-before-define\n  return !$mapHas(a, altValue) && internalDeepEqual(item, curB, looseOpts, channel);\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L441-L447\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n\n  return $setHas(b, altValue) && !$setHas(a, altValue);\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L518-L533\nfunction mapHasEqualEntry(set, map, key1, item1, opts, channel) {\n  var i = getIterator(set);\n  var result;\n  var key2;\n  while ((result = i.next()) && !result.done) {\n    key2 = result.value;\n    if (\n      // eslint-disable-next-line no-use-before-define\n      internalDeepEqual(key1, key2, opts, channel)\n      // eslint-disable-next-line no-use-before-define\n      && internalDeepEqual(item1, $mapGet(map, key2), opts, channel)\n    ) {\n      $setDelete(set, key2);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction internalDeepEqual(actual, expected, options, channel) {\n  var opts = options || {};\n\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (opts.strict ? is(actual, expected) : actual === expected) {\n    return true;\n  }\n\n  var actualBoxed = whichBoxedPrimitive(actual);\n  var expectedBoxed = whichBoxedPrimitive(expected);\n  if (actualBoxed !== expectedBoxed) {\n    return false;\n  }\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object', equivalence is determined by ==.\n  if (!actual || !expected || (typeof actual !== 'object' && typeof expected !== 'object')) {\n    return opts.strict ? is(actual, expected) : actual == expected; // eslint-disable-line eqeqeq\n  }\n\n  /*\n   * 7.4. For all other Object pairs, including Array objects, equivalence is\n   * determined by having the same number of owned properties (as verified\n   * with Object.prototype.hasOwnProperty.call), the same set of keys\n   * (although not necessarily the same order), equivalent values for every\n   * corresponding key, and an identical 'prototype' property. Note: this\n   * accounts for both named and indexed properties on Arrays.\n   */\n  // see https://github.com/nodejs/node/commit/d3aafd02efd3a403d646a3044adcf14e63a88d32 for memos/channel inspiration\n\n  var hasActual = channel.has(actual);\n  var hasExpected = channel.has(expected);\n  var sentinel;\n  if (hasActual && hasExpected) {\n    if (channel.get(actual) === channel.get(expected)) {\n      return true;\n    }\n  } else {\n    sentinel = {};\n  }\n  if (!hasActual) { channel.set(actual, sentinel); }\n  if (!hasExpected) { channel.set(expected, sentinel); }\n\n  // eslint-disable-next-line no-use-before-define\n  return objEquiv(actual, expected, opts, channel);\n}\n\nfunction isBuffer(x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') {\n    return false;\n  }\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') {\n    return false;\n  }\n\n  return !!(x.constructor && x.constructor.isBuffer && x.constructor.isBuffer(x));\n}\n\nfunction setEquiv(a, b, opts, channel) {\n  if ($setSize(a) !== $setSize(b)) {\n    return false;\n  }\n  var iA = getIterator(a);\n  var iB = getIterator(b);\n  var resultA;\n  var resultB;\n  var set;\n  while ((resultA = iA.next()) && !resultA.done) {\n    if (resultA.value && typeof resultA.value === 'object') {\n      if (!set) { set = new $Set(); }\n      $setAdd(set, resultA.value);\n    } else if (!$setHas(b, resultA.value)) {\n      if (opts.strict) { return false; }\n      if (!setMightHaveLoosePrim(a, b, resultA.value)) {\n        return false;\n      }\n      if (!set) { set = new $Set(); }\n      $setAdd(set, resultA.value);\n    }\n  }\n  if (set) {\n    while ((resultB = iB.next()) && !resultB.done) {\n      // We have to check if a primitive value is already matching and only if it's not, go hunting for it.\n      if (resultB.value && typeof resultB.value === 'object') {\n        if (!setHasEqualElement(set, resultB.value, opts.strict, channel)) {\n          return false;\n        }\n      } else if (\n        !opts.strict\n        && !$setHas(a, resultB.value)\n        && !setHasEqualElement(set, resultB.value, opts.strict, channel)\n      ) {\n        return false;\n      }\n    }\n    return $setSize(set) === 0;\n  }\n  return true;\n}\n\nfunction mapEquiv(a, b, opts, channel) {\n  if ($mapSize(a) !== $mapSize(b)) {\n    return false;\n  }\n  var iA = getIterator(a);\n  var iB = getIterator(b);\n  var resultA;\n  var resultB;\n  var set;\n  var key;\n  var item1;\n  var item2;\n  while ((resultA = iA.next()) && !resultA.done) {\n    key = resultA.value[0];\n    item1 = resultA.value[1];\n    if (key && typeof key === 'object') {\n      if (!set) { set = new $Set(); }\n      $setAdd(set, key);\n    } else {\n      item2 = $mapGet(b, key);\n      if ((typeof item2 === 'undefined' && !$mapHas(b, key)) || !internalDeepEqual(item1, item2, opts, channel)) {\n        if (opts.strict) {\n          return false;\n        }\n        if (!mapMightHaveLoosePrim(a, b, key, item1, opts, channel)) {\n          return false;\n        }\n        if (!set) { set = new $Set(); }\n        $setAdd(set, key);\n      }\n    }\n  }\n\n  if (set) {\n    while ((resultB = iB.next()) && !resultB.done) {\n      key = resultB.value[0];\n      item2 = resultB.value[1];\n      if (key && typeof key === 'object') {\n        if (!mapHasEqualEntry(set, a, key, item2, opts, channel)) {\n          return false;\n        }\n      } else if (\n        !opts.strict\n        && (!a.has(key) || !internalDeepEqual($mapGet(a, key), item2, opts, channel))\n        && !mapHasEqualEntry(set, a, key, item2, assign({}, opts, { strict: false }), channel)\n      ) {\n        return false;\n      }\n    }\n    return $setSize(set) === 0;\n  }\n  return true;\n}\n\nfunction objEquiv(a, b, opts, channel) {\n  /* eslint max-statements: [2, 100], max-lines-per-function: [2, 120], max-depth: [2, 5], max-lines: [2, 400] */\n  var i, key;\n\n  if (typeof a !== typeof b) { return false; }\n  if (a == null || b == null) { return false; }\n\n  if ($objToString(a) !== $objToString(b)) { return false; }\n\n  if (isArguments(a) !== isArguments(b)) { return false; }\n\n  var aIsArray = isArray(a);\n  var bIsArray = isArray(b);\n  if (aIsArray !== bIsArray) { return false; }\n\n  // TODO: replace when a cross-realm brand check is available\n  var aIsError = a instanceof Error;\n  var bIsError = b instanceof Error;\n  if (aIsError !== bIsError) { return false; }\n  if (aIsError || bIsError) {\n    if (a.name !== b.name || a.message !== b.message) { return false; }\n  }\n\n  var aIsRegex = isRegex(a);\n  var bIsRegex = isRegex(b);\n  if (aIsRegex !== bIsRegex) { return false; }\n  if ((aIsRegex || bIsRegex) && (a.source !== b.source || flags(a) !== flags(b))) {\n    return false;\n  }\n\n  var aIsDate = isDate(a);\n  var bIsDate = isDate(b);\n  if (aIsDate !== bIsDate) { return false; }\n  if (aIsDate || bIsDate) { // && would work too, because both are true or both false here\n    if ($getTime(a) !== $getTime(b)) { return false; }\n  }\n  if (opts.strict && gPO && gPO(a) !== gPO(b)) { return false; }\n\n  var aWhich = whichTypedArray(a);\n  var bWhich = whichTypedArray(b);\n  if (aWhich !== bWhich) {\n    return false;\n  }\n  if (aWhich || bWhich) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  var aIsBuffer = isBuffer(a);\n  var bIsBuffer = isBuffer(b);\n  if (aIsBuffer !== bIsBuffer) { return false; }\n  if (aIsBuffer || bIsBuffer) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  var aIsArrayBuffer = isArrayBuffer(a);\n  var bIsArrayBuffer = isArrayBuffer(b);\n  if (aIsArrayBuffer !== bIsArrayBuffer) { return false; }\n  if (aIsArrayBuffer || bIsArrayBuffer) { // && would work too, because both are true or both false here\n    if (byteLength(a) !== byteLength(b)) { return false; }\n    return typeof Uint8Array === 'function' && internalDeepEqual(new Uint8Array(a), new Uint8Array(b), opts, channel);\n  }\n\n  var aIsSAB = isSharedArrayBuffer(a);\n  var bIsSAB = isSharedArrayBuffer(b);\n  if (aIsSAB !== bIsSAB) { return false; }\n  if (aIsSAB || bIsSAB) { // && would work too, because both are true or both false here\n    if (sabByteLength(a) !== sabByteLength(b)) { return false; }\n    return typeof Uint8Array === 'function' && internalDeepEqual(new Uint8Array(a), new Uint8Array(b), opts, channel);\n  }\n\n  if (typeof a !== typeof b) { return false; }\n\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  // having the same number of owned properties (keys incorporates hasOwnProperty)\n  if (ka.length !== kb.length) { return false; }\n\n  // the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  // ~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) { return false; } // eslint-disable-line eqeqeq\n  }\n\n  // equivalent values for every corresponding key, and ~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!internalDeepEqual(a[key], b[key], opts, channel)) { return false; }\n  }\n\n  var aCollection = whichCollection(a);\n  var bCollection = whichCollection(b);\n  if (aCollection !== bCollection) {\n    return false;\n  }\n  if (aCollection === 'Set' || bCollection === 'Set') { // aCollection === bCollection\n    return setEquiv(a, b, opts, channel);\n  }\n  if (aCollection === 'Map') { // aCollection === bCollection\n    return mapEquiv(a, b, opts, channel);\n  }\n\n  return true;\n}\n\nmodule.exports = function deepEqual(a, b, opts) {\n  return internalDeepEqual(a, b, opts, getSideChannel());\n};\n","function ParseBoolean(source: unknown, defaultValue = false): boolean {\n  switch (typeof (source)) {\n    case 'boolean':\n      return (source);\n\n    case 'number':\n      return (source !== 0);\n\n    case 'string':\n      switch (source.toLocaleLowerCase()) {\n        case 'true':\n          return (true);\n\n        case 'false':\n        case '':\n          return (false);\n\n        default: {\n          const numberValue = Number.parseFloat(source);\n          if (Number.isNaN(numberValue)) {\n            return (defaultValue);\n          }\n\n          return (numberValue !== 0);\n        }\n      }\n\n    default:\n      return (defaultValue);\n  }\n}\n\nexport default ParseBoolean;\n","import DataObject from '../object/DataObject';\nimport IsPlainObject from '../object/IsPlainObject';\n\nfunction ParseStringToDataObject<D extends DataObject>(rawData: string): D | undefined {\n  let jData: D | undefined;\n  try {\n    jData = JSON.parse(rawData);\n    if (!IsPlainObject(jData)) {\n      return (undefined);\n    }\n  } catch (error) {\n    console.warn(error);\n    return (undefined);\n  }\n\n  return (jData);\n}\n\nexport default ParseStringToDataObject;\n","export function BuildAssetFilename(basePart: string, extensionWithoutDot: string,\n  prefix = '', suffix = ''): string {\n  return (`${prefix}${basePart}${suffix}.${extensionWithoutDot}`);\n}\n\n// ----------------------------------------------------------------------------------------------\nexport function BuildUrlPath(...folderNames: string[]): string {\n  return (`${folderNames.join('/')}/`);\n}\n\n// ----------------------------------------------------------------------------------------------\n/** @see https://www.petermorlion.com/iterating-a-typescript-enum/ */\nexport function GetEnumKeys<E extends object, K extends keyof E = keyof E>(enumObj: E): K[] {\n  return (Object.keys(enumObj).filter((k) => Number.isNaN(+k)) as K[]);\n}\n\n// ------------------------------------------------------------------------------------------------\nexport function IsEnumMemberOf<Enum>(id: unknown, enums: Record<string, unknown>): id is Enum {\n  return (Object.values(enums).includes(id));\n}\n\n// ------------------------------------------------------------------------------------------------\nexport function IsFiniteNumber(value: unknown): value is number {\n  switch (typeof (value)) {\n    case 'number':\n      return (Number.isFinite(value));\n\n    case 'string':\n      return (IsFiniteNumber(Number.parseFloat(value)));\n\n    default:\n      return (false);\n  }\n}\n\n// ------------------------------------------------------------------------------------------------\nexport function ToReadonlyValues<T>(...values: T[]): readonly T[] {\n  return ([...values]);\n}\n","import { IsFiniteNumber } from '../Utils';\n\nfunction Clamp(value: number, min?: number, max?: number): number {\n  if (!IsFiniteNumber(value)) {\n    value = 0;\n  }\n\n  if (!IsFiniteNumber(min)) {\n    min = Number.MIN_SAFE_INTEGER;\n  }\n\n  if (!IsFiniteNumber(max)) {\n    max = Number.MAX_SAFE_INTEGER;\n  }\n\n  if (min > max) {\n    [min, max] = [max, min];\n  }\n\n  return (Math.max(min, Math.min(value, max)));\n}\n\nexport default Clamp;\n","import { IsFiniteNumber } from '../Utils';\nimport Clamp from '../math/Clamp';\n\nfunction ParseNumber(source: unknown, defaultValue?: number, min?: number,\n  max?: number): number {\n  if (IsFiniteNumber(source)) {\n    return (Clamp(source, min, max));\n  }\n\n  defaultValue = IsFiniteNumber(defaultValue) ? defaultValue : 0;\n  if (source === undefined || source === null || typeof (source) !== 'string') {\n    return (defaultValue);\n  }\n\n  const value = Number.parseFloat(source);\n  return (Number.isNaN(value) ? defaultValue : Clamp(value, min, max));\n}\n\nexport default ParseNumber;\n","import CloneObject from '../../../../../utils/object/CloneObject';\nimport IsPlainObject from '../../../../../utils/object/IsPlainObject';\nimport ParseBoolean from '../../../../../utils/parsers/ParseBoolean';\nimport ParseNumber from '../../../../../utils/parsers/ParseNumber';\nimport SbDefaults from '../../../defaults/SbDefaults';\nimport SbUserAudioSettingData from '../../audio/SbUserAudioSettingData';\nimport SbUserAudioSettingsData from '../../audio/SbUserAudioSettingsData';\n\nfunction parseBgm(source: unknown, defaultData: SbUserAudioSettingData): SbUserAudioSettingData {\n  return (\n    IsPlainObject(source)\n      ? {\n        isEnabled: ParseBoolean(source.isEnabled, defaultData.isEnabled),\n        volume: ParseNumber(source.volume, defaultData.volume, 0.0, 1.0),\n      }\n      : defaultData\n  );\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbParseAudioSettings(source: unknown): SbUserAudioSettingsData {\n  const target = CloneObject(SbDefaults.Settings.audio);\n  if (!IsPlainObject(source)) {\n    return (target);\n  }\n\n  target.bgm = parseBgm(source.bgm, target.bgm);\n  target.sound = parseBgm(source.sound, target.sound);\n  target.voice = parseBgm(source.voice, target.voice);\n  return (target);\n}\n\nexport default SbParseAudioSettings;\n","function IncludesIs<T>(value: unknown, array: readonly T[]): value is T {\n  return (array.includes(value as T));\n}\n\nexport default IncludesIs;\n","import IncludesIs from '../../../../../utils/collections/arrays/IncludesIs';\nimport CloneObject from '../../../../../utils/object/CloneObject';\nimport IsPlainObject from '../../../../../utils/object/IsPlainObject';\nimport SbDefaults from '../../../defaults/SbDefaults';\nimport { SbInputDevice, SbInputDevicesArray } from '../../../SbInputDevices';\nimport SbUserDeviceSettingsData from '../../device/SbUserDeviceSettingsData';\n\nfunction parseInputDevice(source: unknown, defaultData: SbInputDevice): SbInputDevice {\n  return (IncludesIs(source, SbInputDevicesArray) ? source : defaultData);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbParseDeviceSettings(source: unknown): SbUserDeviceSettingsData {\n  const target = CloneObject(SbDefaults.Settings.device);\n  if (!IsPlainObject(source)) {\n    return (target);\n  }\n\n  target.inputDevice = parseInputDevice(source.inputDevice, target.inputDevice);\n  return (target);\n}\n\nexport default SbParseDeviceSettings;\n","import CloneObject from '../../../../../utils/object/CloneObject';\nimport IsPlainObject from '../../../../../utils/object/IsPlainObject';\nimport ParseBoolean from '../../../../../utils/parsers/ParseBoolean';\nimport ParseNumber from '../../../../../utils/parsers/ParseNumber';\nimport SbDefaults from '../../../defaults/SbDefaults';\nimport SbDesignData from '../../../SbDesignData';\nimport SbUserStorybookSettingsData from '../../storybook/SbUserStorybookSettingsData';\n\nfunction SbParseStorybookSettings(source: unknown): SbUserStorybookSettingsData {\n  const target = CloneObject(SbDefaults.Settings.storybook);\n  if (!IsPlainObject(source)) {\n    return (target);\n  }\n\n  target.aacSymbolsEnabled = ParseBoolean(source.aacSymbolsEnabled, target.aacSymbolsEnabled);\n  target.captionHiliteColorIndex = ParseNumber(source.captionHiliteColorIndex,\n    target.captionHiliteColorIndex, 0, SbDesignData.CaptionHilites.Colors.length - 1);\n\n  target.captionHilitesEnabled = ParseBoolean(source.captionHilitesEnabled,\n    target.captionHilitesEnabled);\n\n  target.captionsEnabled = ParseBoolean(source.captionsEnabled, target.captionsEnabled);\n  target.helpfulTipsEnabled = ParseBoolean(source.helpfulTipsEnabled, target.helpfulTipsEnabled);\n  return (target);\n}\n\nexport default SbParseStorybookSettings;\n","function IsValidNumber(value: unknown): value is number {\n  return (typeof (value) === 'number' && Number.isFinite(value));\n}\n\nexport default IsValidNumber;\n","import IsValidNumber from './IsValidNumber';\n\nfunction IsValidPositiveZeroInteger(value: unknown): value is number {\n  return (IsValidNumber(value) && value >= 0 && Math.floor(value) === value);\n}\n\nexport default IsValidPositiveZeroInteger;\n","function IsValidString(value: unknown): value is string {\n  return (typeof value === 'string');\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction IsValidNonEmptyString(value: unknown): value is string {\n  return (IsValidString(value) && value.length > 0);\n}\n\nexport {\n  IsValidString,\n  IsValidNonEmptyString,\n};\n","import IsValidPositiveZeroInteger from '../../../../../utils/number/IsValidPositiveZeroInteger';\nimport CloneObject from '../../../../../utils/object/CloneObject';\nimport IsPlainObject from '../../../../../utils/object/IsPlainObject';\nimport { IsValidNonEmptyString } from '../../../../../utils/string/IsValidString';\nimport SbDefaults from '../../../defaults/SbDefaults';\nimport SbUserStorybookState from '../../userStorybookStates/SbUserStorybookState';\nimport SbUserStorybooksStates from '../../userStorybookStates/SbUserStorybooksStates';\n\nfunction parseStoryBookState(source: unknown): SbUserStorybookState | undefined {\n  const testData = source as SbUserStorybookState;\n  if (!IsPlainObject(source)\n  || (!IsValidPositiveZeroInteger(testData.progresFrameOrLabel)\n  && !IsValidNonEmptyString(testData.progresFrameOrLabel))) {\n    return (undefined);\n  }\n\n  return (testData);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbParseUserStorybooksStates(source: unknown): SbUserStorybooksStates {\n  if (!IsPlainObject(source)) {\n    return (CloneObject(SbDefaults.Settings.storybooksStates));\n  }\n\n  const target = source as SbUserStorybooksStates;\n  const storyBookIds = Object.keys(target);\n  storyBookIds.forEach((storyBookId) => {\n    const storyBookState = target[storyBookId];\n    if (storyBookState) {\n      const parsedStoryBookState = parseStoryBookState(storyBookState);\n      if (parsedStoryBookState) {\n        target[storyBookId] = parsedStoryBookState;\n      } else {\n        console.warn(`unable to parse storybook state with id: ${storyBookId}`);\n      }\n    } else {\n      delete target[storyBookId];\n      console.warn(`unable to parse storybook state with id: ${storyBookId}`);\n    }\n  });\n\n  return (target);\n}\n\nexport default SbParseUserStorybooksStates;\n","import deepEqual from 'deep-equal';\nimport IsPlainObject from '../../../../../utils/object/IsPlainObject';\nimport ParseBoolean from '../../../../../utils/parsers/ParseBoolean';\nimport ParseStringToDataObject from '../../../../../utils/parsers/ParseStringToDataObject';\nimport SbParseAudioSettings from './SbParseAudioSettings';\nimport SbParseDeviceSettings from './SbParseDeviceSettings';\nimport SbParseStorybookSettings from './SbParseStorybookSettings';\nimport SbUserSettingsData from '../../SbUserSettingsData';\nimport SbParseUserStorybooksStates from './SbParseUserStorybooksStates';\n\nexport type SbSettingsDataOutput = {\n  target: SbUserSettingsData\n  wasSourceMirrored: boolean;\n};\n\nfunction getSourceObject(source: unknown): SbUserSettingsData | undefined {\n  if (IsPlainObject(source)) {\n    return (source as SbUserSettingsData);\n  }\n\n  return (typeof (source) === 'string'\n    ? ParseStringToDataObject(source)\n    : undefined);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbUserSettingsDataParser(source: unknown): SbSettingsDataOutput {\n  const sourceObject = getSourceObject(source);\n  const target: SbUserSettingsData = {\n    audio: SbParseAudioSettings(sourceObject?.audio),\n    device: SbParseDeviceSettings(sourceObject?.device),\n    hasCompletedTutorial: ParseBoolean(sourceObject?.hasCompletedTutorial),\n    storybook: SbParseStorybookSettings(sourceObject?.storybook),\n    storybooksStates: SbParseUserStorybooksStates(sourceObject?.storybooksStates),\n  };\n\n  return ({\n    target,\n    wasSourceMirrored: deepEqual(target, sourceObject, {\n      strict: true,\n    }),\n  });\n}\n\nexport default SbUserSettingsDataParser;\n","import SbUserSettingsData from '../SbUserSettingsData';\nimport SbUserSettingsDataParser from './parsers/SbUserSettingsDataParser';\n\nexport const SbUserSettingsStorageKey = 'settings';\n\nexport default class SbUserSettingsStorage {\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  static Read(): SbUserSettingsData | undefined {\n    let rawData: unknown;\n    try {\n      rawData = localStorage.getItem(SbUserSettingsStorageKey);\n    } catch (error) {\n      console.warn(error);\n      return (undefined);\n    }\n\n    const parserData = SbUserSettingsDataParser(rawData);\n    if (!parserData.wasSourceMirrored) {\n      if (SbUserSettingsStorage.Write(parserData.target)) {\n        console.info('updated incoming settings data');\n      } else {\n        console.warn('unable to update incoming settings data');\n      }\n    }\n\n    return (parserData.target);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Write(settings: SbUserSettingsData): boolean {\n    try {\n      const settingsString = JSON.stringify(settings);\n      localStorage.setItem(SbUserSettingsStorageKey, settingsString);\n    } catch (error) {\n      console.warn(error);\n      return (false);\n    }\n\n    return (true);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private constructor() {\n    throw (new Error('instances of this class may not be created'));\n  }\n}\n","import CloneObject from '../../../utils/object/CloneObject';\nimport RecursiveReadonly from '../../../utils/object/RecursiveReadonly';\nimport SbDefaults from '../defaults/SbDefaults';\nimport SbUserSettingsData from './SbUserSettingsData';\nimport SbUserSettingsStorage from './storage/SbUserSettingsStorage';\n\nexport default class SbUserSettings {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private _data!: SbUserSettingsData;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor() {\n    if (!this.readFromLocalStorage()) {\n      this._data = CloneObject(SbDefaults.Settings);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  apply(source: RecursiveReadonly<SbUserSettingsData>): this {\n    this._data = CloneObject(source);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get data(): SbUserSettingsData {\n    return (this._data);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  readFromLocalStorage(): boolean {\n    const data = SbUserSettingsStorage.Read();\n    if (data !== undefined) {\n      this._data = data;\n      return (true);\n    }\n\n    return (false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  reset(): this {\n    this._data = CloneObject(SbDefaults.Settings);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  writeToLocalStorage(): boolean {\n    return (SbUserSettingsStorage.Write(this._data));\n  }\n}\n","import ICjsMcSymbolPrototype from './ICjsMcSymbolPrototype';\n\nexport default function CjsGetBounds(\n  displayObject: ICjsMcSymbolPrototype,\n  shouldTryNominalBounds = true,\n): createjs.Rectangle | undefined {\n  let bounds: createjs.Rectangle | undefined = displayObject.getBounds();\n  if (shouldTryNominalBounds && (!bounds || bounds.isEmpty())) {\n    bounds = displayObject.nominalBounds ?? undefined;\n  }\n\n  return (bounds);\n}\n","/* eslint-disable no-bitwise */\nimport Clamp from '../../math/Clamp';\n\nexport default class RgbColor {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private _blueNormalized!: number;\n\n  private _greenNormalized!: number;\n\n  private _redNormalized!: number;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor();\n\n  constructor(red: number, green: number, blue: number, areNormalized?: boolean);\n\n  constructor(rgbColor: number);\n\n  constructor(hexColor: string);\n\n  constructor(redOrRgbHexColor?: number | string, green?: number, blue?: number,\n    areNormalized = false) {\n    if (redOrRgbHexColor === undefined) {\n      this.redNormalized = 0.0;\n      this.greenNormlized = 0.0;\n      this.blueNormalized = 0.0;\n    } else if (typeof (redOrRgbHexColor) === 'string') {\n      this.hexStringToColor(redOrRgbHexColor);\n    } else if (green === undefined || blue === undefined) {\n      if (areNormalized) {\n        this.redNormalized = redOrRgbHexColor;\n        this.greenNormlized = green ?? 0.0;\n        this.blueNormalized = blue ?? 0.0;\n      } else {\n        this.red = (redOrRgbHexColor & 0xff0000) >> 16;\n        this.green = (redOrRgbHexColor & 0xff00) >> 8;\n        this.blue = (redOrRgbHexColor & 0xff);\n      }\n    } else if (areNormalized) {\n      this.redNormalized = redOrRgbHexColor;\n      this.greenNormlized = green;\n      this.blueNormalized = blue;\n    } else {\n      this.red = redOrRgbHexColor;\n      this.green = green;\n      this.blue = blue;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get blue(): number {\n    return (RgbColor.GetColorComponent(this._blueNormalized));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set blue(value: number) {\n    this._blueNormalized = RgbColor.SetColorComponent(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get blueNormalized(): number {\n    return (this._blueNormalized);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set blueNormalized(value: number) {\n    this._blueNormalized = Clamp(value, 0.0, 1.0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Create(): RgbColor;\n\n  static Create(rgbColor: number): RgbColor;\n\n  static Create(red: number, green?: number, blue?: number, areNormalized?: boolean): RgbColor;\n\n  static Create(hexColor: string): RgbColor;\n\n  static Create(redOrRgbHexColor?: number | string, green?: number, blue?: number,\n    areNormalized = false): RgbColor {\n    if (redOrRgbHexColor === undefined) {\n      return (new RgbColor());\n    }\n\n    if (typeof (redOrRgbHexColor) === 'string') {\n      return (new RgbColor(redOrRgbHexColor));\n    }\n\n    if (green !== undefined && blue !== undefined) {\n      return (new RgbColor(redOrRgbHexColor, green, blue, areNormalized));\n    }\n\n    return (new RgbColor(redOrRgbHexColor));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static GetColorComponent(normalizedColorComponent: number): number {\n    normalizedColorComponent = Clamp(normalizedColorComponent, 0.0, 1.0);\n    return (normalizedColorComponent === 1.0 ? 255 : normalizedColorComponent * 256);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get green(): number {\n    return (RgbColor.GetColorComponent(this._greenNormalized));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set green(value: number) {\n    this._greenNormalized = RgbColor.SetColorComponent(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get greenNormlized(): number {\n    return (this._greenNormalized);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set greenNormlized(value: number) {\n    this._greenNormalized = Clamp(value, 0.0, 1.0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  /**\n   * Converts a hex string color to its numerical counterpart. RGB is surrportd; no alpha channel.\n   * @param hex {string} - The RGB format string to convert. It can begin with an optional\n   * `0x` or `#`.\n   * @returns {number} - The converted number, or -1 if the hex string could not be converted.\n   */\n  hexStringToColor(hex: string): number {\n    if (!hex) {\n      return (-1);\n    }\n\n    hex = hex.replace(/^(?:#|0x)?([a-f\\d])([a-f\\d])([a-f\\d])$/i,\n      (m: string, r: string, g: string, b: string) => (r + r + g + g + b + b));\n\n    const result = (/^(?:#|0x)?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i).exec(hex);\n    if (!result) {\n      return (-1);\n    }\n\n    const [, rs, gs, bs] = result;\n    this.red = rs ? Number.parseInt(rs, 16) : 0;\n    this.green = gs ? Number.parseInt(gs, 16) : 0;\n    this.blue = bs ? Number.parseInt(bs, 16) : 0;\n\n    return (this.value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  numericalToColor(color: number): number {\n    this.red = (color & 0xff0000) >> 16;\n    this.green = (color & 0xff00) >> 8;\n    this.blue = color & 0xff;\n    return (this.value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setColor(color: number | string): this {\n    if (typeof color === 'string') {\n      this.hexStringToColor(color);\n    } else {\n      this.numericalToColor(color);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get red(): number {\n    return (RgbColor.GetColorComponent(this._redNormalized));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set red(value: number) {\n    this._redNormalized = RgbColor.SetColorComponent(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get redNormalized(): number {\n    return (this._redNormalized);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set redNormalized(value: number) {\n    this._redNormalized = Clamp(value, 0.0, 1.0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static SetColorComponent(colorComponent: number): number {\n    colorComponent = Clamp(colorComponent, 0, 255);\n    return (colorComponent === 255 ? 1.0 : colorComponent / 256);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get value(): number {\n    return (\n      (this.red << 16)\n      | (this.green << 8)\n      | this.blue\n    );\n  }\n}\n","import CjsGetBounds from '../createjs/utils/CjsGetBounds';\nimport ICjsMcSymbolPrototype from '../createjs/utils/ICjsMcSymbolPrototype';\nimport RgbColor from './color/RgbColor';\n\nfunction CjsApplyColor(displayObject: ICjsMcSymbolPrototype, color: string | null): void {\n  displayObject.uncache();\n  if (color) {\n    const rgbColor: RgbColor = RgbColor.Create(color);\n    const rx = 0;\n    const gx = 0;\n    const bx = 0;\n    const ax = 1;\n    const r = rgbColor.red;\n    const g = rgbColor.green;\n    const b = rgbColor.blue;\n    const a = 0;\n    const filter = new createjs.ColorFilter(rx, gx, bx, ax, r, g, b, a);\n    displayObject.filters = [\n      filter,\n    ];\n\n    const bnds = CjsGetBounds(displayObject);\n    if (bnds) {\n      displayObject.cache(bnds.x, bnds.y, bnds.width, bnds.height);\n    } else {\n      console.warn(`bounds is unavailable on clip: ${displayObject.name}`, displayObject);\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    displayObject.filters = null;\n  }\n}\n\nexport default CjsApplyColor;\n","import CjsApplyColor from '../../../utils/display/CjsApplyColor';\nimport RecursiveReadonly from '../../../utils/object/RecursiveReadonly';\nimport SbDefaults from '../../data/defaults/SbDefaults';\nimport SbDesignData from '../../data/SbDesignData';\nimport SbUserStorybookSettingsData from '../../data/settings/storybook/SbUserStorybookSettingsData';\n\nfunction UpdateCaptionHilitesFromSettings(captionHilitesDisplay: createjs.MovieClip,\n  storybookSettings: RecursiveReadonly<SbUserStorybookSettingsData>): void {\n  captionHilitesDisplay.visible = storybookSettings.captionHilitesEnabled;\n  if (captionHilitesDisplay.visible) {\n    const { Colors } = SbDesignData.CaptionHilites;\n    const color = Colors[storybookSettings.captionHiliteColorIndex]\n      ?? Colors[SbDefaults.Settings.storybook.captionHiliteColorIndex]\n      ?? Colors[0];\n\n    CjsApplyColor(captionHilitesDisplay, color);\n  }\n}\n\nexport default UpdateCaptionHilitesFromSettings;\n","import { CjsEvents } from '../../../utils/createjs/events/CjsEvents';\nimport CjsLabel from '../../../utils/createjs/objects/buttons/CjsLabel';\nimport CjsGetMovieClipLabels from '../../../utils/createjs/utils/CjsGetMovieClipLabels';\nimport RecursiveReadonly from '../../../utils/object/RecursiveReadonly';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport SbUserSettingsData from '../../data/settings/SbUserSettingsData';\nimport UpdateCaptionHilitesFromSettings from './UpdateCaptionHilitesFromSettings';\n\nconst DisplayObjectNames = {\n  AacSymbols: 'aacSymbolsDisplay',\n  CaptionHilites: 'captionHilitesContainer',\n  Captions: 'captionsContainer',\n} as const;\n\nexport default class SbContextLayers {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  private readonly captionHilitesLabelsByName: Map<string, CjsLabel[]>;\n\n  private currentCaptionHiliteslabel: string | null | undefined;\n\n  private currentDisplayFrame: number;\n\n  private prevDisplayFrame: number;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    this.engine = engine;\n    this.captionHilitesLabelsByName = new Map();\n    this.currentDisplayFrame = -1;\n    this.prevDisplayFrame = this.currentDisplayFrame;\n    this.onStageTick = this.onStageTick.bind(this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(): void {\n    this.display.stage.addEventListener(CjsEvents.TICK, this.onStageTick);\n\n    // TODO: remove if na\n    /*\n    if (this.captionHilitesDisplay) {\n      this.captionHilitesLabels = CjsGetMovieClipLabels(this.captionHilitesDisplay).reverse();\n    }\n    */\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): void {\n    this.updateFromSettingsCaptions()\n      .updateFromSettingsAacSymbols()\n      .updateFromSettingsCaptionHilites();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // TODO: remove if na\n  /*\n  updateFromTick(): void {\n    this.updateFromTickProgressBar();\n  }\n  */\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private get aacSymbolsDisplay(): createjs.DisplayObject | undefined {\n    return (this.findUnitDisplay(DisplayObjectNames.AacSymbols));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get captionsDisplay(): createjs.MovieClip | undefined {\n    return (this.findUnitDisplay(DisplayObjectNames.Captions));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get captionHilitesDisplay(): createjs.MovieClip | undefined {\n    return (this.findUnitDisplay(DisplayObjectNames.CaptionHilites));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get display(): createjs.MovieClip {\n    return (this.engine.exportRoot.display);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private findUnitDisplay(namePrefix: string): createjs.MovieClip | undefined {\n    const display = this.display.children\n      .find((childDisplayObject): childDisplayObject is createjs.MovieClip => {\n        if (!(childDisplayObject instanceof createjs.MovieClip)) {\n          return (false);\n        }\n\n        return (childDisplayObject.name?.startsWith(namePrefix));\n      });\n\n    return (display);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private getCaptionHilitesLabelsOf(hilitesDisplay: createjs.MovieClip): CjsLabel[] {\n    let labels = this.captionHilitesLabelsByName.get(hilitesDisplay.name);\n    if (!labels) {\n      labels = CjsGetMovieClipLabels(hilitesDisplay).reverse();\n      this.captionHilitesLabelsByName.set(hilitesDisplay.name, labels);\n    }\n\n    return (labels);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private getCurrentCaptionHiliteLabel(): string | null {\n    const { captionHilitesDisplay } = this;\n    if (!captionHilitesDisplay) {\n      return (null);\n    }\n\n    const captionHilitesLabels = this.getCaptionHilitesLabelsOf(captionHilitesDisplay);\n    // TODO\n    // const { currentFrame } = this.display;\n    const { currentFrame } = captionHilitesDisplay;\n\n    // TODO\n    // const hilitesFrame = currentFrame - this.engine.startTimelineFrame;\n    const hilitesFrame = currentFrame;\n\n    const targetLabel = captionHilitesLabels.find((label) => hilitesFrame >= label.position);\n    return (targetLabel ? targetLabel.label : null);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onStageTick(): void {\n    if (this.updateCurrentFrame()) {\n      this.updateCaptionHilites();\n    }\n\n    this.updateCaptions();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCaptionHilites(): void {\n    const { captionHilitesDisplay } = this;\n    if (!captionHilitesDisplay) {\n      return;\n    }\n\n    const targetFrame = this.prevDisplayFrame === -1\n      ? this.currentDisplayFrame\n      : this.currentDisplayFrame + (this.currentDisplayFrame - this.prevDisplayFrame);\n\n    captionHilitesDisplay.gotoAndStop(targetFrame);\n\n    const currentCaptionHiliteLabel = this.getCurrentCaptionHiliteLabel();\n    // console.log(currentFrame, captionHilitesDisplay.currentFrame, currentCaptionHiliteLabel);\n    if (currentCaptionHiliteLabel !== this.currentCaptionHiliteslabel) {\n      this.currentCaptionHiliteslabel = currentCaptionHiliteLabel;\n      this.updateFromSettingsCaptionHilites();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCaptions(): void {\n    const { captionsDisplay } = this;\n    if (captionsDisplay) {\n      captionsDisplay.visible = this.userSettingsData.storybook.captionsEnabled;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCurrentFrame(): boolean {\n    const { currentFrame } = this.display;\n    if (currentFrame === this.currentDisplayFrame) {\n      return (false);\n    }\n\n    this.prevDisplayFrame = this.currentDisplayFrame;\n    this.currentDisplayFrame = currentFrame;\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateFromSettingsAacSymbols(): this {\n    const { aacSymbolsDisplay } = this;\n    if (aacSymbolsDisplay) {\n      aacSymbolsDisplay.visible = this.userSettingsData.storybook.aacSymbolsEnabled;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateFromSettingsCaptionHilites(): this {\n    const { captionHilitesDisplay } = this;\n    if (captionHilitesDisplay) {\n      UpdateCaptionHilitesFromSettings(captionHilitesDisplay, this.userSettingsData.storybook);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateFromSettingsCaptions(): this {\n    this.updateCaptions();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateFromTickProgressBar(): this {\n    const { startTimelineFrame } = this.engine;\n    if (startTimelineFrame >= 0) {\n      const totalFrames = this.display.totalFrames - startTimelineFrame + 1;\n      this.engine.progress = this.display.currentFrame / totalFrames;\n    } else {\n      this.engine.progress = 0;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get userSettingsData(): RecursiveReadonly<SbUserSettingsData> {\n    return (this.engine.userSettingsData);\n  }\n}\n","const SbUiComponentEvents = {\n  CLOSE: 'close',\n};\n\nexport default SbUiComponentEvents;\n","function SearchForMapKeyByValue<Key, Value>(\n  map: ReadonlyMap<Key, Value>,\n  valueToSearchFor: Value,\n): Key | undefined {\n  const mapIterator = map.entries();\n  let current = mapIterator.next();\n\n  while (!current.done) {\n    const [key, value] = current.value;\n    if (value === valueToSearchFor) {\n      return (key);\n    }\n\n    current = mapIterator.next();\n  }\n\n  return (undefined);\n}\n\nexport default SearchForMapKeyByValue;\n","function SetPropertyInArray<T extends object, K extends keyof T>(\n  items: (T | undefined)[],\n  key: K,\n  value: T[K],\n): void {\n  items.forEach((item) => {\n    if (item !== undefined) {\n      item[key] = value;\n    }\n  });\n}\n\nexport default SetPropertyInArray;\n","import SetPropertyInArray from '../../collections/arrays/actions/SetPropertyInArray';\nimport CjsActionTarget from './CjsActionTarget';\n\nfunction CjsSetVisible(items: CjsActionTarget[], isVisible: boolean): void {\n  SetPropertyInArray(items, 'visible', isVisible);\n}\n\nexport default CjsSetVisible;\n","const CjsButtonLabels = {\n  Disabled: 'disabled',\n  Down: 'down',\n  Hit: 'hit',\n  Out: 'out',\n  Over: 'over',\n  Selected: 'selected',\n} as const;\n\ntype CjsButtonLabel = typeof CjsButtonLabels[keyof typeof CjsButtonLabels];\n\nconst CjsButtonLabelsArray = Object.values(CjsButtonLabels) as ReadonlyArray<CjsButtonLabel>;\n\nexport {\n  CjsButtonLabel,\n  CjsButtonLabels,\n  CjsButtonLabelsArray,\n};\n","const CjsButtonEvents = {\n  /**\n   * Dispatched when a button is pressed.\n   *\n   * ```\n   * function onButtonPressed(button: ICjsButton): void;\n   * ```\n   */\n  PRESSED: 'pressed',\n} as const;\n\nexport default CjsButtonEvents;\n","import EventEmitter from 'eventemitter3';\nimport IncludesIs from '../../collections/arrays/IncludesIs';\nimport CjsEventCallback from './CjsEventCallback';\nimport { CjsEvent, CjsEventsArray } from './CjsEvents';\nimport ICjsEventsMap from './ICjsEventsMap';\n\nexport default class CjsEventsHandler<\n  TargetType extends createjs.EventDispatcher = createjs.EventDispatcher\n> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly target: TargetType;\n\n  private readonly eventsEmitter: EventEmitter;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(target: TargetType) {\n    this.target = target;\n    this.eventsEmitter = new EventEmitter();\n    this.onTargetCallback = this.onTargetCallback.bind(this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.removeAll();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  emit(eventName: string, ...args: unknown[]): this {\n    this.eventsEmitter.emit(eventName, args);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  off<E extends CjsEvent>(eventName: E, callback?: CjsEventCallback<ICjsEventsMap[E]>,\n    context?: unknown, isOnce?: boolean): this {\n    this.eventsEmitter.off(eventName, callback, context, isOnce);\n    if (this.eventsEmitter.listenerCount(eventName) === 0) {\n      this.target.removeEventListener(eventName, this.onTargetCallback);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  on<E extends CjsEvent>(eventName: E, callback: CjsEventCallback<ICjsEventsMap[E]>,\n    context?: unknown, isOnce = false): this {\n    if (this.eventsEmitter.listenerCount(eventName) === 0) {\n      this.target.addEventListener(eventName, this.onTargetCallback);\n    }\n\n    if (isOnce) {\n      this.eventsEmitter.once(eventName, callback, context);\n    } else {\n      this.eventsEmitter.on(eventName, callback, context);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  once<E extends CjsEvent>(eventName: E, callback: CjsEventCallback<ICjsEventsMap[E]>,\n    context?: unknown): this {\n    return (this.on(eventName, callback, context, true));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeAll<E extends CjsEvent>(eventName?: E): this {\n    const eventNames = this.eventsEmitter.eventNames();\n    this.eventsEmitter.removeAllListeners(eventName);\n    if (eventName) {\n      this.target.removeEventListener(eventName, this.onTargetCallback);\n    } else {\n      eventNames.forEach((name) => {\n        if (IncludesIs(name, CjsEventsArray)) {\n          this.target.removeEventListener(name, this.onTargetCallback);\n        }\n      });\n    }\n\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onTargetCallback(e: unknown): void {\n    const event = e as createjs.Event;\n    if (IncludesIs(event.type, CjsEventsArray)) {\n      this.eventsEmitter.emit(event.type, event, this);\n    }\n  }\n}\n","import EventEmitter from 'eventemitter3';\nimport ICjsDisplayObject from './ICjsDisplayObject';\nimport IPoint from '../../../geom/IPoint';\nimport CjsEventsHandler from '../../events/CjsEventsHandler';\n\ntype InternalCjsObjectHolder<\n  DisplayType extends createjs.DisplayObject = createjs.DisplayObject\n> = {\n  _cjsData: ICjsDisplayObject<DisplayType> | undefined;\n};\n\nexport default class CjsDisplayObject<\n  DisplayType extends createjs.DisplayObject = createjs.DisplayObject\n> extends EventEmitter implements ICjsDisplayObject<DisplayType> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly display: DisplayType;\n\n  protected readonly cjsEventsHandler: CjsEventsHandler<DisplayType>;\n\n  private _dataMap: Map<string, unknown> | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: DisplayType) {\n    super();\n    this.display = display;\n    this.setInternalCjsObject();\n    this.cjsEventsHandler = new CjsEventsHandler(display);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get alpha(): number {\n    return (this.display.alpha);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set alpha(value: number) {\n    this.setAlpha(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  copyPosition(source: IPoint): this {\n    return (this.setPosition(source.x, source.y));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get dataMap(): Map<string, unknown> {\n    if (!this._dataMap) {\n      this._dataMap = new Map();\n    }\n\n    return (this._dataMap);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Dispose(displayObject: CjsDisplayObject | undefined): undefined {\n    displayObject?.dispose();\n    return (undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.disposeDataMap();\n    this.removeAllListeners();\n    this.cjsEventsHandler.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  disposeDataMap(): this {\n    this._dataMap = undefined;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get enabled(): boolean {\n    return (this.display.mouseEnabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set enabled(value: boolean) {\n    this.setEnabled(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Get<\n    DisplayType extends createjs.DisplayObject = createjs.DisplayObject\n  >(displayObject: DisplayType): ICjsDisplayObject<DisplayType> | undefined {\n    return (CjsDisplayObject._InternalCjsObjectHolder<DisplayType>(displayObject)._cjsData);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getData<T = unknown>(key: string): T | undefined {\n    return (this._dataMap ? this._dataMap.get(key) as T : undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  moveToBottom(): this {\n    this.display.parent?.setChildIndex(this.display, 0);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  moveToTop(): this {\n    const { parent } = this.display;\n    parent?.setChildIndex(this.display, parent.children.length - 1);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get name(): string {\n    // might be `null` because of createjs' default null assignment\n    return (this.display.name ?? '');\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set name(value: string) {\n    this.setName(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get scale(): number {\n    return (this.scaleX);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set scale(value: number) {\n    this.setScale(value, value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get scaleX(): number {\n    return (this.display.scaleX);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set scaleX(value: number) {\n    this.setScaleX(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get scaleY(): number {\n    return (this.display.scaleY);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set scaleY(value: number) {\n    this.setScaleY(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setAlpha(alpha: number): this {\n    this.display.alpha = alpha;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setEnabled(isEnabled: boolean): this {\n    if (isEnabled !== this.enabled) {\n      this.display.mouseEnabled = isEnabled;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setName(value: string): this {\n    this.display.name = value ?? ''; // might be `null` because of createjs' default null assignment\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setPosition(x: number, y: number): this {\n    this.x = x;\n    this.y = y;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setScale(x: number, y?: number): this {\n    this.scaleX = x;\n    this.scaleY = y ?? x;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setScaleX(value: number): this {\n    this.display.scaleX = value;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setScaleY(value: number): this {\n    this.display.scaleY = value;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setVisible(isVisible: boolean): this {\n    this.display.visible = isVisible;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setX(value: number): this {\n    this.x = value;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setY(value: number): this {\n    this.y = value;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get visible(): boolean {\n    return (this.display.visible);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set visible(value: boolean) {\n    this.setVisible(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get x(): number {\n    return (this.display.x);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set x(value: number) {\n    this.display.x = value;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get y(): number {\n    return (this.display.y);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set y(value: number) {\n    this.display.y = value;\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private getInternalCjsObject(): ICjsDisplayObject | undefined {\n    return (this.internalCjsObjectHolder._cjsData);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static _InternalCjsObjectHolder<\n    DisplayType extends createjs.DisplayObject = createjs.DisplayObject\n  >(display: DisplayType): InternalCjsObjectHolder<DisplayType> {\n    return (display as unknown as InternalCjsObjectHolder<DisplayType>);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get internalCjsObjectHolder(): InternalCjsObjectHolder {\n    return (CjsDisplayObject._InternalCjsObjectHolder(this.display));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private setInternalCjsObject(): void {\n    this.internalCjsObjectHolder._cjsData = this;\n  }\n}\n","import CjsGetDisplayObject from './CjsGetDisplayObject';\n\nexport default function CjsGetBitmapText(container: createjs.Container,\n  name: string): createjs.BitmapText | undefined {\n  const text = CjsGetDisplayObject(container, name);\n  return (text instanceof createjs.BitmapText ? text : undefined);\n}\n","import { CjsTextObject } from './CjsGetTextObject';\n\nfunction CjsSetText(textObject: CjsTextObject | undefined, message?: string): void {\n  if (textObject !== undefined && message !== undefined) {\n    textObject.text = message;\n  }\n}\n\nexport default CjsSetText;\n","import CjsGetDisplayObject from './CjsGetDisplayObject';\nimport CjsSetText from './CjsSetText';\n\nexport default function CjsGetText(container: createjs.Container,\n  name: string, message?: string): createjs.Text | undefined {\n  const text = CjsGetDisplayObject(container, name);\n  if (!(text instanceof createjs.Text)) {\n    return (undefined);\n  }\n\n  CjsSetText(text, message);\n  return (text);\n}\n","import CjsGetBitmapText from './CjsGetBitmapText';\nimport CjsGetText from './CjsGetText';\n\ntype CjsTextObject = createjs.BitmapText | createjs.Text;\n\nfunction CjsGetTextObject(container: createjs.Container, name: string): CjsTextObject | undefined {\n  return (CjsGetBitmapText(container, name) || CjsGetText(container, name));\n}\n\nexport {\n  CjsGetTextObject,\n  CjsTextObject,\n};\n","import CjsLabelPositionsByName from '../objects/CjsLabelPositionsByName';\nimport CjsDisplayObject from '../objects/display/CjsDisplayObject';\nimport CjsGetMovieClipLabels from './CjsGetMovieClipLabels';\n\nfunction CjsGetMovieClipLabelsByName(\n  displayObject: CjsDisplayObject<createjs.MovieClip> | createjs.MovieClip,\n): CjsLabelPositionsByName {\n  displayObject = displayObject instanceof createjs.MovieClip\n    ? displayObject\n    : displayObject.display;\n\n  const sourceLabels = CjsGetMovieClipLabels(displayObject);\n  const out = {} as CjsLabelPositionsByName;\n  sourceLabels.forEach((sourceLabel) => {\n    out[sourceLabel.label] = sourceLabel.position;\n  });\n\n  return (out);\n}\n\nexport default CjsGetMovieClipLabelsByName;\n","/**\n * because of challenges involved with using stage.getObjectsUnderPoint...\n */\nconst CjsButtonsOverHelperKludge = new Set<createjs.MovieClip>();\n\nexport default CjsButtonsOverHelperKludge;\n","import CjsGetMovieClipLabelsByName from '../../utils/CjsGetMovieClipLabelsByName';\nimport CjsLabelPositionsByName from '../CjsLabelPositionsByName';\nimport { CjsButtonLabels } from './CjsButtonLabels';\nimport CjsButtonsOverHelperKludge from './CjsButtonsOverHelperKludge';\n\ntype DisplayObject = createjs.DisplayObject;\ntype MovieClip = createjs.MovieClip;\ntype FrameLabel = number | string;\n\nexport default class CjsButtonHelper {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly target: MovieClip;\n\n  downLabel: FrameLabel;\n\n  outLabel: FrameLabel;\n\n  overLabel: FrameLabel;\n\n  selectedLabel: FrameLabel;\n\n  private readonly labelsByName: CjsLabelPositionsByName;\n\n  private _isDown: boolean;\n\n  private _isOver: boolean;\n\n  private _isSelected: boolean;\n\n  private _shouldUseDisabledState: boolean;\n\n  private _enabled!: boolean;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(target: MovieClip, outLabel: FrameLabel, overLabel: FrameLabel,\n    downLabel: FrameLabel, hitArea?: DisplayObject, hitLabel?: FrameLabel,\n    selectedLabel?: FrameLabel) {\n    this.onTargetRollOver = this.onTargetRollOver.bind(this);\n    this.onTargetRollOut = this.onTargetRollOut.bind(this);\n    this.onTargetMouseDown = this.onTargetMouseDown.bind(this);\n    this.onTargetPressUp = this.onTargetPressUp.bind(this);\n\n    this.target = target;\n    this.labelsByName = CjsGetMovieClipLabelsByName(target);\n    this.downLabel = downLabel || CjsButtonLabels.Down;\n    this.overLabel = overLabel || CjsButtonLabels.Over;\n    this.outLabel = outLabel || CjsButtonLabels.Out;\n    this.selectedLabel = selectedLabel || CjsButtonLabels.Selected;\n    this._isDown = false;\n    this._isOver = false;\n    this._isSelected = false;\n    this._shouldUseDisabledState = true;\n\n    if (target instanceof createjs.Container) {\n      // prevents issues when children are removed from the display list when state changes.\n      target.mouseChildren = false;\n    }\n\n    this.enabled = target.mouseEnabled;\n\n    this.initHitArea(hitArea, hitLabel);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    const { target } = this;\n    CjsButtonsOverHelperKludge.delete(target);\n    target.cursor = null as unknown as string;\n    target.removeEventListener('rollover', this.onTargetRollOver);\n    target.removeEventListener('rollout', this.onTargetRollOut);\n    target.removeEventListener('mousedown', this.onTargetMouseDown);\n    target.removeEventListener('pressup', this.onTargetPressUp);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get enabled(): boolean {\n    return (this._enabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set enabled(value: boolean) {\n    this.setEnabled(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isDown(): boolean {\n    return (this._isDown);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isOver(): boolean {\n    return (this._isOver);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // eslint-disable-next-line class-methods-use-this\n  onTargetVisibilityChanged(): void {\n    // TODO: needed?\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setEnabled(isEnabled: boolean): this {\n    if (isEnabled === this._enabled) {\n      return (this);\n    }\n\n    this._enabled = isEnabled;\n\n    const { target } = this;\n    if (isEnabled) {\n      target.cursor = 'pointer';\n      // TODO: make CjsEvents.ROLL_OVER and ROLL_OUT\n      target.addEventListener('rollover', this.onTargetRollOver);\n      target.addEventListener('rollout', this.onTargetRollOut);\n      target.addEventListener('mousedown', this.onTargetMouseDown);\n      target.addEventListener('pressup', this.onTargetPressUp);\n    } else {\n      target.cursor = null as unknown as string;\n      target.removeEventListener('rollover', this.onTargetRollOver);\n      target.removeEventListener('rollout', this.onTargetRollOut);\n      target.removeEventListener('mousedown', this.onTargetMouseDown);\n      target.removeEventListener('pressup', this.onTargetPressUp);\n    }\n\n    if (this.enabled) {\n      this.updateEnabled();\n    } else {\n      this.updateDisabled();\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get selected(): boolean {\n    return (this._isSelected);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set selected(value: boolean) {\n    this.setSelected(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setSelected(isSelected: boolean): this {\n    if (!this.enabled) {\n      return (this);\n    }\n\n    if (isSelected === this._isSelected) {\n      return (this);\n    }\n\n    this._isSelected = isSelected;\n\n    if (this._isOver) {\n      this.target.gotoAndStop(this.overLabel);\n    } else if (this._isDown) {\n      this.target.gotoAndStop(this.downLabel);\n    } else {\n      this.target.gotoAndStop(this.getActingOutFrameLabel());\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setShouldUseDisabledState(should: boolean): this {\n    if (should !== this._shouldUseDisabledState) {\n      this._shouldUseDisabledState = should;\n      this.update();\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get shouldUseDisabledState(): boolean {\n    return (this._shouldUseDisabledState);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set shouldUseDisabledState(value: boolean) {\n    this.setShouldUseDisabledState(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  update(): void {\n    if (this.enabled) {\n      this.updateEnabled();\n    } else {\n      this.updateDisabled();\n    }\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private getActingOutFrameLabel(): FrameLabel {\n    const keyLabel = this.selected ? this.selectedLabel : this.outLabel;\n    const actingOutLabel = this.labelsByName[keyLabel];\n    return (actingOutLabel !== undefined ? actingOutLabel : this.outLabel);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initHitArea(hitArea: DisplayObject | undefined, hitLabel: FrameLabel | undefined): void {\n    if (hitArea instanceof createjs.MovieClip) {\n      this.initHitAreaUsingCustomArea(hitArea, hitLabel);\n    } else {\n      this.initHitAreaUsingDefaultArea();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initHitAreaUsingCustomArea(hitArea: createjs.MovieClip,\n    hitLabel: FrameLabel | undefined): void {\n    if (hitLabel) {\n      hitArea.actionsEnabled = false;\n      hitArea.gotoAndStop(hitLabel);\n    }\n\n    this.target.hitArea = hitArea;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initHitAreaUsingDefaultArea(): void {\n    const { target } = this;\n    const labelsByName = CjsGetMovieClipLabelsByName(target);\n    const hitFrame = labelsByName[CjsButtonLabels.Hit];\n    if (hitFrame === undefined) {\n      return;\n    }\n\n    const prevFrame = target.currentFrame;\n    target.gotoAndStop(hitFrame);\n    const childHitDisplay = target.children[0];\n    if (childHitDisplay) {\n      if (childHitDisplay instanceof createjs.MovieClip) {\n        childHitDisplay.actionsEnabled = false;\n      }\n\n      target.hitArea = childHitDisplay;\n    }\n\n    target.gotoAndStop(prevFrame);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTargetMouseDown(): void {\n    this._isDown = true;\n    this.target.gotoAndStop(this.downLabel);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTargetPressUp(): void {\n    this._isDown = false;\n    this.target.gotoAndStop(this._isOver ? this.overLabel : this.getActingOutFrameLabel());\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTargetRollOver(): void {\n    this._isOver = true;\n    CjsButtonsOverHelperKludge.add(this.target);\n    this.target.gotoAndStop(this._isDown ? this.downLabel : this.overLabel);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTargetRollOut(): void {\n    this._isOver = false;\n    CjsButtonsOverHelperKludge.delete(this.target);\n    this.target.gotoAndStop(this._isDown ? this.overLabel : this.getActingOutFrameLabel());\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateDisabled(): void {\n    this._isOver = false;\n    this._isDown = false;\n    this.target.gotoAndStop(\n      this.shouldUseDisabledState ? CjsButtonLabels.Disabled : this.getActingOutFrameLabel(),\n    );\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateEnabled(): void {\n    this._isOver = CjsButtonsOverHelperKludge.has(this.target);\n    this._isDown = false;\n    this.target.gotoAndStop(this._isOver ? CjsButtonLabels.Over : this.getActingOutFrameLabel());\n  }\n}\n","import IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport { CjsButtonLabels } from './CjsButtonLabels';\nimport ICjsButton from './ICjsButton';\nimport { CjsEvents } from '../../events/CjsEvents';\nimport CjsButtonEvents from './CjsButtonEvents';\nimport CjsDisplayObject from '../display/CjsDisplayObject';\nimport CjsDefaultButtonDisplayType from './CjsDefaultButtonDisplayType';\nimport { CjsGetTextObject, CjsTextObject } from '../CjsGetTextObject';\nimport CjsSetText from '../CjsSetText';\nimport CjsButtonHelper from './CjsButtonHelper';\n\nexport const CjsButtonDisplayObjectNames = {\n  LabelText: 'txtLabel',\n} as const;\n\nexport default class CjsButton<\n  ButtonDisplayType extends CjsDefaultButtonDisplayType = CjsDefaultButtonDisplayType\n> extends CjsDisplayObject<ButtonDisplayType> implements ICjsButton<ButtonDisplayType> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly helper: CjsButtonHelper;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: ButtonDisplayType,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor) {\n    super(display);\n\n    display.stop();\n    this.helper = this.createButtonHelper(hitAreaOrAnLibClipCtor);\n    this.cjsEventsHandler.on(CjsEvents.CLICK, this.onDisplayClick, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get buttonLabel(): CjsTextObject | undefined {\n    return (CjsGetTextObject(this.display, CjsButtonDisplayObjectNames.LabelText));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get buttonLabelText(): string {\n    return (this.getButtonLabelText());\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set buttonLabelText(value: string) {\n    this.setButtonLabelText(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n    this.helper.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getButtonLabelText(): string {\n    return (this.buttonLabel?.text ?? '');\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isDown(): boolean {\n    return (this.helper.isDown);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isOver(): boolean {\n    return (this.helper.isOver);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override setEnabled(isEnabled: boolean): this {\n    super.setEnabled(isEnabled);\n    this.helper.enabled = isEnabled;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setButtonLabelText(label: string): this {\n    const txtLabel = CjsGetTextObject(this.display, CjsButtonDisplayObjectNames.LabelText);\n    CjsSetText(txtLabel, label);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setSelected(isSelected: boolean): this {\n    this.helper.setSelected(isSelected);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setShouldUseDisabledState(shouldUseDisabledState: boolean): this {\n    this.helper.shouldUseDisabledState = shouldUseDisabledState;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override setVisible(isVisible: boolean): this {\n    super.setVisible(isVisible);\n    if (isVisible !== this.visible) {\n      this.helper.onTargetVisibilityChanged();\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get shouldUseDisabledState(): boolean {\n    return (this.helper.shouldUseDisabledState);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set shouldUseDisabledState(value: boolean) {\n    this.setShouldUseDisabledState(value);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private createButtonHelper(\n    HitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): CjsButtonHelper {\n    let hitArea: createjs.DisplayObject | undefined;\n    if (HitAreaOrAnLibClipCtor) {\n      hitArea = HitAreaOrAnLibClipCtor instanceof createjs.DisplayObject\n        ? HitAreaOrAnLibClipCtor\n        : new HitAreaOrAnLibClipCtor();\n    }\n\n    const helper = new CjsButtonHelper(this.display, CjsButtonLabels.Out, CjsButtonLabels.Over,\n      CjsButtonLabels.Down, hitArea, CjsButtonLabels.Hit);\n\n    return (helper);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDisplayClick(_event: createjs.MouseEvent): void {\n    this.emit(CjsButtonEvents.PRESSED, this);\n  }\n}\n","import IMovieClipDisplayCtor from '../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsGetMovieClip from './CjsGetMovieClip';\nimport CjsButton from './buttons/CjsButton';\nimport CjsButtonCallback from './buttons/CjsButtonCallback';\nimport CjsButtonEvents from './buttons/CjsButtonEvents';\nimport CjsDefaultButtonDisplayType from './buttons/CjsDefaultButtonDisplayType';\n\nexport default function CjsGetButton<\n  ButtonDisplayType extends CjsDefaultButtonDisplayType = CjsDefaultButtonDisplayType\n>(container: createjs.Container,\n  movieClipDisplayOrName: string | ButtonDisplayType, callback?: CjsButtonCallback,\n  hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  context?: unknown): CjsButton<ButtonDisplayType> | undefined {\n  const display = typeof (movieClipDisplayOrName) === 'string'\n    ? CjsGetMovieClip(container, movieClipDisplayOrName)\n    : movieClipDisplayOrName;\n\n  const button = display\n    ? new CjsButton(display as ButtonDisplayType, hitAreaOrAnLibClipCtor)\n    : undefined;\n\n  if (button && callback) {\n    button.addListener(CjsButtonEvents.PRESSED, callback, context);\n  }\n\n  return (button);\n}\n","import CjsButton from './CjsButton';\nimport CjsGetButton from '../CjsGetButton';\nimport ICjsButton from './ICjsButton';\nimport IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsButtonEvents from './CjsButtonEvents';\nimport CjsDisplayObject from '../display/CjsDisplayObject';\nimport CjsDefaultButtonDisplayType from './CjsDefaultButtonDisplayType';\nimport ICjsCompoundButton from './ICjsCompoundButton';\n\nexport default class CjsCompoundButton<\n  DisplayType extends createjs.Container = createjs.Container,\n  ButtonDisplayType extends CjsDefaultButtonDisplayType = CjsDefaultButtonDisplayType\n> extends CjsDisplayObject<DisplayType>\n  implements ICjsCompoundButton<DisplayType, ButtonDisplayType> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly _buttons: (CjsButton<ButtonDisplayType> | undefined)[];\n\n  private readonly defaultButton: CjsButton<ButtonDisplayType> | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: DisplayType,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n    buttonDisplayNames: string | string[] = 'buttonDisplay') {\n    super(container);\n\n    if (typeof (buttonDisplayNames) === 'string') {\n      buttonDisplayNames = [buttonDisplayNames];\n    }\n\n    this._buttons = this.onInitButtons(container, buttonDisplayNames, hitAreaOrAnLibClipCtor)\n      || this.initButtons(container, buttonDisplayNames, hitAreaOrAnLibClipCtor);\n\n    this.defaultButton = this._buttons.find((b) => !!b);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get button(): ICjsButton<ButtonDisplayType> | undefined {\n    return (this.defaultButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n    this.forEachButton((button) => {\n      button.dispose();\n    });\n\n    this._buttons.length = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  forEachButton(callback: (button: ICjsButton<ButtonDisplayType>) => void,\n    context?: unknown): this {\n    this._buttons.forEach((button) => {\n      if (button) {\n        callback.call(context, button);\n      }\n    });\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getButtonAt(index: number): ICjsButton<ButtonDisplayType> | undefined {\n    return (this._buttons[index]);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getButtonByName(name: string): ICjsButton<ButtonDisplayType> | undefined {\n    return (this._buttons.find((button) => button?.name === name));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isDown(): boolean {\n    return (this.defaultButton?.isDown === true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isOver(): boolean {\n    return (this.defaultButton?.isOver === true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override setEnabled(isEnabled: boolean): this {\n    super.setEnabled(isEnabled);\n    this.forEachButton((button) => {\n      button.enabled = isEnabled;\n    });\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setShouldUseDisabledState(shouldUseDisabledState: boolean): this {\n    this.forEachButton((button) => {\n      button.setShouldUseDisabledState(shouldUseDisabledState);\n    });\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get shouldUseDisabledState(): boolean {\n    return (this.defaultButton?.shouldUseDisabledState === true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set shouldUseDisabledState(value: boolean) {\n    this.setShouldUseDisabledState(value);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected onButtonCallback(): void {\n    this.emit(CjsButtonEvents.PRESSED, this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  // eslint-disable-next-line class-methods-use-this\n  protected onInitButtons(\n    _container: DisplayType,\n    _buttonDisplayNames: string[],\n    _hitAreaOrAnLibClipCtor: createjs.DisplayObject | IMovieClipDisplayCtor | undefined,\n  ): (CjsButton<ButtonDisplayType> | undefined)[] | undefined {\n    return (undefined);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private initButtons(\n    container: DisplayType,\n    buttonDisplayNames: string[],\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): (CjsButton<ButtonDisplayType> | undefined)[] {\n    const buttons: (CjsButton<ButtonDisplayType> | undefined)[] = [];\n\n    buttonDisplayNames.forEach((name) => {\n      const button = CjsGetButton(container, name, this.onButtonCallback,\n        hitAreaOrAnLibClipCtor, this) as CjsButton<ButtonDisplayType> | undefined;\n      buttons.push(button);\n    });\n\n    return (buttons);\n  }\n}\n","import CjsGetDisplayObject from './CjsGetDisplayObject';\n\nexport default function CjsGetContainer<\n  T extends createjs.Container = createjs.Container\n>(container: createjs.Container,\n  name: string): T | undefined {\n  const _container = CjsGetDisplayObject(container, name);\n  return (_container instanceof createjs.Container ? _container as T : undefined);\n}\n","const CjsCheckboxCompNames = {\n  OffButton: 'off_display',\n  OnButton: 'on_display',\n} as const;\n\nexport default CjsCheckboxCompNames;\n","import IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsGetButton from '../CjsGetButton';\nimport CjsButton from './CjsButton';\nimport ICjsCheckbox from './ICjsCheckbox';\nimport CjsButtonEvents from './CjsButtonEvents';\nimport CjsCheckboxCompNames from './CjsCheckboxCompNames';\nimport CjsDefaultCheckboxDisplayType from './CjsDefaultCheckboxDisplayType';\nimport CjsDefaultButtonDisplayType from './CjsDefaultButtonDisplayType';\nimport CjsCompoundButton from './CjsCompoundButton';\n\nexport default class CjsCheckbox<\n  CheckboxDisplayType extends CjsDefaultCheckboxDisplayType = CjsDefaultCheckboxDisplayType,\n  ButtonDisplayType extends CjsDefaultButtonDisplayType = CjsDefaultButtonDisplayType\n> extends CjsCompoundButton<CheckboxDisplayType, ButtonDisplayType>\n  implements ICjsCheckbox<CheckboxDisplayType> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private _offButton: CjsButton<ButtonDisplayType> | undefined;\n\n  private _onButton: CjsButton<ButtonDisplayType> | undefined;\n\n  private _isOn!: boolean;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: CheckboxDisplayType, isOn = false,\n    hitAreaOrAnLibClipCtor: createjs.DisplayObject | IMovieClipDisplayCtor\n    | undefined = undefined, onDisplayName = CjsCheckboxCompNames.OnButton,\n    offDisplayName = CjsCheckboxCompNames.OffButton) {\n    super(display, hitAreaOrAnLibClipCtor, [onDisplayName, offDisplayName]);\n    this._onButton = this.getButtonByName(onDisplayName) as CjsButton<ButtonDisplayType>;\n    this._offButton = this.getButtonByName(offDisplayName) as CjsButton<ButtonDisplayType>;\n    this.isOn = isOn;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n\n    this._offButton?.dispose();\n    this._offButton = undefined;\n\n    this._onButton?.dispose();\n    this._onButton = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override get isDown(): boolean {\n    return (this.activeButton?.isDown ?? false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isOn(): boolean {\n    return (this._isOn);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set isOn(value: boolean) {\n    this.setOn(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override get isOver(): boolean {\n    return (this.activeButton?.isOver ?? false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get offButton(): CjsButton<ButtonDisplayType> | undefined {\n    return (this._offButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get onButton(): CjsButton<ButtonDisplayType> | undefined {\n    return (this._onButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setOn(isOn: boolean): this {\n    if (isOn === this._isOn) {\n      return (this);\n    }\n\n    this.activeButton?.setVisible(false);\n    this._isOn = isOn;\n    this.activeButton?.setVisible(true);\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected override onInitButtons(\n    _container: CheckboxDisplayType,\n    buttonDisplayNames: string[],\n    hitAreaOrAnLibClipCtor: createjs.DisplayObject | IMovieClipDisplayCtor | undefined,\n  ): (CjsButton<ButtonDisplayType> | undefined)[] | undefined {\n    const [onDisplayName, offDisplayName] = buttonDisplayNames;\n    let onButton: CjsButton<ButtonDisplayType> | undefined;\n    let offButton: CjsButton<ButtonDisplayType> | undefined;\n\n    if (onDisplayName) {\n      onButton = this.initStateButton(onDisplayName, hitAreaOrAnLibClipCtor);\n    }\n\n    if (offDisplayName) {\n      offButton = this.initStateButton(offDisplayName, hitAreaOrAnLibClipCtor);\n    }\n\n    return ([\n      onButton,\n      offButton,\n    ]);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private get activeButton(): CjsButton | undefined {\n    return (this.isOn ? this._onButton : this._offButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initStateButton(\n    displayName: string,\n    HitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): CjsButton<ButtonDisplayType> | undefined {\n    const button = CjsGetButton<ButtonDisplayType>(this.display, displayName, this.onButtonPressed,\n      HitAreaOrAnLibClipCtor, this);\n\n    if (!button) {\n      console.warn(`no state button display found with name: ${displayName}`);\n    }\n\n    return (button?.setVisible(false));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(): void {\n    this.isOn = !this._isOn;\n    this.emit(CjsButtonEvents.PRESSED, this);\n  }\n}\n","import IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsGetMovieClip from '../CjsGetMovieClip';\nimport CjsButtonEvents from './CjsButtonEvents';\nimport CjsCheckbox from './CjsCheckbox';\nimport CjsCheckboxCallback from './CjsCheckboxCallback';\n\nfunction CjsCreateCheckbox(container: createjs.Container, displayName: string, isOn?: boolean,\n  callback?: CjsCheckboxCallback | undefined, context?: unknown,\n  hitAreaOrAnLibClipCtor?: createjs.DisplayObject\n  | IMovieClipDisplayCtor): CjsCheckbox | undefined {\n  const checkboxDisplay = CjsGetMovieClip(container, displayName);\n  if (!checkboxDisplay) {\n    return (undefined);\n  }\n\n  const checkbox = new CjsCheckbox(checkboxDisplay, isOn, hitAreaOrAnLibClipCtor);\n  if (callback) {\n    checkbox.addListener(CjsButtonEvents.PRESSED, callback, context);\n  }\n\n  return (checkbox);\n}\n\nexport default CjsCreateCheckbox;\n","import EventEmitter from 'eventemitter3';\nimport CjsGetButton from '../../utils/createjs/objects/CjsGetButton';\nimport CjsButton from '../../utils/createjs/objects/buttons/CjsButton';\nimport CjsButtonCallback from '../../utils/createjs/objects/buttons/CjsButtonCallback';\nimport SbUiComponentEvents from './events/SbUiComponentEvents';\nimport CjsCompoundButton from '../../utils/createjs/objects/buttons/CjsCompoundButton';\nimport CjsGetContainer from '../../utils/createjs/objects/CjsGetContainer';\nimport { CjsGetTextObject, CjsTextObject } from '../../utils/createjs/objects/CjsGetTextObject';\nimport IMovieClipDisplayCtor from '../../utils/adobeAnimate/IMovieClipDisplayCtor';\nimport CjsCheckbox from '../../utils/createjs/objects/buttons/CjsCheckbox';\nimport CjsCreateCheckbox from '../../utils/createjs/objects/buttons/CjsCreateCheckbox';\nimport CjsButtonEvents from '../../utils/createjs/objects/buttons/CjsButtonEvents';\nimport CjsCompoundButtonCallback from '../../utils/createjs/objects/buttons/CjsCompoundButtonCallback';\nimport IStorybookEngine from '../IStorybookEngine';\nimport CjsGetDisplayObject from '../../utils/createjs/objects/CjsGetDisplayObject';\n\nconst DisplayObjectNames = {\n  CloseButton: 'closeButtonDisplay',\n} as const;\n\nexport default abstract class SbUiComponent extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  readonly container: createjs.MovieClip;\n\n  protected closeButton: CjsButton | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super();\n\n    this.container = container;\n    this.container.stop();\n    this.engine = engine;\n    this.onInit();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.removeAllListeners();\n    this.closeButton = CjsButton.Dispose(this.closeButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  initButton(displayName: string, callback: CjsButtonCallback,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n    container?: createjs.Container, context?: unknown): CjsButton | undefined {\n    container = container ?? this.container;\n    context = context === undefined ? this : context;\n    const button = CjsGetButton(container, displayName, callback, hitAreaOrAnLibClipCtor, context);\n    button?.on(CjsButtonEvents.PRESSED, this.onButtonPressed, this);\n    return (button);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  initCheckbox(displayName: string, callback?: CjsButtonCallback, isOn?: boolean,\n    container?: createjs.Container, context?: unknown,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject\n    | IMovieClipDisplayCtor): CjsCheckbox | undefined {\n    container = container ?? this.container;\n    context = context === undefined ? this : context;\n    const checkbbox = CjsCreateCheckbox(container, displayName, isOn, callback, context,\n      hitAreaOrAnLibClipCtor);\n\n    checkbbox?.on(CjsButtonEvents.PRESSED, this.onCheckboxPressed, this);\n    return (checkbbox);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  initCompoundButton(displayName: string,\n    callback: CjsCompoundButtonCallback, container?: createjs.Container,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n    context?: unknown): CjsCompoundButton | undefined {\n    container = container ?? this.container;\n    context = context === undefined ? this : context;\n    const cpButtonContainer = CjsGetContainer(container, displayName);\n    if (!cpButtonContainer) {\n      return (undefined);\n    }\n\n    const cpButton = new CjsCompoundButton(cpButtonContainer, hitAreaOrAnLibClipCtor);\n    cpButton.on(CjsButtonEvents.PRESSED, this.onButtonPressed, this);\n    cpButton.on(CjsButtonEvents.PRESSED, callback, context);\n    return (cpButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setVisible(isVisible: boolean): this {\n    this.visible = isVisible;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get visible(): boolean {\n    return (this.container.visible);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set visible(value: boolean) {\n    this.container.visible = value;\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected clearText(textObject: CjsTextObject | undefined): this {\n    return (this.setText(textObject, ''));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected initCloseButton(\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): CjsButton | undefined {\n    const closeButton = this.initButton(DisplayObjectNames.CloseButton, this.onClosePressed,\n      hitAreaOrAnLibClipCtor);\n    return (closeButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected initDisplayObject<T extends createjs.DisplayObject = createjs.DisplayObject>(\n    displayName: string,\n    container?: createjs.Container,\n  ): T | undefined {\n    container = container ?? this.container;\n    return (CjsGetDisplayObject(container, displayName));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected initMovieClip<T extends createjs.MovieClip = createjs.MovieClip>(\n    displayName: string,\n    container?: createjs.Container,\n  ): T | undefined {\n    return (this.initDisplayObject<T>(displayName, container));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected initText<T extends CjsTextObject = CjsTextObject>(displayName: string,\n    container?: createjs.Container): T | undefined {\n    container = container ?? this.container;\n    return (CjsGetTextObject(container, displayName) as T);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected onClosePressed(): void {\n    this.emit(SbUiComponentEvents.CLOSE, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected onInit(\n    closeButtonHitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): void {\n    this.closeButton = this.initCloseButton(closeButtonHitAreaOrAnLibClipCtor);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected setText(textObject: CjsTextObject | undefined, text: number | string): this {\n    if (textObject) {\n      textObject.text = typeof (text) === 'number' ? text.toString(10) : text;\n    }\n\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(): void {\n    this.engine.playSound(this.engine.lib.audioIds.RadioHeavyButtonPress);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onCheckboxPressed(): void {\n    this.engine.playSound(this.engine.lib.audioIds.RadioLightButtonPress);\n  }\n}\n","const GlobalDomEvents = {\n  Abort: 'abort',\n  AnimationCancel: 'animationcancel',\n  AnimationEnd: 'animationend',\n  AnimationIteration: 'animationiteration',\n  AnimationStart: 'animationstart',\n  AuxClick: 'auxclick',\n  BeforeInput: 'beforeinput',\n  Blur: 'blur',\n  Cancel: 'cancel',\n  CanPlay: 'canplay',\n  CanPlayThrough: 'canplaythrough',\n  Change: 'change',\n  Click: 'click',\n  Close: 'close',\n  CompositionEnd: 'compositionend',\n  CompositionStart: 'compositionstart',\n  CompositionUpdate: 'compositionupdate',\n  ContextMenu: 'contextmenu',\n  Copy: 'copy',\n  CueChange: 'cuechange',\n  Cut: 'cut',\n  DoubleClick: 'dblclick',\n  Drag: 'drag',\n  DragEnd: 'dragend',\n  DragEnter: 'dragenter',\n  DragLeave: 'dragleave',\n  DragOver: 'dragover',\n  DragStart: 'dragstart',\n  Drop: 'drop',\n  DurationChange: 'durationchange',\n  Emptied: 'emptied',\n  Ended: 'ended',\n  Error: 'error',\n  Focus: 'focus',\n  FocusIn: 'focusin',\n  FocusOut: 'focusout',\n  FormData: 'formdata',\n  GotPointercapture: 'gotpointercapture',\n  Input: 'input',\n  Invalid: 'invalid',\n  KeyDown: 'keydown',\n  KeyPress: 'keypress',\n  KeyUp: 'keyup',\n  Load: 'load',\n  LoadedData: 'loadeddata',\n  LoadedMetadata: 'loadedmetadata',\n  LoadStart: 'loadstart',\n  LostPointerCapture: 'lostpointercapture',\n  MouseDown: 'mousedown',\n  MouseEnter: 'mouseenter',\n  MouseLeave: 'mouseleave',\n  MouseMove: 'mousemove',\n  MouseOut: 'mouseout',\n  MouseOver: 'mouseover',\n  MouseUp: 'mouseup',\n  Paste: 'paste',\n  Pause: 'pause',\n  Play: 'play',\n  Playing: 'playing',\n  PointerDancel: 'pointercancel',\n  PointerDown: 'pointerdown',\n  PointerEnter: 'pointerenter',\n  PointerLeave: 'pointerleave',\n  PointerMove: 'pointermove',\n  PointerOut: 'pointerout',\n  PointerOver: 'pointerover',\n  PointerUp: 'pointerup',\n  Progress: 'progress',\n  RateChange: 'ratechange',\n  Reset: 'reset',\n  Resize: 'resize',\n  Scroll: 'scroll',\n  ScrollEnd: 'scrollend',\n  SecurityPolicyViolation: 'securitypolicyviolation',\n  Seeked: 'seeked',\n  Seeking: 'seeking',\n  Select: 'select',\n  SelectionChange: 'selectionchange',\n  SelectStart: 'selectstart',\n  SlotChange: 'slotchange',\n  Stalled: 'stalled',\n  Submit: 'submit',\n  Suspend: 'suspend',\n  TimeUpdate: 'timeupdate',\n  Toggle: 'toggle',\n  TouchCancel: 'touchcancel',\n  TouchEnd: 'touchend',\n  TouchMove: 'touchmove',\n  TouchStart: 'touchstart',\n  TransitionCancel: 'transitioncancel',\n  TransitionEnd: 'transitionend',\n  TransitionRun: 'transitionrun',\n  TransitionStart: 'transitionstart',\n  VolumeChange: 'volumechange',\n  Waiting: 'waiting',\n  WebkitAnimationEnd: 'webkitanimationend',\n  WebkitAnimationIteration: 'webkitanimationiteration',\n  WebkitAnimationStart: 'webkitanimationstart',\n  WebkitTransitionEnd: 'webkittransitionend',\n  Wheel: 'wheel',\n} as const;\n\ntype GlobalDomEvent = typeof GlobalDomEvents[keyof typeof GlobalDomEvents];\n\nexport {\n  GlobalDomEvent,\n  GlobalDomEvents,\n};\n","const KeyCodes = {\n  AltLeft: 'AltLeft',\n  AltRight: 'AltRight',\n  ArrowDown: 'ArrowDown',\n  ArrowLeft: 'ArrowLeft',\n  ArrowRight: 'ArrowRight',\n  ArrowUp: 'ArrowUp',\n  Backquote: 'Backquote',\n  Backslash: 'Backslash',\n  Backspace: 'Backspace',\n  BracketLeft: 'BracketLeft',\n  BracketRight: 'BracketRight',\n  CapsLock: 'CapsLock',\n  Comma: 'Comma',\n  ContextMenu: 'ContextMenu',\n  ControlLeft: 'ControlLeft',\n  ControlRight: 'ControlRight',\n  Delete: 'Delete',\n  Digit0: 'Digit0',\n  Digit1: 'Digit1',\n  Digit2: 'Digit2',\n  Digit3: 'Digit3',\n  Digit4: 'Digit4',\n  Digit5: 'Digit5',\n  Digit6: 'Digit6',\n  Digit7: 'Digit7',\n  Digit8: 'Digit8',\n  Digit9: 'Digit9',\n  End: 'End',\n  Equal: 'Equal',\n  Enter: 'Enter',\n  F1: 'F1',\n  F2: 'F2',\n  F3: 'F3',\n  F4: 'F4',\n  F5: 'F5',\n  F6: 'F6',\n  F7: 'F7',\n  F8: 'F8',\n  F9: 'F9',\n  F10: 'F10',\n  F11: 'F11',\n  F12: 'F12',\n  Home: 'Home',\n  Insert: 'Insert',\n  KeyA: 'KeyA',\n  KeyB: 'KeyB',\n  KeyC: 'KeyC',\n  KeyD: 'KeyD',\n  KeyE: 'KeyE',\n  KeyF: 'KeyF',\n  KeyG: 'KeyG',\n  KeyH: 'KeyH',\n  KeyI: 'KeyI',\n  KeyJ: 'KeyJ',\n  KeyK: 'KeyK',\n  KeyL: 'KeyL',\n  KeyM: 'KeyM',\n  KeyN: 'KeyN',\n  KeyO: 'KeyO',\n  KeyP: 'KeyP',\n  KeyQ: 'KeyQ',\n  KeyR: 'KeyR',\n  KeyS: 'KeyS',\n  KeyT: 'KeyT',\n  KeyU: 'KeyU',\n  KeyV: 'KeyV',\n  KeyW: 'KeyW',\n  KeyX: 'KeyX',\n  KeyY: 'KeyY',\n  KeyZ: 'KeyZ',\n  MetaLeft: 'MetaLeft',\n  MetaRight: 'MetaRight',\n  Minus: 'Minus',\n  Numpad0: 'Numpad0',\n  Numpad1: 'Numpad1',\n  Numpad2: 'Numpad2',\n  Numpad3: 'Numpad3',\n  Numpad4: 'Numpad4',\n  Numpad5: 'Numpad5',\n  Numpad6: 'Numpad6',\n  Numpad7: 'Numpad7',\n  Numpad8: 'Numpad8',\n  Numpad9: 'Numpad9',\n  NumpadAdd: 'NumpadAdd',\n  NumpadBackspace: 'NumpadBackspace',\n  NumpadClear: 'NumpadClear',\n  NumpadComma: 'NumpadComma',\n  NumpadDecimal: 'NumpadDecimal',\n  NumpadDivide: 'NumpadDivide',\n  NumpadEnter: 'NumpadEnter',\n  NumpadEqual: 'NumpadEqual',\n  NumpadMultiply: 'NumpadMultiply',\n  NumpadSubtract: 'NumpadSubtract',\n  PageDown: 'PageDown',\n  PageUp: 'PageUp',\n  Period: 'Period',\n  Quote: 'Quote',\n  Semicolon: 'Semicolon',\n  ShiftLeft: 'ShiftLeft',\n  ShiftRight: 'ShiftRight',\n  Slash: 'Slash',\n  Space: 'Space',\n  Tab: 'Tab',\n} as const;\n\ntype KeyCode = typeof KeyCodes[keyof typeof KeyCodes];\n\nconst KeyCodesArray = Object.values(KeyCodes) as ReadonlyArray<KeyCode>;\n\nexport {\n  KeyCode,\n  KeyCodes,\n  KeyCodesArray,\n};\n","const SbInputDeviceHandlerEvents = {\n  NEXT: 'next',\n  SELECT: 'select',\n} as const;\n\nexport default SbInputDeviceHandlerEvents;\n","/**\n * Determines whether an object has a property with the specified name. This function calls\n * `Object.prototype.hasOwnProperty.call(source, key)` to get around ESLint's\n * \"no-prototype-builtins\" rule:\n * https://eslint.org/docs/rules/no-prototype-builtins\n *\n * @param source - The object to search.\n * @param key - The key for the property on source.\n *\n * @returns True if the property is found; false otherwise.\n */\nexport default function HasOwnProperty(source: unknown, key: string): boolean {\n  return (Object.prototype.hasOwnProperty.call(source, key));\n}\n","import HasOwnProperty from './HasOwnProperty';\n\n/**\n * Returns the value of a property key within the top level of an object, or returns a\n * default value if the key is not found. This is a generic function; for primitive types, it's\n * recommended to use one of the specific `getXvalue` functions instead.\n *\n * @param source - The object to search.\n * @param key - The key for the property on source. Must exist at the top level of the\n * source object (no periods).\n * @param [defaultValue] - The default value to use if the key does not exist.\n *\n * @returns The value if found; otherwise, `defaultValue`.\n */\nexport default function GetValue<T>(source: unknown, key: string, defaultValue: T): T {\n  if (!source) {\n    return (defaultValue);\n  }\n\n  const sourceType = typeof (source);\n  if (sourceType === 'number' || sourceType === 'string' || sourceType === 'boolean') {\n    return (defaultValue);\n  }\n\n  const sourceRecord = <Record<string, T>>source;\n  if (HasOwnProperty(sourceRecord, key) && sourceRecord[key] !== undefined) {\n    return (sourceRecord[key] as T);\n  }\n\n  return (defaultValue);\n}\n","import IsValidNumber from '../number/IsValidNumber';\nimport GetValue from './GetValue';\n\n/**\n * Returns the number value of a property key within the top level of an object, or returns a\n * default value if the key is not found.\n *\n * @param source - The object to search.\n * @param key - The key for the property on source. Must exist at the top level of the\n * source object (no periods).\n * @param [defaultValue=0] - The default value to use if the key does not exist.\n *\n * @returns The value if found; otherwise, `defaultValue` (`0` if none provided).\n */\nexport default function GetNumberValue(source: unknown, key: string, defaultValue = 0): number {\n  const value = GetValue(source, key, defaultValue);\n  return (IsValidNumber(value) ? value : defaultValue);\n}\n","import GetNumberValue from '../object/GetNumberValue';\nimport TimerCallback from './TimerCallback';\nimport TimerConfig from './TimerConfig';\n\nexport default class Timer<ParamsType = unknown> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  callback: TimerCallback<ParamsType> | undefined;\n\n  context: unknown;\n\n  private delayMs: number;\n\n  private repeatCount: number;\n\n  private currentRepeatCount: number;\n\n  private isRunning: boolean;\n\n  private timerId: NodeJS.Timeout | null;\n\n  private params: ParamsType | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(config?: TimerConfig<ParamsType>) {\n    const _config = config ?? {} as TimerConfig<ParamsType>;\n    this.delayMs = Math.floor(Math.max(0, GetNumberValue(_config, 'delayMs', 1000)));\n    this.repeatCount = Math.floor(GetNumberValue(_config, 'repeat', 0));\n    this.callback = _config.callback;\n    this.context = _config.context;\n    this.params = _config.params;\n\n    this.onInterval = this.onInterval.bind(this);\n\n    this.currentRepeatCount = 0;\n    this.timerId = null;\n    this.isRunning = false;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Create<ParamsType = unknown>(config?: TimerConfig<ParamsType>): Timer<ParamsType> {\n    const timer = new Timer(config);\n    timer.start();\n    return (timer);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Dispose<ParamsType = unknown>(timer: Timer<ParamsType> | undefined): undefined {\n    if (timer) {\n      timer.stop();\n    }\n\n    return (undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(): void {\n    if (this.isRunning) {\n      return;\n    }\n\n    this.currentRepeatCount = 0;\n    this.timerId = setInterval(this.onInterval, this.delayMs);\n    this.isRunning = true;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(): void {\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n      this.timerId = null;\n    }\n\n    this.isRunning = false;\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onInterval(): void {\n    if (this.callback) {\n      this.callback.call(this.context, this.params, this);\n    }\n\n    if (this.repeatCount === 0) {\n      this.stop();\n    } else if (this.repeatCount > 0) {\n      const currentRepeatCount = this.currentRepeatCount + 1;\n      if (currentRepeatCount > this.repeatCount) {\n        this.stop();\n      } else {\n        this.currentRepeatCount = currentRepeatCount;\n      }\n    }\n  }\n}\n","import EventEmitter from 'eventemitter3';\nimport { GlobalDomEvents } from '../../../utils/web/dom/GlobalDomEvents';\nimport { KeyCodes } from '../../../utils/web/keys/KeyCodes';\nimport SbInputDeviceHandlerEvents from './SbInputDeviceHandlerEvents';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport { SbInputDevices } from '../../data/SbInputDevices';\nimport Timer from '../../../utils/timers/Timer';\nimport SbDefaults from '../../data/defaults/SbDefaults';\n\nexport default class SbInputDeviceHandler extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  private singleSwitchTimer: Timer | undefined;\n\n  private _isEnabled: boolean;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    super();\n\n    this.engine = engine;\n    this.onDocumentKeyUp = this.onDocumentKeyUp.bind(this);\n    this._isEnabled = false;\n    this.updateFromSettings();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.isEnabled = false;\n    this.removeAllListeners();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  isDualSwitchEnabled(): boolean {\n    return (this.engine.userSettingsData.device.inputDevice === SbInputDevices.DualSwitch);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get isEnabled(): boolean {\n    return (this._isEnabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set isEnabled(value: boolean) {\n    this.setEnabled(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  isSingleSwitchEnabled(): boolean {\n    return (this.engine.userSettingsData.device.inputDevice === SbInputDevices.SingleSwitch);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setEnabled(isEnabled: boolean): this {\n    if (isEnabled === this._isEnabled) {\n      return (this);\n    }\n\n    this._isEnabled = isEnabled;\n\n    if (this._isEnabled) {\n      document.addEventListener(GlobalDomEvents.KeyUp, this.onDocumentKeyUp);\n    } else {\n      document.removeEventListener(GlobalDomEvents.KeyUp, this.onDocumentKeyUp);\n    }\n\n    this.handleSingleSwitch();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): boolean {\n    const newEnabled = this.isSingleSwitchEnabled() || this.isDualSwitchEnabled();\n    if (this.isEnabled !== newEnabled) {\n      this.setEnabled(newEnabled);\n    } else {\n      this.handleSingleSwitch();\n    }\n\n    return (this.isEnabled);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private handleSingleSwitch(): boolean {\n    if (this.isEnabled && this.isSingleSwitchEnabled()) {\n      this.handleSingleSwitchEnable();\n      return (true);\n    }\n\n    this.handleSingleSwitchDisable();\n    return (false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private handleSingleSwitchDisable(): void {\n    this.singleSwitchTimer?.stop();\n    this.singleSwitchTimer = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private handleSingleSwitchEnable(): void {\n    if (this.singleSwitchTimer) {\n      return;\n    }\n\n    this.singleSwitchTimer = Timer.Create({\n      callback: () => {\n        this.emit(SbInputDeviceHandlerEvents.NEXT, this);\n      },\n\n      delayMs: SbDefaults.EngineConfig.singleDeviceDelayMs,\n      repeat: -1,\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDocumentKeyUp(event: KeyboardEvent): void {\n    if (event.code === KeyCodes.Space) {\n      this.emit(SbInputDeviceHandlerEvents.NEXT, this);\n    } else if (event.code === KeyCodes.Enter) {\n      this.emit(SbInputDeviceHandlerEvents.SELECT, this);\n    }\n  }\n}\n","const CjsDragManagerEvents = {\n  DRAG: 'drag',\n  START: 'start',\n  STOP: 'stop',\n};\n\nexport default CjsDragManagerEvents;\n","import EventEmitter from 'eventemitter3';\nimport CjsDragManagerEvents from './CjsDragManagerEvents';\nimport CjsEventsHandler from '../../events/CjsEventsHandler';\nimport { CjsEvents } from '../../events/CjsEvents';\nimport IPoint from '../../../geom/IPoint';\nimport Clamp from '../../../math/Clamp';\n\nexport default class CjsDragManager<\n  DisplayType extends createjs.DisplayObject = createjs.DisplayObject\n> extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly displayTarget: DisplayType;\n\n  dragBounds: createjs.Rectangle | null;\n\n  private readonly cjsEventsHandler: CjsEventsHandler;\n\n  private readonly inputTarget: createjs.DisplayObject;\n\n  private dragOffset: IPoint;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(displayTarget: DisplayType, inputTarget?: createjs.DisplayObject) {\n    super();\n\n    this.displayTarget = displayTarget;\n    this.inputTarget = inputTarget ?? this.displayTarget;\n\n    this.cjsEventsHandler = new CjsEventsHandler(this.inputTarget)\n      .on(CjsEvents.MOUSE_DOWN, this.onDisplayMouseDown, this)\n      .on(CjsEvents.PRESS_MOVE, this.onDisplayPressMove, this)\n      .on(CjsEvents.PRESS_UP, this.onDisplayPressUp, this);\n\n    this.dragOffset = {\n      x: 0,\n      y: 0,\n    };\n\n    this.dragBounds = null;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  clearDragBounds(): this {\n    this.dragBounds = null;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.removeAllListeners();\n    this.cjsEventsHandler.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setDragBounds(sourceBounds: createjs.Rectangle): this {\n    if (this.dragBounds) {\n      this.dragBounds.copy(sourceBounds);\n    } else {\n      this.dragBounds = sourceBounds.clone();\n    }\n\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onDisplayMouseDown(event: createjs.MouseEvent): void {\n    this.dragOffset.x = event.localX;\n    this.dragOffset.y = event.localY;\n    this.emit(CjsDragManagerEvents.START, event, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDisplayPressMove(event: createjs.MouseEvent): void {\n    let x = this.displayTarget.x + event.localX - this.dragOffset.x;\n    let y = this.displayTarget.y + event.localY - this.dragOffset.y;\n    if (this.dragBounds) {\n      x = Clamp(x, this.dragBounds.x, this.dragBounds.x + this.dragBounds.width);\n      y = Clamp(y, this.dragBounds.y, this.dragBounds.y + this.dragBounds.height);\n    }\n\n    this.displayTarget.x = x;\n    this.displayTarget.y = y;\n    this.emit(CjsDragManagerEvents.DRAG, event, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDisplayPressUp(event: createjs.MouseEvent): void {\n    this.dragOffset.x = 0;\n    this.dragOffset.y = 0;\n    this.emit(CjsDragManagerEvents.STOP, event, this);\n  }\n}\n","const CjsSliderEvents = {\n  /**\n   * Dispatched when the value of a CjsSlider has changed.\n   *\n   * ```\n   * function onSliderChanged(slider: ICjsSlider): void;\n   * ```\n   */\n  CHANGED: 'changed',\n\n  /**\n   * Dispatched when the user has begun a dragging session by pressing the slider's handle\n   * or body.\n   *\n   * ```\n   * function onSliderDragStarted(slider: ICjsSlider): void;\n   * ```\n   */\n  DRAG_STARTED: 'dragStarted',\n\n  /**\n   * Dispatched when the user has ended a dragging session by releasing the slider's handle\n   * or body.\n   *\n   * ```\n   * function onSliderDragStopped(slider: ICjsSlider): void;\n   * ```\n   */\n  DRAG_STOPPED: 'dragStopped',\n} as const;\n\nexport default CjsSliderEvents;\n","const CjsSliderCompNames = {\n  Back: 'back',\n  BackHitArea: 'back_hit_area',\n  Fill: 'fill',\n  Handle: 'handle',\n} as const;\n\nexport default CjsSliderCompNames;\n","import Clamp from '../../../math/Clamp';\nimport CjsGetMovieClip from '../CjsGetMovieClip';\nimport CjsButton from '../buttons/CjsButton';\nimport CjsGetButton from '../CjsGetButton';\nimport CjsDragManager from '../../utils/dragManager/CjsDragManager';\nimport CjsDragManagerEvents from '../../utils/dragManager/CjsDragManagerEvents';\nimport CjsSliderEvents from './CjsSliderEvents';\nimport { CjsEvents } from '../../events/CjsEvents';\nimport CjsEventsHandler from '../../events/CjsEventsHandler';\nimport IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsSliderCompNames from './CjsSliderCompNames';\nimport CjsDisplayObject from '../display/CjsDisplayObject';\nimport ICjsSlider from './ICjsSlider';\n\nexport default class CjsSlider<\n  SliderDisplayType extends createjs.Container = createjs.Container\n> extends CjsDisplayObject<SliderDisplayType> implements ICjsSlider<SliderDisplayType> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly dragManager: CjsDragManager | undefined;\n\n  private readonly handle: CjsButton | undefined;\n\n  private readonly back: CjsEventsHandler | undefined;\n\n  private readonly fill: createjs.MovieClip | undefined;\n\n  private fillMask: createjs.Shape | undefined;\n\n  private fillBounds: createjs.Rectangle | undefined;\n\n  private handleBounds: createjs.Rectangle | undefined;\n\n  private backBounds: createjs.Rectangle | undefined;\n\n  private _shouldUseHandleBoundsForConstraint: boolean;\n\n  private _value!: number;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: SliderDisplayType, value?: number,\n    handleHitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor) {\n    super(display);\n\n    this._shouldUseHandleBoundsForConstraint = true;\n\n    this.handle = this.initHandle(handleHitAreaOrAnLibClipCtor);\n    this.fill = this.initFill();\n    this.back = this.initBack();\n\n    this.dragManager = this.initDragManager();\n    this.resolveSetValue(value ?? 0, true, false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n    this.dragManager?.dispose();\n    this.back?.dispose();\n    this.handle?.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override setEnabled(isEnabled: boolean): this {\n    super.setEnabled(isEnabled);\n    this.handle?.setEnabled(isEnabled);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setShouldUseHandleBoundsForConstraint(should: boolean): this {\n    if (should !== this._shouldUseHandleBoundsForConstraint) {\n      return (this);\n    }\n\n    this._shouldUseHandleBoundsForConstraint = should;\n    return (this.updateDragBounds().updateHandle());\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setValue(value: number, shouldEmitChanged = true): this {\n    this.resolveSetValue(value, true, shouldEmitChanged);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get shouldUseHandleBoundsForConstraint(): boolean {\n    return (this._shouldUseHandleBoundsForConstraint);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set shouldUseHandleBoundsForConstraint(value: boolean) {\n    this.setShouldUseHandleBoundsForConstraint(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get value(): number {\n    return (this._value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set value(x: number) {\n    this.setValue(x);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private calcDragBounds(): createjs.Rectangle | undefined {\n    if (!this.handleBounds || !this.backBounds) {\n      return (undefined);\n    }\n\n    const handleBoundsWt = this.shouldUseHandleBoundsForConstraint\n      ? this.handleBounds.width\n      : 0;\n\n    const handleBoundsWt2 = handleBoundsWt / 2;\n    const { backBounds } = this;\n    const boundxCenterY = backBounds.y + backBounds.height / 2;\n    return (new createjs.Rectangle(\n      backBounds.x + handleBoundsWt2,\n      boundxCenterY,\n      backBounds.x + backBounds.width - handleBoundsWt,\n      0,\n    ));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private handleBackMove(event: createjs.MouseEvent): void {\n    if (!this.back || !this.dragManager?.dragBounds) {\n      return;\n    }\n\n    const x1 = this.dragManager.dragBounds.x;\n    const x2 = this.dragManager.dragBounds.x + this.dragManager.dragBounds.width;\n    const range = x2 - x1;\n    const value = (event.localX - x1) / range;\n    this.resolveSetValue(value, true, true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initBack(): CjsEventsHandler | undefined {\n    const back = CjsGetMovieClip(this.display, CjsSliderCompNames.Back);\n    if (!back) {\n      return (undefined);\n    }\n\n    let backHitArea = CjsGetMovieClip(this.display, CjsSliderCompNames.BackHitArea);\n    if (backHitArea) {\n      back.hitArea = backHitArea;\n    } else {\n      backHitArea = back;\n    }\n\n    this.backBounds = backHitArea.getBounds().clone();\n    this.backBounds.width *= backHitArea.scaleX;\n    this.backBounds.height *= backHitArea.scaleY;\n\n    const eventsHandler = new CjsEventsHandler(back);\n    eventsHandler.on(CjsEvents.MOUSE_DOWN, this.onBackMouseDown, this);\n    return (eventsHandler);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initDragManager(): CjsDragManager | undefined {\n    if (!this.handle) {\n      return (undefined);\n    }\n\n    const dragBounds = this.calcDragBounds();\n    if (!dragBounds) {\n      return (undefined);\n    }\n\n    const dragManager = new CjsDragManager(this.handle.display)\n      .on(CjsDragManagerEvents.DRAG, this.onDragManagerDrag, this)\n      .on(CjsDragManagerEvents.START, this.onDragManagerStart, this)\n      .on(CjsDragManagerEvents.STOP, this.onDragManagerStop, this)\n      .setDragBounds(dragBounds);\n\n    return (dragManager);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initFill(): createjs.MovieClip | undefined {\n    const fill = CjsGetMovieClip(this.display, CjsSliderCompNames.Fill);\n    if (fill) {\n      this.fillMask = new createjs.Shape();\n      fill.mask = this.fillMask;\n      this.fillBounds = fill.getBounds().clone();\n    }\n\n    return (fill);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initHandle(\n    handleHitAreaOrAnLibClipCtor: createjs.DisplayObject | IMovieClipDisplayCtor | undefined,\n  ): CjsButton | undefined {\n    const handle = CjsGetButton(this.display, CjsSliderCompNames.Handle, undefined,\n      handleHitAreaOrAnLibClipCtor);\n\n    if (handle) {\n      this.handleBounds = handle.display.getBounds().clone();\n    }\n\n    return (handle);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onBackMouseDown(event: createjs.MouseEvent): void {\n    this.emit(CjsSliderEvents.DRAG_STARTED, this);\n    this.handleBackMove(event);\n    this.back?.on(CjsEvents.PRESS_MOVE, this.onBackPressMove, this)\n      .on(CjsEvents.PRESS_UP, this.onBackPressUp, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onBackPressMove(event: createjs.MouseEvent): void {\n    this.handleBackMove(event);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onBackPressUp(): void {\n    this.emit(CjsSliderEvents.DRAG_STOPPED, this);\n    this.back?.off(CjsEvents.PRESS_MOVE, this.onBackPressMove, this)\n      .off(CjsEvents.PRESS_UP, this.onBackPressUp, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDragManagerDrag(): void {\n    if (!this.handle || !this.dragManager?.dragBounds) {\n      return;\n    }\n\n    const x1 = this.dragManager.dragBounds.x;\n    const x2 = this.dragManager.dragBounds.x + this.dragManager.dragBounds.width;\n    const range = x2 - x1;\n    const value = (this.handle.x - x1) / range;\n    this.resolveSetValue(value, false, true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDragManagerStart(): void {\n    this.emit(CjsSliderEvents.DRAG_STARTED, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDragManagerStop(): void {\n    this.emit(CjsSliderEvents.DRAG_STOPPED, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private resolveSetValue(value: number, shouldUpdateHandle: boolean,\n    shouldEmitChanged: boolean): void {\n    value = Clamp(value, 0, 1.0);\n    if (value === this._value) {\n      return;\n    }\n\n    this._value = value;\n    this.updateFill();\n\n    if (shouldUpdateHandle) {\n      this.updateHandle();\n    }\n\n    if (shouldEmitChanged) {\n      this.emit(CjsSliderEvents.CHANGED, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateDragBounds(): this {\n    const newBounds = this.calcDragBounds();\n    if (newBounds) {\n      this.dragManager?.setDragBounds(newBounds);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateFill(): this {\n    if (this.fillMask && this.fill && this.fillBounds) {\n      const bounds = this.fillBounds;\n      this.fillMask.graphics\n        .clear()\n        .drawRect(0, 0, bounds.width * this.value, bounds.height);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateHandle(): this {\n    if (!this.handle || !this.dragManager?.dragBounds) {\n      return (this);\n    }\n\n    const x1 = this.dragManager.dragBounds.x;\n    const x2 = x1 + this.dragManager.dragBounds.width;\n    const range = x2 - x1;\n    this.handle.x = x1 + range * this.value;\n\n    const y1 = this.dragManager.dragBounds.y;\n    const y2 = x1 + this.dragManager.dragBounds.height;\n    this.handle.y = Clamp(this.handle.y, y1, y2);\n\n    return (this);\n  }\n}\n","import CjsGetMovieClip from '../../../utils/createjs/objects/CjsGetMovieClip';\nimport CjsSlider from '../../../utils/createjs/objects/sliders/CjsSlider';\n\nexport default class SbProgressBar extends CjsSlider {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly flag: createjs.MovieClip | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: createjs.MovieClip, value = 0) {\n    super(display, value);\n\n    this.flag = CjsGetMovieClip(this.display, 'flag');\n    this.shouldUseHandleBoundsForConstraint = false;\n  }\n}\n","export default function CjsResolveFrame(clipOrTween: createjs.MovieClip | createjs.AbstractTween,\n  frameOrLabel?: number | string): number | null {\n  const tween = clipOrTween instanceof createjs.MovieClip\n    ? clipOrTween.timeline\n    : clipOrTween;\n\n  const frame = typeof (frameOrLabel) === 'string'\n    ? tween.resolve(frameOrLabel)\n    : frameOrLabel;\n\n  if (frame === null || frame === undefined) {\n    console.warn('unable to resolve in scene timeline, frame label of value:', frameOrLabel);\n    return (null);\n  }\n\n  return (frame);\n}\n","const SbUserAudioSettingsDataKeys = {\n  Bgm: 'bgm',\n  Sound: 'sound',\n  Voice: 'voice',\n} as const;\n\ntype SbUserAudioSettingsDataKey = typeof SbUserAudioSettingsDataKeys[\n  keyof typeof SbUserAudioSettingsDataKeys\n];\n\nconst SbUserAudioSettingsDataKeysArray = Object.values(SbUserAudioSettingsDataKeys) as\n  ReadonlyArray<SbUserAudioSettingsDataKey>;\n\nexport {\n  SbUserAudioSettingsDataKey,\n  SbUserAudioSettingsDataKeys,\n  SbUserAudioSettingsDataKeysArray,\n};\n","import IMovieClipDisplayCtor from '../../../utils/adobeAnimate/IMovieClipDisplayCtor';\nimport IStorybookEngine from '../../IStorybookEngine';\n\nfunction SbResolveSceneDisplay(engine: IStorybookEngine,\n  displayOrCtorName?: createjs.MovieClip | string): createjs.MovieClip {\n  if (displayOrCtorName instanceof createjs.MovieClip) {\n    return (displayOrCtorName);\n  }\n\n  if (!displayOrCtorName) {\n    return (new createjs.MovieClip());\n  }\n\n  const displayClasses = engine.lib.animateClasses as unknown as\n    Record<string, IMovieClipDisplayCtor>;\n  const DisplayClassCtor = displayClasses ? displayClasses[displayOrCtorName] : undefined;\n  return (DisplayClassCtor ? new DisplayClassCtor() : new createjs.MovieClip());\n}\n\nexport default SbResolveSceneDisplay;\n","import { CjsEvents } from '../../utils/createjs/events/CjsEvents';\nimport CjsDisplayObject from '../../utils/createjs/objects/display/CjsDisplayObject';\nimport CjsResolveFrame from '../../utils/createjs/utils/CjsResolveFrame';\nimport Clamp from '../../utils/math/Clamp';\nimport IStorybookEngine from '../IStorybookEngine';\nimport SbPlaySoundCompleteCallback from '../audio/SbPlaySoundCompleteCallback';\nimport SbPlaySoundConfig from '../audio/SbPlaySoundConfig';\nimport { SbUserAudioSettingsDataKeys } from '../data/settings/audio/SbUserAudioSettingsDataKeys';\nimport SbResolveSceneDisplay from './utils/SbResolveSceneDisplay';\nimport SbSceneDisplay from './utils/SbSceneDisplay';\nimport SbSceneFrameCallbackData, { SbSceneFrameCallback } from './utils/SbSceneFrameCallbackData';\n\ntype SyncedSoundData = {\n  endFrame: number;\n  resolve: () => void | PromiseLike<void>;\n  sound: createjs.AbstractSoundInstance;\n  startFrame: number;\n};\n\nexport default class SbScene extends CjsDisplayObject<SbSceneDisplay> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  private readonly frameCallbacks: SbSceneFrameCallbackData[];\n\n  private readonly isContainerForDisplay: boolean;\n\n  private lastVisitedFrame: number;\n\n  private syncedSoundData: SyncedSoundData | undefined;\n\n  private playToTween: createjs.Tween | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine, displayOrCtorName?: createjs.MovieClip | string,\n    isContainerForDisplay = false) {\n    super(SbResolveSceneDisplay(engine, displayOrCtorName));\n\n    this.engine = engine;\n\n    this.isContainerForDisplay = isContainerForDisplay;\n\n    this.movieClip.scene = this;\n    this.movieClip.engine = engine;\n    this.movieClip.loop = false;\n\n    this.frameCallbacks = [];\n\n    this.stop();\n\n    this.lastVisitedFrame = -1;\n\n    this.onDisplayTimelineChange = this.onDisplayTimelineChange.bind(this);\n    this.onSyncedSoundComplete = this.onSyncedSoundComplete.bind(this);\n    this.onSyncedSoundTick = this.onSyncedSoundTick.bind(this);\n\n    this.timeline.addEventListener(CjsEvents.CHANGE, this.onDisplayTimelineChange);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    this.removeAllFrameCallbacks();\n    this.stop();\n    delete (this.movieClip as unknown as Record<'scene', SbScene | undefined>).scene;\n    this.display.parent?.removeChild(this.display);\n    this.timeline.removeEventListener(CjsEvents.CHANGE, this.onDisplayTimelineChange);\n    super.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  addFrameCallback<T = unknown>(frameNumberOrName: string | number,\n    callback: SbSceneFrameCallback<T>,\n    context?: unknown, isOnce = false, params: T | undefined = undefined): this {\n    const frame = this.resolveFrame(frameNumberOrName);\n    if (frame === null) {\n      console.warn('unable to resolve in scene timeline, frame label of value:',\n        frameNumberOrName);\n      return (this);\n    }\n\n    const fc: SbSceneFrameCallbackData<T> = {\n      callback,\n      context,\n      frame,\n      isOnce,\n      params,\n    };\n\n    this.frameCallbacks[frame] = fc as SbSceneFrameCallbackData;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get currentFrame(): number {\n    return (this.movieClip.currentFrame);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set currentFrame(value: number) {\n    this.stopInner(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getChild<T extends createjs.DisplayObject = createjs.DisplayObject>(\n    indexOrName: number | string,\n  ): T | undefined {\n    return (typeof (indexOrName) === 'number'\n      ? this.getChildAt(indexOrName)\n      : this.getChildByName(indexOrName));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getChildAt<T extends createjs.DisplayObject = createjs.DisplayObject>(\n    index: number,\n  ): T | undefined {\n    return ((this.display.getChildAt(index) as T) ?? undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getChildByName<T extends createjs.DisplayObject = createjs.DisplayObject>(\n    name: string,\n  ): T | undefined {\n    return ((this.display.getChildByName(name) as T) ?? undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  getChildMovieClip<T extends createjs.MovieClip = createjs.MovieClip>(\n    indexOrName: number | string,\n  ): T | undefined {\n    const child = this.getChild(indexOrName);\n    return (child instanceof createjs.MovieClip ? child as T : undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  isFrameValid(frameOrLabel: number | string): boolean {\n    return (this.resolveFrame(frameOrLabel) !== null);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get movieClip(): SbSceneDisplay {\n    const { display } = this;\n    return (this.isContainerForDisplay\n      ? display.getChildAt(0) as SbSceneDisplay\n      : display);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  nextFrame(): this {\n    this.movieClip.gotoAndStop(this.movieClip.currentFrame + 1);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  play(startFrameOrLabel?: number | string): this {\n    if (startFrameOrLabel !== undefined) {\n      const frame = this.resolveFrame(startFrameOrLabel);\n      if (frame !== null && frame !== this.movieClip.currentFrame) {\n        this.movieClip.gotoAndPlay(frame);\n      } else {\n        this.movieClip.play();\n      }\n    } else {\n      this.movieClip.play();\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playOnce<ParamsType = unknown>(callback: SbSceneFrameCallback<ParamsType>,\n    context?: unknown, startFrameOrLabel?: number | string, params?: ParamsType): this {\n    this.addFrameCallback(\n      this.movieClip.totalFrames - 1, () => {\n        this.stop();\n        callback.call(context, this, params);\n      },\n\n      context,\n      true,\n      params,\n    );\n\n    return (this.play(startFrameOrLabel));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playSound(config: SbPlaySoundConfig): createjs.AbstractSoundInstance | undefined;\n\n  playSound(\n    audioId: string,\n    volume?: number,\n    loop?: boolean | number,\n    completeCallback?: SbPlaySoundCompleteCallback,\n    callbackContext?: unknown,\n  ): createjs.AbstractSoundInstance | undefined;\n\n  playSound(\n    audioIdOrConfig: string | SbPlaySoundConfig,\n    volume: number | undefined = 1.0,\n    loop: boolean | number | undefined = false,\n    completeCallback: SbPlaySoundCompleteCallback | undefined = undefined,\n    callbackContext: unknown = undefined,\n  ): createjs.AbstractSoundInstance | undefined {\n    return (this.engine.playSound(audioIdOrConfig, volume, loop, completeCallback,\n      callbackContext));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  /**\n   * Caution: Due to frame-skipping to keep up, there is currently no guarantee that frame\n   * callbacks will be called when using this method, unless the callback is added to\n   * the last frame (on `endFrameOrLabel`).\n   */\n  playSyncVoice(audioId: string, startFrameOrLabel: number | string,\n    endFrameOrLabel: number | string): Promise<void> {\n    return new Promise((resolve) => {\n      const startFrame = this.resolveFrame(startFrameOrLabel);\n      if (startFrame === null) {\n        resolve();\n        return;\n      }\n\n      const endFrame = this.resolveFrame(endFrameOrLabel);\n      if (endFrame === null) {\n        resolve();\n        return;\n      }\n\n      const sound = this.engine.playSound(audioId,\n        this.engine.resolveSettingsVolume(SbUserAudioSettingsDataKeys.Voice));\n\n      if (!sound) {\n        resolve();\n        return;\n      }\n\n      if (this.syncedSoundData) {\n        this.syncedSoundData.sound.stop();\n        this.syncedSoundData.sound.destroy();\n      }\n\n      this.syncedSoundData = {\n        endFrame,\n        resolve,\n        sound,\n        startFrame,\n      };\n\n      this.stop(this.syncedSoundData.startFrame);\n\n      sound.addEventListener(CjsEvents.COMPLETE, this.onSyncedSoundComplete);\n      createjs.Ticker.addEventListener(CjsEvents.TICK, this.onSyncedSoundTick);\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  /**\n   * Caution: Due to frame-skipping to keep up, there is currently no guarantee that frame\n   * callbacks will be called when using this method, unless the callback is added to\n   * the last frame (on `endFrameOrLabel`). Otherwise, use `completeCallback` instead.\n   */\n  playTo<ParamsType = unknown>(\n    endFrameOrLabel: number | string,\n    startFrameOrLabel?: number | string,\n    completeCallback?: SbSceneFrameCallback<ParamsType>,\n    context?: unknown,\n    params?: ParamsType,\n  ): this {\n    const endFrame = this.resolveFrame(endFrameOrLabel);\n    if (endFrame === null) {\n      return (this);\n    }\n\n    if (startFrameOrLabel !== undefined) {\n      const startFrame = this.resolveFrame(startFrameOrLabel);\n      if (startFrame === null) {\n        return (this);\n      }\n\n      this.stop(startFrameOrLabel);\n    }\n\n    if (this.playToTween) {\n      this.stopPlayToTween();\n    }\n\n    this.playToTween = createjs.Tween\n      .get(\n        this,\n        {\n          onComplete: () => {\n            completeCallback?.call(context, this, params);\n          },\n\n          useTicks: true,\n        },\n      )\n      .to(\n        {\n          currentFrame: endFrame,\n        },\n        Math.abs(endFrame - this.currentFrame),\n      );\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  /**\n   * Caution: Due to frame-skipping to keep up, there is currently no guarantee that frame\n   * callbacks will be called when using this method, unless the callback is added to\n   * the last frame (on `endFrameOrLabel`). Otherwise, use `completeCallback` instead.\n   */\n  playToEnd<ParamsType = unknown>(\n    endFrameOrLabel: number | string,\n    completeCallback?: SbSceneFrameCallback<ParamsType>,\n    context?: unknown,\n    params?: ParamsType,\n  ): this {\n    return (this.playTo(endFrameOrLabel, undefined, completeCallback, context, params));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playVoices(soundIds: string | string[], volume?: number): Promise<void> {\n    return (this.engine.playVoice(soundIds, volume));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeAllFrameCallbacks(): this {\n    this.frameCallbacks.length = 0;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeFrameCallback(frameNumberOrName: number | string): this {\n    const frame = this.resolveFrame(frameNumberOrName);\n    if (frame !== null) {\n      delete this.frameCallbacks[frame];\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resolveFrame(frameOrLabel?: number | string): number | null {\n    return (CjsResolveFrame(this.display, frameOrLabel));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get stage(): createjs.Stage {\n    return (this.display.stage);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(frameOrLabel?: number | string): this {\n    // TODO\n    // console.log('stop', this.movieClip.currentFrame, this.movieClip.totalFrames);\n\n    this.stopPlayToTween();\n    this.stopInner(frameOrLabel);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get timeline(): createjs.Timeline {\n    return (this.movieClip.timeline);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get totalFrames(): number {\n    return (this.movieClip.totalFrames);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  /** be sure to call base method if overridding */\n  protected onDisplayTimelineChange(): void {\n    const position = Math.round(this.timeline.position);\n    if (this.lastVisitedFrame === position) {\n      return;\n    }\n\n    if (position >= this.movieClip.totalFrames) {\n      if (!this.movieClip.loop) {\n        this.stop(this.movieClip.totalFrames - 1);\n      }\n      return;\n    }\n\n    this.lastVisitedFrame = position;\n\n    const callbackData = this.frameCallbacks[position];\n    if (!callbackData) {\n      return;\n    }\n\n    if (callbackData.isOnce && callbackData.frame !== undefined) {\n      this.removeFrameCallback(callbackData.frame);\n    }\n\n    if (callbackData.callback) {\n      callbackData.callback.call(callbackData.context, this, callbackData.params);\n    }\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onSyncedSoundComplete(): void {\n    createjs.Ticker.removeEventListener(CjsEvents.TICK, this.onSyncedSoundTick);\n    const { syncedSoundData } = this;\n    if (!syncedSoundData) {\n      return;\n    }\n\n    this.syncedSoundData = undefined;\n\n    if (this.currentFrame !== syncedSoundData.endFrame) {\n      this.stop(syncedSoundData.endFrame);\n    }\n\n    syncedSoundData.sound.destroy();\n    syncedSoundData.resolve();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSyncedSoundTick(): void {\n    if (!this.syncedSoundData || this.syncedSoundData.sound.duration <= 0) {\n      createjs.Ticker.removeEventListener(CjsEvents.TICK, this.onSyncedSoundTick);\n      return;\n    }\n\n    const syncDuration = this.syncedSoundData.endFrame - this.syncedSoundData.startFrame;\n\n    // kludge: sometimes, progress goes past 1.0, when this should never happen\n    const progress = Clamp(\n      this.syncedSoundData.sound.position / this.syncedSoundData.sound.duration,\n      0,\n      1.0,\n    );\n\n    const currentFrame = Math.floor(this.syncedSoundData.startFrame + syncDuration * progress);\n    this.stop(currentFrame);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private stopInner(frameOrLabel?: number | string): void {\n    if (frameOrLabel !== undefined) {\n      const frame = this.resolveFrame(frameOrLabel);\n      if (frame !== null && frame !== this.movieClip.currentFrame) {\n        this.movieClip.gotoAndStop(frame);\n      } else {\n        this.movieClip.stop();\n      }\n    } else {\n      this.movieClip.stop();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private stopPlayToTween(): void {\n    if (this.playToTween) {\n      createjs.Tween.removeTweens(this);\n      this.playToTween = undefined;\n    }\n  }\n}\n","const SbTutorialManagerEvents = {\n  COMPLETE: 'complete',\n} as const;\n\nexport default SbTutorialManagerEvents;\n","import CjsButton from '../../../utils/createjs/objects/buttons/CjsButton';\nimport Timer from '../../../utils/timers/Timer';\nimport { SbFrameLabels } from '../../data/SbAssetLib';\nimport SbDesignData from '../../data/SbDesignData';\nimport SbScene from '../../storybookScene/SbScene';\nimport SbUiComponent from '../SbUiComponent';\nimport SbMainPanel from '../main/SbMainPanel';\nimport SbTutorialManagerEvents from './SbTutorialManagerEvents';\n\nconst DisplayObjectNames = {\n  NextButton: 'nextButtonDisplay',\n} as const;\n\nexport default class SbTutorialManager extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly scene: SbScene;\n\n  private nextButton: CjsButton | undefined;\n\n  private introDelayTimer: Timer | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(mainPanel: SbMainPanel, container: createjs.MovieClip) {\n    super(container, mainPanel.engine);\n\n    this.scene = new SbScene(this.engine, container);\n\n    this.nextButton = this.initButton(DisplayObjectNames.NextButton, this.onNextButtonPressed,\n      this.engine.lib.animateClasses.TutorialSkipNavButtonHitDisplay);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    this.nextButton?.dispose();\n    this.disposeIntroDelayTimer();\n    super.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(): void {\n    this.visible = true;\n    this.scene.stop(0);\n\n    this.introDelayTimer = Timer.Create({\n      delayMs: SbDesignData.TutorialIntroDelayMs,\n      callback: () => {\n        this.setNextPage();\n      },\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresent(): void {\n    this.visible = false;\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected override onInit(): void {\n    super.onInit(this.engine.lib.animateClasses.TutorialSkipNavButtonHitDisplay);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private disposeIntroDelayTimer(): void {\n    this.introDelayTimer = Timer.Dispose(this.introDelayTimer);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onNextButtonPressed(): void {\n    this.setNextPage();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private setNextPage(): void {\n    this.disposeIntroDelayTimer();\n\n    if (this.scene.currentFrame + 1 < this.scene.totalFrames) {\n      this.scene.nextFrame();\n    } else {\n      this.emit(SbTutorialManagerEvents.COMPLETE, this);\n    }\n  }\n}\n","const SbMainPanelDisplayObjectNames = {\n  HelpfulTipsPanel: 'helpfulTipsDisplay',\n  NextButton: 'nextButtonDisplay',\n  PrevButton: 'prevButtonDisplay',\n  ProgressBar: 'progressBarDisplay',\n  RestartButton: 'restartButtonDisplay',\n  SettingsButton: 'settingsButtonDisplay',\n  TutorialPanels: 'tutorialPanelsDisplay',\n} as const;\n\nexport default SbMainPanelDisplayObjectNames;\n","const SbMainPanelEvents = {\n  NEXT: 'next',\n  PREV: 'prev',\n  RESTART: 'restart',\n  SETTINGS: 'settings',\n\n  /**\n   * Dispatched when the tutorial has finished.\n   * ```\n   * function onMainOanelTutorialComplete(isCompleted: boolean, panel: SbMainPanel): void\n   * ```\n   * @param {boolean} isCompleted `true` if all pages of the  tutorial were viewed (the skip\n   * button was not pressed)\n   */\n  TUTORIAL_COMPLETE: 'tutorialComplete',\n} as const;\n\nexport default SbMainPanelEvents;\n","const SbHelpfulTipsPanelEvents = {\n  OPENED: 'opened',\n} as const;\n\nexport default SbHelpfulTipsPanelEvents;\n","import CjsSetVisible from '../../../../utils/createjs/actions/CjsSetVisible';\nimport CjsGetButton from '../../../../utils/createjs/objects/CjsGetButton';\nimport CjsGetMovieClip from '../../../../utils/createjs/objects/CjsGetMovieClip';\nimport CjsGetText from '../../../../utils/createjs/objects/CjsGetText';\nimport CjsSetText from '../../../../utils/createjs/objects/CjsSetText';\nimport CjsButton from '../../../../utils/createjs/objects/buttons/CjsButton';\nimport CjsDisplayObject from '../../../../utils/createjs/objects/display/CjsDisplayObject';\nimport SbHelpfulTipsPanelEvents from './SbHelpfulTipsPanelEvents';\n\nconst DisplayObjectNames = {\n  Bubble: 'bubble_display',\n  Button: 'buttonDisplay',\n  TextMessage: 'txtMessage',\n} as const;\n\nexport default class SbHelpfulTipsPanel extends CjsDisplayObject<createjs.Container> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly button: CjsButton | undefined;\n\n  private readonly bubble: createjs.MovieClip | undefined;\n\n  private readonly txtMessage: createjs.Text | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(display: createjs.Container) {\n    super(display);\n\n    this.button = CjsGetButton(this.display, DisplayObjectNames.Button, this.onButtonPressed,\n      undefined, this);\n\n    this.bubble = CjsGetMovieClip(this.display, DisplayObjectNames.Bubble);\n    this.txtMessage = CjsGetText(this.display, DisplayObjectNames.TextMessage, '');\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n    this.button?.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(message = ''): this {\n    this.visible = true;\n\n    CjsSetVisible([this.bubble, this.txtMessage], message.length > 0);\n    CjsSetText(this.txtMessage, message);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresent(): this {\n    this.visible = false;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(): void {\n    this.emit(SbHelpfulTipsPanelEvents.OPENED, this);\n  }\n}\n","import IMovieClipDisplayCtor from '../../../utils/adobeAnimate/IMovieClipDisplayCtor';\nimport SearchForMapKeyByValue from '../../../utils/collections/maps/SearchForMapKeyByValue';\nimport CjsSetVisible from '../../../utils/createjs/actions/CjsSetVisible';\nimport CjsGetMovieClip from '../../../utils/createjs/objects/CjsGetMovieClip';\nimport CjsButton from '../../../utils/createjs/objects/buttons/CjsButton';\nimport CjsButtonCallback from '../../../utils/createjs/objects/buttons/CjsButtonCallback';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport { ISbAnCompLibClasses } from '../../data/SbAssetLib';\nimport { SbNavToDirection, SbNavToDirections } from './nav/SbNavToDirections';\nimport SbUiComponent from '../SbUiComponent';\nimport SbUiComponentEvents from '../events/SbUiComponentEvents';\nimport SbInputDeviceHandler from '../inputDeviceHandler/SbInputDeviceHandler';\nimport SbInputDeviceHandlerEvents from '../inputDeviceHandler/SbInputDeviceHandlerEvents';\nimport SbProgressBar from '../progressBar/SbProgressBar';\nimport SbTutorialManager from '../tutorial/SbTutorialManager';\nimport SbTutorialManagerEvents from '../tutorial/SbTutorialManagerEvents';\nimport SbMainPanelDisplayObjectNames from './SbMainPanelDisplayObjectNames';\nimport SbMainPanelEvents from './SbMainPanelEvents';\nimport SbHelpfulTipsPanel from './helpfulTipsPanel/SbHelpfulTipsPanel';\nimport SbHelpfulTipsPanelEvents from './helpfulTipsPanel/SbHelpfulTipsPanelEvents';\nimport { SbPresentNavConfig } from './nav/SbPresentNavConfig';\nimport { CjsEvents } from '../../../utils/createjs/events/CjsEvents';\n\nconst NavButtonDirections: readonly SbNavToDirection[] = [\n  SbNavToDirections.Next,\n  SbNavToDirections.Prev,\n  SbNavToDirections.Restart,\n];\n\ntype NavButtonsByDirection = Map<SbNavToDirection, CjsButton>;\n\nexport default class SbMainPanel extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly progressBar: SbProgressBar | undefined;\n\n  private readonly navButtonsByDirection: NavButtonsByDirection;\n\n  private readonly helpfulTipsPanel: SbHelpfulTipsPanel | undefined;\n\n  private readonly navButtonsInOrder: CjsButton[];\n\n  private readonly inputDeviceHandler: SbInputDeviceHandler;\n\n  private readonly settingsButton: CjsButton | undefined;\n\n  private selectedButtonIndex: number;\n\n  private isNavUiActive: boolean;\n\n  private navStartFrame: number;\n\n  private ticks: number;\n\n  private tutorialManager: SbTutorialManager | undefined;\n\n  private navConfig: SbPresentNavConfig | undefined;\n\n  private buttonEvent: string | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super(container, engine);\n\n    this.progressBar = this.initProgressBar();\n\n    this.navButtonsByDirection = this.initNavButtons(engine.lib.animateClasses);\n\n    this.navButtonsInOrder = NavButtonDirections\n      .map((direction) => this.navButtonsByDirection.get(direction))\n      .filter((button): button is CjsButton => !!button);\n\n    this.inputDeviceHandler = this.initInputDeviceHandler();\n\n    this.selectedButtonIndex = -1;\n\n    this.settingsButton = this.initButton(SbMainPanelDisplayObjectNames.SettingsButton,\n      this.onSettingsPressed, engine.lib.animateClasses.SettingsButtonDisplay);\n\n    this.helpfulTipsPanel = this.initHelpfulTipsPanel();\n\n    this.isNavUiActive = false;\n    this.navStartFrame = -1;\n    this.ticks = -1;\n\n    this.onTickPessKludge = this.onTickPessKludge.bind(this);\n    this.onExportRootTimelineChangeNav = this.onExportRootTimelineChangeNav.bind(this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n\n    this.uninitExportRootTimeline();\n    this.inputDeviceHandler.dispose();\n    this.progressBar?.dispose();\n    this.helpfulTipsPanel?.dispose();\n    this.settingsButton?.dispose();\n\n    this.navButtonsByDirection.forEach((navButton) => {\n      navButton?.dispose();\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  presentNavUi(config?: SbPresentNavConfig): this {\n    if (this.isNavUiActive) {\n      return (this);\n    }\n\n    this.navStartFrame = this.engine.exportRoot.currentFrame;\n\n    this.isNavUiActive = true;\n\n    CjsSetVisible(this.navButtonsInOrder, true);\n\n    this.navConfig = config;\n    config?.navButtonsToHide?.forEach((directionToHide) => {\n      this.navButtonsByDirection.get(directionToHide)?.setVisible(false);\n    });\n\n    this.unselectCurrentNavButton();\n    this.setDefaultSelectedButton(config?.defaultSelectedNavButtonId ?? null);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  presentTutorial(): boolean {\n    if (!this.tutorialManager) {\n      const display = CjsGetMovieClip(this.container,\n        SbMainPanelDisplayObjectNames.TutorialPanels);\n\n      if (!display) {\n        console.warn('No tutorial panels display object on main panel was found with name:',\n          SbMainPanelDisplayObjectNames.TutorialPanels);\n        return (false);\n      }\n\n      this.tutorialManager = new SbTutorialManager(this, display)\n        .once(SbUiComponentEvents.CLOSE, this.onTutorialManagerClose, this)\n        .once(SbTutorialManagerEvents.COMPLETE, this.onTutorialManagerComplete, this);\n    }\n\n    this.tutorialManager.present();\n    this.unpresentNavUi();\n    this.visible = true;\n    this.helpfulTipsPanel?.setVisible(false);\n    this.settingsButton?.setVisible(false);\n    this.progressBar?.setVisible(false);\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set settingsButtonVisible(value: boolean) {\n    this.settingsButton?.setVisible(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override setVisible(isVisible: boolean): this {\n    const didVisibilityChange = (isVisible !== this.visible);\n    const out = super.setVisible(isVisible);\n    if (didVisibilityChange) {\n      this.update();\n    }\n\n    return (out);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresentNavUi(): this {\n    this.inputDeviceHandler.isEnabled = false;\n\n    if (this.isNavUiActive) {\n      this.isNavUiActive = false;\n      CjsSetVisible(this.navButtonsInOrder, false);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresentTutorial(): this {\n    this.tutorialManager?.unpresent();\n    this.settingsButton?.setVisible(true);\n\n    // TODO\n    // this.progressBar?.setVisible(true);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): void {\n    this.visible = true;\n    this.inputDeviceHandler.updateFromSettings();\n    this.setDefaultSelectedButton(this.navConfig?.defaultSelectedNavButtonId ?? null);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private confirmSelectedNavButton(): void {\n    const id = this.selectedNavButtonEvent;\n    if (id) {\n      this.emit(id, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initHelpfulTipsPanel(): SbHelpfulTipsPanel | undefined {\n    const display = CjsGetMovieClip(this.container, SbMainPanelDisplayObjectNames.HelpfulTipsPanel);\n    if (!display) {\n      console.warn('No helpful tips display object on main panel was found with name:',\n        SbMainPanelDisplayObjectNames.HelpfulTipsPanel);\n\n      return (undefined);\n    }\n\n    return (new SbHelpfulTipsPanel(display)\n      .setVisible(false)\n      .on(SbHelpfulTipsPanelEvents.OPENED, this.onHelpfulTipsOpened, this));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initInputDeviceHandler(): SbInputDeviceHandler {\n    return (new SbInputDeviceHandler(this.engine)\n      .on(SbInputDeviceHandlerEvents.NEXT, this.onInputDeviceNext, this)\n      .on(SbInputDeviceHandlerEvents.SELECT, this.onInputDeviceSelect, this));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initNavButton(\n    displayName: string,\n    callback: CjsButtonCallback,\n    hitAreaOrAnLibClipCtor?: createjs.DisplayObject | IMovieClipDisplayCtor,\n  ): CjsButton | undefined {\n    const button = this.initButton(displayName, callback,\n      hitAreaOrAnLibClipCtor)?.setVisible(false);\n\n    if (!button) {\n      console.warn('No nav button on main panel was found with name:', displayName);\n    }\n\n    return (button);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initNavButtons(lib: Readonly<ISbAnCompLibClasses>): NavButtonsByDirection {\n    const configs = [\n      [\n        SbNavToDirections.Next,\n        this.initNavButton(SbMainPanelDisplayObjectNames.NextButton, this.onNextPressed,\n          lib.NextButtonDisplay),\n      ],\n      [\n        SbNavToDirections.Prev,\n        this.initNavButton(SbMainPanelDisplayObjectNames.PrevButton, this.onPrevPressed,\n          lib.PrevtButtonDisplay),\n      ],\n      [\n        SbNavToDirections.Restart,\n        this.initNavButton(SbMainPanelDisplayObjectNames.RestartButton, this.onRestartPressed,\n          lib.RestartButtonDisplay),\n      ],\n    ] as const;\n\n    const navButtons = new Map<SbNavToDirection, CjsButton>();\n    configs.forEach((config) => {\n      const [key, button] = config;\n      if (button) {\n        navButtons.set(key, button);\n      }\n    });\n\n    return (navButtons);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initProgressBar(): SbProgressBar | undefined {\n    const display = CjsGetMovieClip(this.container, SbMainPanelDisplayObjectNames.ProgressBar);\n    return (display ? new SbProgressBar(display) : undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onExportRootTimelineChangeNav(): void {\n    const { currentFrame } = this.engine.exportRoot;\n    if (this.navStartFrame > -1 && currentFrame !== this.navStartFrame) {\n      console.log(`nav adjusted timeline from ${currentFrame} to ${this.navStartFrame}`);\n      const frame = this.navStartFrame;\n      this.navStartFrame = -1;\n      this.engine.exportRoot.stop(frame);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // eslint-disable-next-line class-methods-use-this\n  private onHelpfulTipsOpened(): void {\n    // TODO\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onInputDeviceNext(): void {\n    this.selectNextNavButton();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onInputDeviceSelect(): void {\n    this.confirmSelectedNavButton();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onNextPressed(): void {\n    this.emit(SbMainPanelEvents.NEXT, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onPrevPressed(): void {\n    this.emit(SbMainPanelEvents.PREV, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onRestartPressed(): void {\n    this.emit(SbMainPanelEvents.RESTART, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSettingsPressed(): void {\n    this.emit(SbMainPanelEvents.SETTINGS, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTickPessKludge(): void {\n    this.ticks += 1;\n    if (this.ticks < 4) {\n      return;\n    }\n\n    createjs.Ticker.removeEventListener(CjsEvents.TICK, this.onTickPessKludge);\n    if (this.buttonEvent) {\n      this.emit(this.buttonEvent, this);\n      this.buttonEvent = undefined;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTutorialManagerClose(): void {\n    this.emit(SbMainPanelEvents.TUTORIAL_COMPLETE, false, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onTutorialManagerComplete(): void {\n    this.emit(SbMainPanelEvents.TUTORIAL_COMPLETE, true, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get selectedNavButton(): CjsButton | undefined {\n    return (this.navButtonsInOrder[this.selectedButtonIndex]);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get selectedNavButtonEvent(): string | undefined {\n    const direction = SearchForMapKeyByValue(this.navButtonsByDirection, this.selectedNavButton);\n    switch (direction) {\n      case SbNavToDirections.Prev:\n        return (SbMainPanelEvents.PREV);\n\n      case SbNavToDirections.Next:\n        return (SbMainPanelEvents.NEXT);\n\n      case SbNavToDirections.Restart:\n        return (SbMainPanelEvents.RESTART);\n\n      default:\n        return (undefined);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private selectNextNavButton(): void {\n    this.selectNavButtonAt((this.selectedButtonIndex + 1) % this.navButtonsInOrder.length);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private selectNavButtonAt(index: number): void {\n    this.navButtonsInOrder[this.selectedButtonIndex]?.setSelected(false);\n    this.selectedButtonIndex = index;\n    this.navButtonsInOrder[this.selectedButtonIndex]?.setSelected(true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private setDefaultSelectedButton(defaultSelectedNavButtonId: SbNavToDirection | null): void {\n    const shouldSelectButton = this.inputDeviceHandler.updateFromSettings()\n      && defaultSelectedNavButtonId\n      && (this.inputDeviceHandler.isSingleSwitchEnabled()\n      || this.inputDeviceHandler.isDualSwitchEnabled);\n\n    if (shouldSelectButton) {\n      this.setSelectedNavButton(defaultSelectedNavButtonId);\n    } else {\n      this.unselectCurrentNavButton();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private setSelectedNavButton(direction: SbNavToDirection): void {\n    const index = NavButtonDirections.indexOf(direction);\n    this.selectNavButtonAt(index);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private uninitExportRootTimeline(): void {\n    this.navStartFrame = -1;\n    this.engine.exportRoot.timeline.removeEventListener(CjsEvents.CHANGE,\n      this.onExportRootTimelineChangeNav);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private unselectCurrentNavButton(): void {\n    this.selectNavButtonAt(-1);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private update(): void {\n    if (!this.tutorialManager) {\n      this.updateHelpfupTipsPanel();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // eslint-disable-next-line class-methods-use-this\n  private updateHelpfupTipsPanel(): void {\n    // TODO\n    /*\n    if (this.engine.userSettingsData.storybook.helpfulTipsEnabled) {\n      this.helpfulTipsPanel?.present();\n    } else {\n      this.helpfulTipsPanel?.unpresent();\n    }\n    */\n  }\n}\n","const SbMessagePanelEvents = {\n  /**\n   * Dispatched when the message panel has been closed.\n   *\n   * ```\n   * function onMessagePanelClose(panel: SbMessagePanel): void;\n   * ```\n   */\n  CLOSE: 'close',\n\n  /**\n   * Dispatched when a button on the message panel is pressed.\n   *\n   * ```\n   * function onMessagePanelComplete(id: SbMessagePanelButtonId, panel: SbMessagePanel): void;\n   * ```\n   */\n  COMPLETE: 'complete',\n} as const;\n\nexport default SbMessagePanelEvents;\n","import { SbMessagePanelButtonId } from './SbMessagePanelButtonIds';\n\nconst SbMessagePanelRejectReasons = {\n  AlreadyOpen: 'alreadyopen',\n} as const;\n\ntype SbMessagePanelRejectReason = typeof SbMessagePanelRejectReasons[\n  keyof typeof SbMessagePanelRejectReasons\n];\n\ntype SbMessagePanelCallback = (buttonId: SbMessagePanelButtonId) => void;\n\nexport {\n  SbMessagePanelCallback,\n  SbMessagePanelRejectReason,\n  SbMessagePanelRejectReasons,\n};\n","type CjsTextMetrics = {\n  height: number;\n  lineHeight: number;\n  lines: string[];\n  vOffset: number;\n  width: number;\n};\n\nfunction CjsGetTextMetrics(text: createjs.Text): CjsTextMetrics {\n  return (text.getMetrics() as CjsTextMetrics);\n}\n\nexport {\n  CjsGetTextMetrics,\n  CjsTextMetrics,\n};\n","import GetValue from './GetValue';\n\n/**\n * Returns the string value of a property key within the top level of an object, or returns a\n * default value if the key is not found.\n *\n * @function getStringValue\n *\n * @param source - The object to search.\n * @param key - The key for the property on source. Must exist at the top level of the\n * source object (no periods).\n * @param [defaultValue=''] - The default value to use if the key does not exist.\n *\n * @returns The value if found; otherwise, `defaultValue` (`''` if none provided).\n */\nexport default function GetStringValue(source: unknown, key: string, defaultValue = ''): string {\n  return (GetValue(source, key, defaultValue) ?? defaultValue);\n}\n","import GetNumberValue from '../../../../utils/object/GetNumberValue';\nimport GetStringValue from '../../../../utils/object/GetStringValue';\nimport RecursiveConcrete from '../../../../utils/object/RecursiveConcrete';\nimport SbDefaults from '../../../data/defaults/SbDefaults';\n\ntype SbMessagePanelDimBackConfig = {\n  alpha?: number;\n  color?: string;\n};\n\nexport function SbResolveMessagePanelDimBackConfig(\n  config?: SbMessagePanelDimBackConfig,\n): RecursiveConcrete<SbMessagePanelDimBackConfig> {\n  const _config = config ?? {};\n  _config.alpha = GetNumberValue(_config, 'alpha', SbDefaults.MessagePanel.DimBack.Alpha);\n  _config.color = GetStringValue(_config, 'color', SbDefaults.MessagePanel.DimBack.Color);\n  return (_config as RecursiveConcrete<SbMessagePanelDimBackConfig>);\n}\n\nexport default SbMessagePanelDimBackConfig;\n","import RecursiveConcrete from '../../../../utils/object/RecursiveConcrete';\nimport SbMessagePanelAutoCloseConfig from './SbMessagePanelAutoCloseConfig';\nimport SbMessagePanelButtonLabelsConfig from './SbMessagePanelButtonLabelsConfig';\nimport SbMessagePanelDimBackConfig, { SbResolveMessagePanelDimBackConfig } from './SbMessagePanelDimBackConfig';\n\nexport type SbRawMessagePanelConfig = {\n  autoClose?: SbMessagePanelAutoCloseConfig | true;\n  buttonLabels?: SbMessagePanelButtonLabelsConfig;\n  dimBack?: SbMessagePanelDimBackConfig;\n};\n\nexport type SbMessagePanelConfig = Omit<SbRawMessagePanelConfig, 'buttonLabels' | 'dimBack'> & {\n  buttonLabels: SbMessagePanelButtonLabelsConfig;\n  dimBack: RecursiveConcrete<SbMessagePanelDimBackConfig>;\n};\n\nexport function SbResolveMessagePanelConfig(\n  config?: SbRawMessagePanelConfig,\n): SbMessagePanelConfig {\n  const _config = (config ?? {}) as SbMessagePanelConfig;\n  _config.buttonLabels ??= {};\n  _config.dimBack = SbResolveMessagePanelDimBackConfig(_config.dimBack);\n  return (_config);\n}\n\nexport default SbRawMessagePanelConfig;\n","import type SbMessagePanel from './SbMessagePanel';\n\nexport default class SbMessagePanelSingleton {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  static Instance: SbMessagePanel | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  static Clear(clearOnlyIfMatch?: SbMessagePanel): void {\n    if (!clearOnlyIfMatch || clearOnlyIfMatch === SbMessagePanelSingleton.Instance) {\n      SbMessagePanelSingleton.Instance = undefined;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Get(): SbMessagePanel | undefined {\n    return (SbMessagePanelSingleton.Instance);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Set(value: SbMessagePanel): void {\n    SbMessagePanelSingleton.Instance = value;\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n  private constructor() {\n    throw (new Error('Instances of SbMessagePanelSingleton may not be created.'));\n  }\n}\n","import CjsDisplayObject from '../../../utils/createjs/objects/display/CjsDisplayObject';\nimport CjsGetContainer from '../../../utils/createjs/objects/CjsGetContainer';\nimport CjsGetText from '../../../utils/createjs/objects/CjsGetText';\nimport { SbMessagePanelButtonId, SbMessagePanelButtonIds, SbMessagePanelButtonIdsArray } from './SbMessagePanelButtonIds';\nimport CjsGetButton from '../../../utils/createjs/objects/CjsGetButton';\nimport ICjsBaseButton from '../../../utils/createjs/objects/buttons/ICjsBaseButton';\nimport IMovieClipDisplayCtor from '../../../utils/adobeAnimate/IMovieClipDisplayCtor';\nimport ISize from '../../../utils/geom/ISize';\nimport { CjsEvents } from '../../../utils/createjs/events/CjsEvents';\nimport CjsDragManager from '../../../utils/createjs/utils/dragManager/CjsDragManager';\nimport SbMessagePanelEvents from './SbMessagePanelEvents';\nimport SbDefaults from '../../data/defaults/SbDefaults';\nimport Timer from '../../../utils/timers/Timer';\nimport { SbMessagePanelCallback, SbMessagePanelRejectReasons } from './SbMessagePanelResults';\nimport CjsGetDisplayObject from '../../../utils/createjs/objects/CjsGetDisplayObject';\nimport SbMessagePanelAutoCloseConfig from './configs/SbMessagePanelAutoCloseConfig';\nimport { CjsGetTextMetrics } from '../../../utils/createjs/utils/CjsTextMetrics';\nimport SbRawMessagePanelConfig, { SbMessagePanelConfig, SbResolveMessagePanelConfig } from './configs/SbMessagePanelConfig';\nimport CjsButton from '../../../utils/createjs/objects/buttons/CjsButton';\nimport SbMessagePanelSingleton from './SbMessagePanelSingleton';\n\nconst DisplayObjectNames = {\n  BackDisplay: 'back',\n  MessageText: 'txtMessage',\n  TextAreaNode: 'textAreaNode',\n} as const;\n\nexport default class SbMessagePanel extends CjsDisplayObject<createjs.MovieClip> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  shouldCloseAfterSelection: boolean;\n\n  private readonly buttonIdsByButton: Map<ICjsBaseButton, SbMessagePanelButtonId>;\n\n  private readonly config: SbMessagePanelConfig;\n\n  private stage: createjs.Stage;\n\n  private dimBack: createjs.Shape;\n\n  private isOpen: boolean;\n\n  private dragManager: CjsDragManager | undefined;\n\n  private _autoCloseDelayConfig: Required<SbMessagePanelAutoCloseConfig> | undefined;\n\n  private autoCloseTimer: Timer | undefined;\n\n  private textMessage: createjs.Text | undefined;\n\n  private back: createjs.Container | undefined;\n\n  private textAreaNode: createjs.Rectangle | undefined;\n\n  private promisedResolve: SbMessagePanelCallback | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  get autoCloseDelayConfig(): SbMessagePanelAutoCloseConfig | undefined {\n    return (this._autoCloseDelayConfig);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set autoCloseDelayConfig(value: SbMessagePanelAutoCloseConfig | undefined) {\n    this._autoCloseDelayConfig = SbMessagePanel.BuildAutoCloseDelayConfig(value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static Create(\n    stage: createjs.Stage,\n    message: string,\n    MessagePanelDisplay: IMovieClipDisplayCtor,\n    config?: SbRawMessagePanelConfig,\n  ): Promise<SbMessagePanelButtonId> {\n    if (SbMessagePanelSingleton.Instance) {\n      return (new Promise((_, reject) => {\n        reject(SbMessagePanelRejectReasons.AlreadyOpen);\n      }));\n    }\n\n    const panelDisplay = new MessagePanelDisplay();\n    const panel = new SbMessagePanel(stage, panelDisplay, message, config);\n    const { canvasSize } = panel;\n    if (canvasSize) {\n      panel.setPosition(\n        canvasSize.width / 2,\n        canvasSize.height / 2,\n      );\n    }\n\n    return (panel.open());\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  close(id: SbMessagePanelButtonId = SbMessagePanelButtonIds.Close): void {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.isOpen = false;\n\n    if (this.autoCloseTimer) {\n      this.autoCloseTimer.stop();\n      this.autoCloseTimer = undefined;\n    }\n\n    this.stage.removeChild(this.dimBack, this.display);\n    this.dispatchPromsedResolve(id);\n\n    SbMessagePanelSingleton.Clear(this);\n    this.emit(SbMessagePanelEvents.CLOSE, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    super.dispose();\n\n    this.close();\n\n    this.dragManager?.dispose();\n    this.dragManager = undefined;\n\n    this.dimBack.removeAllEventListeners();\n    this.disposeButtons();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async open(): Promise<SbMessagePanelButtonId> {\n    return (new Promise((resolve, reject) => {\n      if (this.isOpen) {\n        reject(SbMessagePanelRejectReasons.AlreadyOpen);\n        return;\n      }\n\n      this.isOpen = true;\n      this.promisedResolve = resolve;\n      this.stage.addChild(this.dimBack, this.display);\n\n      if (this._autoCloseDelayConfig) {\n        this.autoCloseTimer = Timer.Create({\n          callback: () => {\n            this.close(this._autoCloseDelayConfig?.buttonId ?? SbMessagePanelButtonIds.Close);\n          },\n\n          delayMs: this._autoCloseDelayConfig.delayMs,\n        });\n      }\n    }));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setAutoCloseDelay(config: SbMessagePanelAutoCloseConfig | true | null = null): this {\n    this._autoCloseDelayConfig = SbMessagePanel.BuildAutoCloseDelayConfig(config ?? undefined);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setText(message: string): this {\n    if (this.textMessage) {\n      this.textMessage.text = message;\n    }\n\n    this.alignTextVerticlally();\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private constructor(stage: createjs.Stage, display: createjs.MovieClip, message?: string,\n    config?: SbRawMessagePanelConfig) {\n    super(display);\n\n    SbMessagePanelSingleton.Set(this);\n\n    this.config = SbResolveMessagePanelConfig(config);\n\n    this.stage = stage;\n    this.dimBack = this.createDimBack();\n    this.textMessage = CjsGetText(this.display, DisplayObjectNames.MessageText, message);\n    this.back = CjsGetContainer(this.display, DisplayObjectNames.BackDisplay);\n    this.buttonIdsByButton = this.initButtons();\n    this.textAreaNode = this.initTextAreaNode();\n\n    if (this.back) {\n      this.dragManager = new CjsDragManager(this.display, this.back);\n    }\n\n    this._autoCloseDelayConfig = SbMessagePanel.BuildAutoCloseDelayConfig(this.config.autoClose);\n    this.shouldCloseAfterSelection = true;\n    this.isOpen = false;\n\n    this.alignTextVerticlally();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private alignTextVerticlally(): void {\n    const { textAreaNode, textMessage } = this;\n    if (textMessage && textAreaNode) {\n      const metrics = CjsGetTextMetrics(textMessage);\n      const calculatedHeight = textMessage.getMeasuredLineHeight() * metrics.lines.length;\n      textMessage.y = textAreaNode.y + (textAreaNode.height - calculatedHeight) / 2;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get canvas(): HTMLCanvasElement | undefined {\n    const canvasOrId = this.stage.canvas;\n    return (canvasOrId instanceof HTMLCanvasElement\n      ? canvasOrId\n      : document.getElementById(canvasOrId as string) as HTMLCanvasElement);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get canvasSize(): ISize | undefined {\n    const { canvas } = this;\n    if (!canvas) {\n      return (undefined);\n    }\n\n    return ({\n      width: canvas.width / this.stage.scaleX,\n      height: canvas.height / this.stage.scaleY,\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private createDimBack(): createjs.Shape {\n    const shape = new createjs.Shape();\n    shape.on(CjsEvents.CLICK, () => {});\n    this.renderDimBack(shape);\n    return (shape);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private dispatchPromsedResolve(id: SbMessagePanelButtonId | undefined): void {\n    if (this.promisedResolve && id) {\n      this.promisedResolve(id);\n      this.promisedResolve = undefined;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private disposeButtons(): void {\n    this.buttonIdsByButton.forEach((_, button) => {\n      button.dispose();\n    });\n\n    this.buttonIdsByButton.clear();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static BuildAutoCloseDelayConfig(\n    autoCloseDelayConfig: true | SbMessagePanelAutoCloseConfig | undefined,\n  ): Required<SbMessagePanelAutoCloseConfig> | undefined {\n    if (!autoCloseDelayConfig) {\n      return (undefined);\n    }\n\n    if (autoCloseDelayConfig === true) {\n      return ({\n        buttonId: SbDefaults.MessagePanel.AutoClose.ButtonId,\n        delayMs: SbDefaults.MessagePanel.AutoClose.DelayMs,\n      });\n    }\n\n    return ({\n      buttonId: autoCloseDelayConfig.buttonId ?? SbDefaults.MessagePanel.AutoClose.ButtonId,\n      delayMs: autoCloseDelayConfig.delayMs,\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initButton(buttonId: SbMessagePanelButtonId, labelText?: string): CjsButton | undefined {\n    const button = CjsGetButton(this.display,\n      `${buttonId}ButtonDisplay`, this.onButtonPressed, undefined, this);\n\n    if (button && labelText) {\n      button.buttonLabelText = labelText;\n    }\n\n    return (button);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initButtons(): Map<ICjsBaseButton, SbMessagePanelButtonId> {\n    const buttons = new Map<ICjsBaseButton, SbMessagePanelButtonId>();\n    SbMessagePanelButtonIdsArray.forEach((buttonId) => {\n      const button = this.initButton(buttonId, this.config.buttonLabels[buttonId]);\n      if (button) {\n        buttons.set(button, buttonId);\n      }\n    });\n\n    return (buttons);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initTextAreaNode(): createjs.Rectangle | undefined {\n    const node = CjsGetDisplayObject(this.display, DisplayObjectNames.TextAreaNode);\n    if (!node) {\n      return (undefined);\n    }\n\n    const bounds = node.getTransformedBounds().clone();\n    node.visible = false;\n    return (bounds);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(button: ICjsBaseButton): void {\n    const id = this.buttonIdsByButton.get(button);\n    this.emit(SbMessagePanelEvents.COMPLETE, id, this);\n\n    this.dispatchPromsedResolve(id);\n\n    if (this.shouldCloseAfterSelection) {\n      this.dispose();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private renderDimBack(shape: createjs.Shape): void {\n    const { canvasSize } = this;\n    if (!canvasSize) {\n      return;\n    }\n\n    shape.alpha = this.config.dimBack.alpha;\n    shape.graphics.clear()\n      .beginFill(this.config.dimBack.color)\n      .drawRect(0, 0, canvasSize.width, canvasSize.height)\n      .endFill();\n  }\n}\n","const SbPasscodePanelEvents = {\n  /**\n   * Dispatched when the submit button is pressed. The answer is also evaluated.\n   *\n   * ```\n   * function onPasscodePanelSubmit(isCorrect: boolean, panel: SbPasscodePanel): void;\n   * ```\n   */\n  SUBMIT: 'submit',\n} as const;\n\nexport default SbPasscodePanelEvents;\n","function RandomIntegerInclusive(min: number, max: number): number {\n  return (min + Math.floor(Math.random() * (max - min + 1)));\n}\n\nexport default RandomIntegerInclusive;\n","import RandomIntegerInclusive from '../../../../utils/math/RandomIntegerInclusive';\nimport ChallengeData from './ChallengeData';\n\n// ------------------------------------------------------------------------------------------------\nfunction GenerateChallenge(): ChallengeData {\n  const sum = RandomIntegerInclusive(1, 9);\n  const value1 = RandomIntegerInclusive(0, sum);\n  const value2 = sum - value1;\n  const expr1 = `${value1} + ${value2}`;\n  return ({\n    expression: expr1,\n    value: sum,\n  });\n}\n\nexport default GenerateChallenge;\n","import SbUiComponent from '../SbUiComponent';\nimport CjsCompoundButton from '../../../utils/createjs/objects/buttons/CjsCompoundButton';\nimport SbPasscodePanelEvents from './SbPasscodePanelEvents';\nimport ChallengeData from './challengeExpression/ChallengeData';\nimport GenerateChallenge from './challengeExpression/ChallengeExpression';\nimport ICjsCompoundButton from '../../../utils/createjs/objects/buttons/ICjsCompoundButton';\nimport IStorybookEngine from '../../IStorybookEngine';\n\nexport default class SbPasscodePanel extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly numberButtons: ICjsCompoundButton[];\n\n  private readonly txtChallenge: createjs.Text | undefined;\n\n  private readonly txtChallengeAnswer: createjs.Text | undefined;\n\n  private clearButton: CjsCompoundButton | undefined;\n\n  private submitButton: CjsCompoundButton | undefined;\n\n  private feedbackTween: createjs.Tween | undefined;\n\n  private challengeData: ChallengeData | undefined;\n\n  private origTextColor: string;\n\n  private answer: number;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super(container, engine);\n\n    this.numberButtons = this.initNumberButtons();\n    this.submitButton = this.initSubmitButton();\n    this.clearButton = this.initClearButton();\n\n    this.txtChallenge = this.initChallengeText('txtChallenge');\n\n    this.txtChallengeAnswer = this.initChallengeText('txtChallengeAnswer');\n    this.origTextColor = this.txtChallengeAnswer?.color ?? '#000';\n\n    this.answer = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  clearAnswer(): this {\n    this.answer = 0;\n    this.updateAfterResponse();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(): this {\n    this.refreshChallenge();\n    this.submitButton?.setEnabled(true);\n    this.visible = true;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresent(): this {\n    this.disposeFeedbackTween();\n    this.submitButton?.setEnabled(false);\n    this.visible = false;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected override onInit(): void {\n    super.onInit(this.engine.lib.animateClasses.CloseXButtonHitBoxDisplay);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private addNumberOntoAnswer(value: number): void {\n    let numberAsTest = (this.answer + value.toString(10));\n    numberAsTest = numberAsTest.substring(numberAsTest.length - 1);\n    this.answer = Number.parseInt(numberAsTest, 10);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private disposeFeedbackTween(): void {\n    if (this.feedbackTween) {\n      createjs.Tween.removeTweens(this.feedbackTween.target);\n      this.feedbackTween = undefined;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private enableNumberButtons(isEnabled: boolean): void {\n    this.numberButtons.forEach((button) => {\n      button.enabled = isEnabled;\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private feedbackIncorrect(): void {\n    this.flashAnswerText('#f00');\n    this.feedbackTween?.call(() => {\n      this.submitButton?.setEnabled(true);\n      this.emit(SbPasscodePanelEvents.SUBMIT, false, this);\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private feedbackCorrect(): void {\n    this.flashAnswerText('#0f0');\n    this.feedbackTween?.call(() => {\n      this.emit(SbPasscodePanelEvents.SUBMIT, true, this);\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private flashAnswerText(cssColor: string): void {\n    if (!this.txtChallengeAnswer) {\n      return;\n    }\n\n    this.disposeFeedbackTween();\n\n    const text = this.txtChallengeAnswer;\n    this.feedbackTween = createjs.Tween.get(text);\n    for (let index = 0; index < 7; index += 1) {\n      this.feedbackTween\n        .call(() => {\n          text.color = cssColor;\n        })\n        .wait(60)\n        .call(() => {\n          text.color = this.origTextColor;\n        })\n        .wait(60);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initChallengeText(displayName: string): createjs.Text | undefined {\n    const textObject = this.initText<createjs.Text>(displayName);\n    if (textObject) {\n      textObject.visible = false;\n    }\n\n    return (textObject);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initClearButton(): CjsCompoundButton | undefined {\n    return (this.initCompoundButton('passcodeButtonClear', this.onClearPressed));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initNumberButtons(): ICjsCompoundButton[] {\n    const buttons: ICjsCompoundButton[] = [];\n    let index = 1;\n    let button = this.initCompoundButton(`passcodeButton${index}`, this.onNumberButtonPressed,\n      undefined, this.engine.lib.animateClasses.PasscodeButtonBackDisplay);\n\n    while (button) {\n      buttons.push(button);\n      index += 1;\n      button = this.initCompoundButton(`passcodeButton${index}`, this.onNumberButtonPressed);\n    }\n\n    return (buttons);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initSubmitButton(): CjsCompoundButton | undefined {\n    return (this.initCompoundButton('passcodeButtonSubmit', this.onSubmitPressed));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onClearPressed(): void {\n    this.clearAnswer();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onNumberButtonPressed(button: ICjsCompoundButton): void {\n    const buttonIndex = this.numberButtons.indexOf(button);\n    if (buttonIndex > -1) {\n      this.addNumberOntoAnswer(buttonIndex + 1);\n      this.updateAfterResponse();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSubmitPressed(): void {\n    this.submitButton?.setEnabled(false);\n    const isCorrect = this.challengeData !== undefined && this.answer === this.challengeData.value;\n    if (isCorrect) {\n      this.feedbackCorrect();\n    } else {\n      this.feedbackIncorrect();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private refreshChallenge(): void {\n    this.challengeData = GenerateChallenge();\n    if (this.txtChallenge) {\n      this.txtChallenge.text = `${this.challengeData.expression}?`;\n      this.txtChallenge.visible = true;\n    }\n\n    this.answer = 0;\n    this.updateAfterResponse();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateAfterResponse(): void {\n    if (this.txtChallengeAnswer) {\n      this.txtChallengeAnswer.text = this.answer !== 0 ? this.answer.toString(10) : '';\n      this.txtChallengeAnswer.visible = true;\n    }\n\n    this.enableNumberButtons(this.answer > -100 && this.answer < 100);\n  }\n}\n","import IMovieClipDisplayCtor from '../../../adobeAnimate/IMovieClipDisplayCtor';\nimport CjsGetContainer from '../CjsGetContainer';\nimport CjsSlider from './CjsSlider';\nimport CjsSliderCallback from './CjsSliderCallback';\nimport CjsSliderEvents from './CjsSliderEvents';\n\nfunction CjsCreateSlider<\n  SliderDisplayType extends createjs.Container = createjs.Container\n>(container: createjs.Container, displayName: string,\n  sliderUpdateCallback?: CjsSliderCallback | undefined, context?: unknown, value?: number,\n  handleHitAreaOrAnLibClipCtor?: createjs.DisplayObject\n  | IMovieClipDisplayCtor): CjsSlider<SliderDisplayType> | undefined {\n  const sliderContainer = CjsGetContainer<SliderDisplayType>(container, displayName);\n  if (!sliderContainer) {\n    return (undefined);\n  }\n\n  const slider = new CjsSlider<SliderDisplayType>(sliderContainer, value,\n    handleHitAreaOrAnLibClipCtor);\n\n  if (sliderUpdateCallback) {\n    slider.on(CjsSliderEvents.CHANGED, sliderUpdateCallback, context);\n  }\n\n  return (slider);\n}\n\nexport default CjsCreateSlider;\n","import { SbAssetLib } from '../../../data/SbAssetLib';\nimport SbUserSettingsSubPanelData from './SbUserSettingsSubPanelData';\nimport SbUiComponent from '../../SbUiComponent';\n\nexport default abstract class SbSettingsSubPanel<\n  SettingsDataType extends SbUserSettingsSubPanelData\n> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  areSettingsDirty: boolean;\n\n  protected readonly mainPanel: SbUiComponent;\n\n  protected readonly lib: Readonly<SbAssetLib>;\n\n  private _settings: SettingsDataType | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(mainPanel: SbUiComponent, lib: Readonly<SbAssetLib>) {\n    this.mainPanel = mainPanel;\n    this.lib = lib;\n    this.areSettingsDirty = false;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get settings(): SettingsDataType | undefined {\n    return (this._settings);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setSettings(data: SettingsDataType): this {\n    this._settings = data;\n    this.updateSettingsUiFromData();\n    this.areSettingsDirty = false;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected abstract updateSettingsUiFromData(): void;\n\n  // ----------------------------------------------------------------------------------------------\n  protected setSettingProp<T, K extends keyof T>(source: T | undefined, name: K,\n    value: T[typeof name]): this {\n    if (source !== undefined) {\n      (source as T)[name] = value;\n    }\n\n    this.areSettingsDirty = true;\n    return (this);\n  }\n}\n","import CjsButtonEvents from '../../../../../utils/createjs/objects/buttons/CjsButtonEvents';\nimport CjsCheckbox from '../../../../../utils/createjs/objects/buttons/CjsCheckbox';\nimport ICjsBaseButton from '../../../../../utils/createjs/objects/buttons/ICjsBaseButton';\nimport ICjsCheckbox from '../../../../../utils/createjs/objects/buttons/ICjsCheckbox';\nimport CjsCreateSlider from '../../../../../utils/createjs/objects/sliders/CjsCreateSlider';\nimport CjsSlider from '../../../../../utils/createjs/objects/sliders/CjsSlider';\nimport CjsSliderEvents from '../../../../../utils/createjs/objects/sliders/CjsSliderEvents';\nimport ICjsSlider from '../../../../../utils/createjs/objects/sliders/ICjsSlider';\nimport { SbAssetLib } from '../../../../data/SbAssetLib';\nimport SbUserAudioSettingsData from '../../../../data/settings/audio/SbUserAudioSettingsData';\nimport {\n  SbUserAudioSettingsDataKey,\n  SbUserAudioSettingsDataKeys,\n  SbUserAudioSettingsDataKeysArray,\n} from '../../../../data/settings/audio/SbUserAudioSettingsDataKeys';\n\nimport SbUiComponent from '../../../SbUiComponent';\nimport SbSettingsSubPanel from '../SbSettingsSubPanel';\n\ntype SliderCheckboxPair = {\n  checkbox: CjsCheckbox | undefined;\n  slider: CjsSlider | undefined;\n};\n\ntype SliderCheckBoxPairs = {\n  [K in keyof SbUserAudioSettingsData]: SliderCheckboxPair;\n};\n\nexport default class SbSettingsAudioSubPanel extends SbSettingsSubPanel<SbUserAudioSettingsData> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly sliderCheckboxPairs: SliderCheckBoxPairs;\n\n  private settingDataKeysByUiControl: Map<ICjsCheckbox | ICjsSlider, SbUserAudioSettingsDataKey>;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(mainPanel: SbUiComponent, lib: Readonly<SbAssetLib>) {\n    super(mainPanel, lib);\n\n    this.settingDataKeysByUiControl = new Map();\n    this.sliderCheckboxPairs = this.initSliderCheckboxPairs();\n\n    this.initSoundSlider();\n    this.initVoiceSlider();\n    this.initBgmSlider();\n    this.initBgmCheckbox();\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected updateSettingsUiFromData(): void {\n    const { settings } = this;\n    if (!settings) {\n      return;\n    }\n\n    SbUserAudioSettingsDataKeysArray.forEach((key) => {\n      const setting = settings[key];\n      const isSettingEnabled = setting.isEnabled;\n      const uiPair = this.sliderCheckboxPairs[key];\n      uiPair.checkbox?.setOn(isSettingEnabled);\n      uiPair.slider?.setValue(isSettingEnabled ? setting.volume : 0);\n    });\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private getCheckbox(key: SbUserAudioSettingsDataKey): CjsCheckbox | undefined {\n    return (this.sliderCheckboxPairs[key].checkbox);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private getSlider(key: SbUserAudioSettingsDataKey): CjsSlider | undefined {\n    return (this.sliderCheckboxPairs[key].slider);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initBgmCheckbox(): void {\n    const checkbox = this.getCheckbox(SbUserAudioSettingsDataKeys.Bgm);\n    if (checkbox) {\n      checkbox.on(CjsButtonEvents.PRESSED, this.onBgmCheckboxPressed, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initBgmSlider(): void {\n    const slider = this.getSlider(SbUserAudioSettingsDataKeys.Bgm);\n    if (slider) {\n      slider.on(CjsSliderEvents.CHANGED, this.onBgmSliderChanged, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initSliderCheckboxPairs(): SliderCheckBoxPairs {\n    const { container } = this.mainPanel;\n    const pairs: SliderCheckBoxPairs = {} as SliderCheckBoxPairs;\n    SbUserAudioSettingsDataKeysArray.forEach((key) => {\n      const checkbox = this.mainPanel.initCheckbox(`${key}CheckboxDisplay`, this.onCheckboxPressed,\n        false, container, this);\n\n      const slider = CjsCreateSlider(container, `${key}SliderDisplay`, this.onSliderChanged, this);\n      pairs[key] = {\n        checkbox,\n        slider,\n      };\n\n      if (checkbox) {\n        this.settingDataKeysByUiControl.set(checkbox, key);\n      }\n\n      if (slider) {\n        this.settingDataKeysByUiControl.set(slider, key);\n      }\n    });\n\n    return (pairs);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initSoundSlider(): void {\n    const slider = this.getSlider(SbUserAudioSettingsDataKeys.Sound);\n    if (slider) {\n      slider.on(CjsSliderEvents.DRAG_STOPPED, this.onSoundSliderDragStopped, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initVoiceSlider(): void {\n    const slider = this.getSlider(SbUserAudioSettingsDataKeys.Voice);\n    if (slider) {\n      slider.on(CjsSliderEvents.DRAG_STOPPED, this.onVoiceSliderDragStopped, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onBgmCheckboxPressed(): void {\n    this.updateBgmVolume();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onBgmSliderChanged(): void {\n    this.updateBgmVolume();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onCheckboxPressed(button: ICjsBaseButton): void {\n    const checkbox = button as CjsCheckbox;\n    const settingKey = this.settingDataKeysByUiControl.get(checkbox);\n    if (!settingKey || !this.settings) {\n      return;\n    }\n\n    const setting = this.settings[settingKey];\n    this.setSettingProp(setting, 'isEnabled', checkbox.isOn);\n\n    const uiPair = this.sliderCheckboxPairs[settingKey];\n    uiPair.slider?.setValue(checkbox.isOn ? setting.volume : 0, false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSliderChanged(slider: ICjsSlider): void {\n    const settingKey = this.settingDataKeysByUiControl.get(slider);\n    if (!settingKey || !this.settings) {\n      return;\n    }\n\n    const isEnabled = slider.value > 0;\n\n    const uiPair = this.sliderCheckboxPairs[settingKey];\n    uiPair.checkbox?.setOn(isEnabled);\n\n    const setting = this.settings[settingKey];\n    this.setSettingProp(setting, 'isEnabled', isEnabled);\n    this.setSettingProp(setting, 'volume', slider.value);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSoundSliderDragStopped(): void {\n    this.mainPanel.engine.playSound(this.lib.audioIds.VolumeTest, this.settings?.sound.volume);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onVoiceSliderDragStopped(): void {\n    this.mainPanel.engine.playSound(this.lib.audioIds.VolumeTest, this.settings?.voice.volume);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateBgmVolume(): void {\n    if (this.settings) {\n      this.mainPanel.engine.setBgmVolume(\n        this.settings.bgm.isEnabled ? this.settings.bgm.volume : 0,\n      );\n    }\n  }\n}\n","const SbRadioGroupEvents = {\n  /**\n   * Dispatched when a checkbox within a radio group is pressed.\n   *\n   * ```\n   * function onRadioGroupSelected<ButtonIdType extends string = string>(id: ButtonIdType,\n   * checkbox: ICjsCheckbox, group: SbRadioGroup): void;\n   * ```\n   */\n  SELECTED: 'selected',\n} as const;\n\nexport default SbRadioGroupEvents;\n","import EventEmitter from 'eventemitter3';\nimport ICjsCheckbox from './ICjsCheckbox';\nimport SbRadioGroupEvents from '../../../../engine/ui/events/SbRadioGroupEvents';\nimport CjsCheckbox from './CjsCheckbox';\nimport CjsButtonEvents from './CjsButtonEvents';\n\nexport default class CjsRadioGroup<\n  ButtonIdType extends string | number = string\n> extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly radioButtonIdsByButton: Map<ICjsCheckbox, ButtonIdType>;\n\n  private _isEnabled: boolean;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(radioButtons?: [ButtonIdType, ICjsCheckbox][]) {\n    super();\n\n    this.radioButtonIdsByButton = new Map();\n\n    this._isEnabled = true;\n\n    radioButtons?.forEach(([id, checkbox]) => {\n      this.add(id, checkbox);\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  add(id: ButtonIdType, button: ICjsCheckbox): this {\n    if (!this.radioButtonIdsByButton.has(button)) {\n      button.addListener(CjsButtonEvents.PRESSED, this.onButtonPressed, this);\n    }\n\n    this.radioButtonIdsByButton.set(button, id);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.removeAllButtons();\n    this.removeAllListeners();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get enabled(): boolean {\n    return (this._isEnabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set enabled(value: boolean) {\n    this._isEnabled = value;\n    this.radioButtonIdsByButton.forEach((_id, checkbox) => {\n      checkbox.enabled = value;\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeAllButtons(): this {\n    this.radioButtonIdsByButton.forEach((id) => {\n      this.removeButton(id);\n    });\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeButton(idOrButton: ButtonIdType | ICjsCheckbox): this {\n    const button = this.resolveButton(idOrButton);\n    if (button) {\n      button.removeListener(CjsButtonEvents.PRESSED, this.onButtonPressed, this);\n      this.radioButtonIdsByButton.delete(button);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setButtonOn(id: ButtonIdType): this {\n    return (this.setButtonState(id, true));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setButtonState(id: ButtonIdType, isOn: boolean): this {\n    const button = this.resolveButton(id);\n    if (button) {\n      button.setOn(isOn);\n      this.update(button);\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setEnabled(isEnabled: boolean): this {\n    this.enabled = isEnabled;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  shouldUseDisabledStates(should: boolean): this {\n    this.radioButtonIdsByButton.forEach((_id, checkbox) => {\n      (checkbox as CjsCheckbox).shouldUseDisabledState = should;\n    });\n\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(checkbox: ICjsCheckbox): void {\n    const id = this.radioButtonIdsByButton.get(checkbox);\n    if (id === undefined) {\n      return;\n    }\n\n    this.update(checkbox);\n    this.emit(SbRadioGroupEvents.SELECTED, id, checkbox, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private resolveButton(idOrButton: ButtonIdType | ICjsCheckbox): ICjsCheckbox | undefined {\n    if (typeof (idOrButton) === 'string' || typeof (idOrButton) === 'number') {\n      const entriesIterator = this.radioButtonIdsByButton.entries();\n\n      let currentEntry = entriesIterator.next();\n      while (!currentEntry.done) {\n        const [button, id] = currentEntry.value;\n\n        if (id === idOrButton) {\n          return (button);\n        }\n\n        currentEntry = entriesIterator.next();\n      }\n\n      return (undefined);\n    }\n\n    return (this.radioButtonIdsByButton.has(idOrButton) ? idOrButton : undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private setOnAndDisableOtherButtons(radioButtonToExclude: ICjsCheckbox): void {\n    this.radioButtonIdsByButton.forEach((_id, button) => {\n      if (button !== radioButtonToExclude) {\n        button.setOn(false).setEnabled(this.enabled);\n      }\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private update(radioButtonJustSetOn: ICjsCheckbox): void {\n    if (radioButtonJustSetOn.isOn) {\n      radioButtonJustSetOn.enabled = false;\n      this.setOnAndDisableOtherButtons(radioButtonJustSetOn);\n    }\n  }\n}\n","import CjsRadioGroup from '../../../../../utils/createjs/objects/buttons/CjsRadioGroup';\nimport ICjsCheckbox from '../../../../../utils/createjs/objects/buttons/ICjsCheckbox';\nimport { SbAssetLib } from '../../../../data/SbAssetLib';\nimport { SbInputDevices, SbInputDevice } from '../../../../data/SbInputDevices';\nimport SbUserDeviceSettingsData from '../../../../data/settings/device/SbUserDeviceSettingsData';\nimport SbUiComponent from '../../../SbUiComponent';\nimport SbRadioGroupEvents from '../../../events/SbRadioGroupEvents';\nimport SbSettingsSubPanel from '../SbSettingsSubPanel';\n\nconst DisplayNamesMap = [\n  [SbInputDevices.DualSwitch, 'dualSwitchCheckboxDisplay'],\n  [SbInputDevices.EyeTracker, 'eyeTrackerCheckboxDisplay'],\n  [SbInputDevices.SingleSwitch, 'singleSwitchCheckboxDisplay'],\n  [SbInputDevices.TapMouse, 'tapMouseCheckboxDisplay'],\n] as const;\n\nexport default class SbSettingsDevicesSubPanel\n  extends SbSettingsSubPanel<SbUserDeviceSettingsData> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly devicesRadioGroup: CjsRadioGroup;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(mainPanel: SbUiComponent, lib: Readonly<SbAssetLib>) {\n    super(mainPanel, lib);\n\n    this.devicesRadioGroup = this.initDevicesRadioGroup();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): this {\n    if (this.settings) {\n      this.devicesRadioGroup.setButtonOn(this.settings.inputDevice);\n    }\n\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected updateSettingsUiFromData(): void {\n    this.updateFromSettings();\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private initDevicesRadioGroup(): CjsRadioGroup {\n    const groupData: [SbInputDevice, ICjsCheckbox][] = [];\n    DisplayNamesMap.forEach(([inputDevice, displayName]) => {\n      const deviceCheckBox = this.mainPanel.initCheckbox(displayName);\n      if (deviceCheckBox) {\n        groupData.push([inputDevice, deviceCheckBox]);\n      }\n    });\n\n    const group = new CjsRadioGroup(groupData);\n    group.addListener(SbRadioGroupEvents.SELECTED, this.onDevicesRadioGroupSelected, this);\n    return (group);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDevicesRadioGroupSelected(id: SbInputDevice): void {\n    this.setSettingProp(this.settings, 'inputDevice', id);\n  }\n}\n","import CjsGetMovieClip from '../../../utils/createjs/objects/CjsGetMovieClip';\nimport CjsButton from '../../../utils/createjs/objects/buttons/CjsButton';\nimport CjsCheckbox from '../../../utils/createjs/objects/buttons/CjsCheckbox';\nimport SbDesignData from '../../data/SbDesignData';\n\ntype FillObject = {\n  bounds: createjs.Rectangle,\n  display: createjs.Shape,\n};\n\nexport default class SbCaptionHiliteColorCheckbox {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly checkbox: CjsCheckbox;\n\n  private readonly onFill: FillObject | undefined;\n\n  private readonly offFill: FillObject | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(checkbox: CjsCheckbox) {\n    this.checkbox = checkbox;\n    this.onFill = SbCaptionHiliteColorCheckbox.GetFillDisplay(this.checkbox.onButton);\n    this.offFill = SbCaptionHiliteColorCheckbox.GetFillDisplay(this.checkbox.offButton);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setColor(color: string): this {\n    SbCaptionHiliteColorCheckbox.ApplyColorToFill(this.onFill, color);\n    SbCaptionHiliteColorCheckbox.ApplyColorToFill(this.offFill, color);\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private static ApplyColorToFill(fillObject: FillObject | undefined, color: string): void {\n    if (!fillObject) {\n      return;\n    }\n\n    const DesignStroke = SbDesignData.CaptionHilites.Stroke;\n    fillObject.display.graphics\n      .clear()\n      .setStrokeStyle(DesignStroke.Thickness)\n      .beginStroke(DesignStroke.Color)\n      .beginFill(color)\n      .drawRect(0, 0, fillObject.bounds.width, fillObject.bounds.height);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static GetFillDisplay(button: CjsButton | undefined): FillObject | undefined {\n    if (!(button?.display instanceof createjs.MovieClip)) {\n      return (undefined);\n    }\n\n    const fillDisplay = CjsGetMovieClip(button.display, 'fill_display');\n    if (!fillDisplay) {\n      return (undefined);\n    }\n\n    const node = CjsGetMovieClip(fillDisplay, 'fill_placeholder');\n    if (!node) {\n      return (undefined);\n    }\n\n    const bounds = node.getBounds();\n    if (!bounds) {\n      return (undefined);\n    }\n\n    fillDisplay.removeChild(node);\n\n    const shape = new createjs.Shape();\n    shape.regX = bounds.width / 2;\n    shape.regY = bounds.height / 2;\n    fillDisplay.addChild(shape);\n\n    return ({\n      bounds: bounds.clone(),\n      display: shape,\n    });\n  }\n}\n","import CjsCreateCheckbox from '../../../../../utils/createjs/objects/buttons/CjsCreateCheckbox';\nimport CjsRadioGroup from '../../../../../utils/createjs/objects/buttons/CjsRadioGroup';\nimport CjsRadioGroupCallback from '../../../../../utils/createjs/objects/buttons/CjsRadioGroupCallback';\nimport ICjsCheckbox from '../../../../../utils/createjs/objects/buttons/ICjsCheckbox';\nimport { SbAssetLib } from '../../../../data/SbAssetLib';\nimport SbDesignData from '../../../../data/SbDesignData';\nimport SbUserStorybookSettingsData from '../../../../data/settings/storybook/SbUserStorybookSettingsData';\nimport SbUiComponent from '../../../SbUiComponent';\nimport SbRadioGroupEvents from '../../../events/SbRadioGroupEvents';\nimport SbCaptionHiliteColorCheckbox from '../../SbCaptionHiliteColorCheckbox';\nimport SbSettingsSubPanel from '../SbSettingsSubPanel';\n\nconst OffBinaryButtonId = 'off';\nconst OnBinaryButtonId = 'on';\ntype BinaryButtonId = typeof OffBinaryButtonId | typeof OnBinaryButtonId;\n\nexport default class SbSettingsStorybookSubPanel\n  extends SbSettingsSubPanel<SbUserStorybookSettingsData> {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly captionHiliteColorRadioGroup: CjsRadioGroup<number>;\n\n  private readonly helpfulTipsRadioGroup: CjsRadioGroup;\n\n  private readonly captionsRadioGroup: CjsRadioGroup;\n\n  private readonly captionHilitesRadioGroup: CjsRadioGroup;\n\n  private readonly aacRadioGroup: CjsRadioGroup;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(mainPanel: SbUiComponent, lib: Readonly<SbAssetLib>) {\n    super(mainPanel, lib);\n\n    this.helpfulTipsRadioGroup = this.initRadioGroup(\n      'helpfulTipsOffButtonDisplay',\n      'helpfulTipsOnButtonDisplay',\n      this.onHelpfulTipsGroupSelected,\n    );\n\n    this.captionsRadioGroup = this.initRadioGroup(\n      'captionsOffButtonDisplay',\n      'captionsOnButtonDisplay',\n      this.onCaptionsGroupSelected,\n    );\n\n    this.captionHilitesRadioGroup = this.initRadioGroup(\n      'captionHilitesOffButtonDisplay',\n      'captionHilitesOnButtonDisplay',\n      this.onCaptionHilitesGroupSelected,\n    );\n\n    this.captionHiliteColorRadioGroup = this.initCaptionHiliteColorCheckboxes();\n\n    this.aacRadioGroup = this.initRadioGroup(\n      'aacOffButtonDisplay',\n      'aacOnButtonDisplay',\n      this.onAacGroupSelected,\n    );\n\n    this.updateSettingsUiFromData();\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected updateSettingsUiFromData(): void {\n    if (this.settings) {\n      this.updateRadioGroup(this.aacRadioGroup, this.settings.aacSymbolsEnabled)\n        .updateRadioGroup(this.captionsRadioGroup, this.settings.captionsEnabled)\n        .updateRadioGroup(this.helpfulTipsRadioGroup, this.settings.helpfulTipsEnabled)\n        .updateCaptionHilitesRadioGroup()\n        .updateHiliteColorRadioGroup();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCaptionHilitesRadioGroup(): this {\n    return (this\n      .updateRadioGroup(this.captionHilitesRadioGroup,\n        this.settings?.captionHilitesEnabled === true)\n      .updateCaptionHilitesRadioGroupEnabledState());\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private initCaptionHiliteColorCheckbox(\n    displayName: string,\n  ): SbCaptionHiliteColorCheckbox | undefined {\n    const checkbox = CjsCreateCheckbox(this.mainPanel.container, displayName, false, undefined,\n      undefined, this.lib.animateClasses.RadioButtonHitBoxDisplay);\n\n    return (checkbox ? new SbCaptionHiliteColorCheckbox(checkbox) : undefined);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initCaptionHiliteColorCheckboxes(): CjsRadioGroup<number> {\n    const groupData: [number, ICjsCheckbox][] = [];\n    let index = 0;\n    let checkbox = this.initCaptionHiliteColorCheckbox(`hiliteColor${index}CheckboxDisplay`);\n    while (checkbox) {\n      const hiliteColor = SbDesignData.CaptionHilites.Colors[index];\n      if (hiliteColor) {\n        checkbox.setColor(hiliteColor);\n      }\n\n      checkbox.checkbox.shouldUseDisabledState = false;\n      groupData.push([index, checkbox.checkbox]);\n      index += 1;\n      checkbox = this.initCaptionHiliteColorCheckbox(`hiliteColor${index}CheckboxDisplay`);\n    }\n\n    const group = new CjsRadioGroup(groupData);\n    group.addListener(SbRadioGroupEvents.SELECTED, this.onCaptionHiliteColorCheckboxPressed, this);\n\n    return (group);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initRadioGroup(offButtonDisplayName: string,\n    onButtonDisplayName: string, callback: CjsRadioGroupCallback<BinaryButtonId>): CjsRadioGroup {\n    const offCheckbox = this.initCaptionHiliteColorCheckbox(offButtonDisplayName);\n    const onCheckbox = this.initCaptionHiliteColorCheckbox(onButtonDisplayName);\n    const groupData: [BinaryButtonId, ICjsCheckbox][] = [];\n    if (offCheckbox) {\n      groupData.push([OffBinaryButtonId, offCheckbox.checkbox]);\n    }\n\n    if (onCheckbox) {\n      groupData.push([OnBinaryButtonId, onCheckbox.checkbox]);\n    }\n\n    const group = new CjsRadioGroup(groupData);\n    group.addListener(SbRadioGroupEvents.SELECTED, callback, this);\n    group.shouldUseDisabledStates(false);\n    return (group);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onAacGroupSelected(id: BinaryButtonId): void {\n    this.setSettingProp(this.settings, 'aacSymbolsEnabled', id === OnBinaryButtonId);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onCaptionHiliteColorCheckboxPressed(id: number): void {\n    this.setSettingProp(this.settings, 'captionHiliteColorIndex', id);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onCaptionHilitesGroupSelected(id: BinaryButtonId): void {\n    this.setSettingProp(this.settings, 'captionHilitesEnabled', id === OnBinaryButtonId);\n\n    const isEnabled = this.settings?.captionHilitesEnabled === true;\n    this.captionHiliteColorRadioGroup.enabled = isEnabled;\n    this.captionHiliteColorRadioGroup.shouldUseDisabledStates(!isEnabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onCaptionsGroupSelected(id: BinaryButtonId): void {\n    const isEnabled = id === OnBinaryButtonId;\n    this.setSettingProp(this.settings, 'captionsEnabled', isEnabled);\n\n    this.updateCaptionHilitesRadioGroupEnabledState();\n    this.updateCaptionHiliteColorRadioGroupEnabledState();\n\n    if (!isEnabled) {\n      this.updateRadioGroup(this.captionHilitesRadioGroup, false);\n      this.setSettingProp(this.settings, 'captionHilitesEnabled', false);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onHelpfulTipsGroupSelected(id: BinaryButtonId): void {\n    this.setSettingProp(this.settings, 'helpfulTipsEnabled', id === OnBinaryButtonId);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCaptionHiliteColorRadioGroupEnabledState(): void {\n    const isEnabled = this.settings !== undefined\n      && this.settings.captionsEnabled && this.settings.captionHilitesEnabled;\n    this.captionHiliteColorRadioGroup.enabled = isEnabled;\n    this.captionHiliteColorRadioGroup.shouldUseDisabledStates(!isEnabled);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateCaptionHilitesRadioGroupEnabledState(): this {\n    const isEnabled = this.settings?.captionsEnabled === true;\n    this.captionHilitesRadioGroup.enabled = isEnabled;\n    this.captionHilitesRadioGroup.shouldUseDisabledStates(!isEnabled);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateHiliteColorRadioGroup(): this {\n    if (this.settings?.captionHiliteColorIndex !== undefined) {\n      this.captionHiliteColorRadioGroup.setButtonOn(this.settings.captionHiliteColorIndex);\n    }\n\n    this.updateCaptionHiliteColorRadioGroupEnabledState();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateRadioGroup(group: CjsRadioGroup, isEnabled: boolean): this {\n    const buttonId = isEnabled ? OnBinaryButtonId : OffBinaryButtonId;\n    group.setButtonOn(buttonId);\n    return (this);\n  }\n}\n","const SbSettingsPanelEvents = {\n  EXIT: 'exit',\n  SAVE: 'save',\n};\n\nexport default SbSettingsPanelEvents;\n","import SbDefaults from '../../data/defaults/SbDefaults';\nimport SbUserSettingsData from '../../data/settings/SbUserSettingsData';\nimport SbUiComponent from '../SbUiComponent';\nimport CloneObject from '../../../utils/object/CloneObject';\nimport SbSettingsAudioSubPanel from './subPanels/audio/SbSettingsAudioSubPanel';\nimport SbSettingsDevicesSubPanel from './subPanels/devices/SbSettingsDevicesSubPanel';\nimport SbSettingsStorybookSubPanel from './subPanels/storybook/SbSettingsStorybookSubPanel';\nimport SbSettingsPanelEvents from './events/SbSettingsPanelEvents';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport { SbMessagePanelButtonIds } from '../messagePanel/SbMessagePanelButtonIds';\nimport SbUiComponentEvents from '../events/SbUiComponentEvents';\n\nexport default class SbSettingsPanel extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly audioSubPanel: SbSettingsAudioSubPanel;\n\n  private readonly devicesSubPanel: SbSettingsDevicesSubPanel;\n\n  private readonly storybookSubPanel: SbSettingsStorybookSubPanel;\n\n  private _settingsData: SbUserSettingsData;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super(container, engine);\n\n    this.audioSubPanel = new SbSettingsAudioSubPanel(this, engine.lib);\n    this.devicesSubPanel = new SbSettingsDevicesSubPanel(this, engine.lib);\n    this.storybookSubPanel = new SbSettingsStorybookSubPanel(this, engine.lib);\n\n    this.initButton('saveButtonDisplay', this.onSavePressed);\n    this.initButton('exitButtonDisplay', this.onExitPressed);\n\n    this._settingsData = CloneObject(SbDefaults.Settings);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get settingsData(): SbUserSettingsData {\n    return (this._settingsData);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set settingsData(value: SbUserSettingsData) {\n    this._settingsData = value;\n    this.audioSubPanel.setSettings(this._settingsData.audio);\n    this.devicesSubPanel.setSettings(this._settingsData.device);\n    this.storybookSubPanel.setSettings(this._settingsData.storybook);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(settingsData: SbUserSettingsData): this {\n    this.settingsData = settingsData;\n    this.visible = true;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resetModifiedFlags(): this {\n    this.audioSubPanel.areSettingsDirty = false;\n    this.devicesSubPanel.areSettingsDirty = false;\n    this.storybookSubPanel.areSettingsDirty = false;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresent(): this {\n    this.visible = false;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected override async onClosePressed(): Promise<void> {\n    if (await this.shouldConitnueWithUnsavedChanges()) {\n      this.emit(SbUiComponentEvents.CLOSE, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  protected override onInit(): void {\n    super.onInit(this.engine.lib.animateClasses.CloseXButtonHitBoxDisplay);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private areSettingsDirty(): boolean {\n    return (\n      this.audioSubPanel.areSettingsDirty\n      || this.devicesSubPanel.areSettingsDirty\n      || this.storybookSubPanel.areSettingsDirty\n    );\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async shouldConitnueWithUnsavedChanges(): Promise<boolean> {\n    if (!this.areSettingsDirty()) {\n      return (true);\n    }\n\n    const messageId = await this.engine.createMessagePanel(\n      'You have unsaved changes.\\nContinue to close settings?',\n      this.engine.lib.animateClasses.MessagePanelYNDisplay,\n    );\n\n    return (messageId === SbMessagePanelButtonIds.Yes);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async onExitPressed(): Promise<void> {\n    if (await this.shouldConitnueWithUnsavedChanges()) {\n      this.emit(SbSettingsPanelEvents.EXIT, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSavePressed(): void {\n    this.emit(SbSettingsPanelEvents.SAVE, this);\n  }\n}\n","const SbPauseKinds = {\n  IsFromNav: 'isFromNav',\n  IsFromUi: 'isFromUi',\n} as const;\n\ntype SbPauseKind = typeof SbPauseKinds[keyof typeof SbPauseKinds];\n\nexport {\n  SbPauseKind,\n  SbPauseKinds,\n};\n","import EventEmitter from 'eventemitter3';\nimport IStorybookEngine from '../../IStorybookEngine';\n\nexport default class SbContentVideo extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  timelineStartFrame: number;\n\n  private contentVideoBitmap: createjs.Bitmap | undefined;\n\n  private buffer: createjs.VideoBuffer | undefined;\n\n  private _videoElement: HTMLVideoElement | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine, videoElement?: HTMLVideoElement) {\n    super();\n\n    this.engine = engine;\n    this.timelineStartFrame = 0;\n\n    this._videoElement = videoElement;\n\n    if (videoElement) {\n      this.init(videoElement);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    this.removeAllListeners();\n    this.stop();\n    this.contentVideoBitmap?.parent?.removeChild(this.contentVideoBitmap);\n    this.contentVideoBitmap = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  init(video: HTMLVideoElement): this {\n    if (this.contentVideoBitmap) {\n      return (this);\n    }\n\n    if (this.engine.config?.shouldUseVideoBuffer) {\n      this.buffer = new createjs.VideoBuffer(video);\n    }\n\n    this.contentVideoBitmap = new createjs.Bitmap(this.buffer || video);\n    this.contentVideoBitmap.visible = false;\n\n    const container = this.engine.videoContainer || this.engine.exportRoot.display;\n    container.addChildAt(this.contentVideoBitmap, 0);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async play(): Promise<boolean> {\n    if (!this._videoElement || this._videoElement.ended) {\n      return (false);\n    }\n\n    try {\n      await this._videoElement.play();\n    } catch (error) {\n      console.warn(error);\n      return (false);\n    }\n\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  seekTo(timeInSecs: number): this {\n    if (this._videoElement) {\n      this._videoElement.currentTime = timeInSecs;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  seekToFrame(timelineFrame: number): this {\n    if (!this._videoElement) {\n      return (this);\n    }\n\n    const videoFrame = Math.max(0, timelineFrame - this.timelineStartFrame);\n    const timeInSecs = videoFrame / this.engine.config.videoFps;\n    return (this.seekTo(timeInSecs));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setVisible(isVisible: boolean): this {\n    if (this.contentVideoBitmap) {\n      this.contentVideoBitmap.visible = isVisible;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(): this {\n    this._videoElement?.pause();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get videoElement(): HTMLVideoElement | undefined {\n    return (this._videoElement);\n  }\n}\n","const SbContentHandlerEvents = {\n  VIDEO_LOAD_COMPLETE: 'videoLoadComplete',\n} as const;\n\nexport default SbContentHandlerEvents;\n","import IStorybookEngine from '../../IStorybookEngine';\nimport SbScene from '../../storybookScene/SbScene';\nimport SbVideoMathProps from './SbVideoMathProps';\n\nexport default class SbVideoMath {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    this.engine = engine;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  convertTimelineFrameToVideoTime(timelineFrame: number | string): number {\n    const videoFrame = Math.max(\n      0,\n      this.resolveTimelineFrame(timelineFrame) - this.startTimelineFrame,\n    );\n\n    const videoTimeInSecs = videoFrame / this.engine.config.videoFps;\n    return (videoTimeInSecs);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resolveTimelineFrame(timelineFrame: number | string): number {\n    return (typeof (timelineFrame) === 'number'\n      ? timelineFrame\n      : this.exportRoot.timeline.resolve(timelineFrame) ?? 0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resolveVideoTime(out?: SbVideoMathProps): SbVideoMathProps {\n    if (!out) {\n      out = {\n        timelineFrame: 0,\n        videoFrame: 0,\n        videoTimeSecs: 0,\n      };\n    }\n\n    const { contentVideoElement } = this;\n    if (contentVideoElement) {\n      out.timelineFrame = this.exportRoot.currentFrame - this.startTimelineFrame;\n      out.videoTimeSecs = contentVideoElement.currentTime;\n      out.videoFrame = Math.ceil(out.videoTimeSecs * this.engine.config.videoFps);\n    }\n\n    return (out);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private get contentVideoElement(): HTMLVideoElement | undefined {\n    return (this.engine.contentVideoElement);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get exportRoot(): SbScene {\n    return (this.engine.exportRoot);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get startTimelineFrame(): number {\n    return (this.engine.startTimelineFrame);\n  }\n}\n","import IsPlainObject from '../../../../utils/object/IsPlainObject';\nimport { SbNavAction } from '../../../config/nav/SbNavActions';\n\ntype SbNavToParam = {\n  action?: SbNavAction;\n  callback?: () => void;\n  context?: unknown;\n  frame?: number | string;\n  endFrame?: number | string;\n};\n\nexport function SbIsNavToParam(data: unknown): data is SbNavToParam {\n  return (IsPlainObject(data)\n    && (\n      'action' in data\n      || 'callback' in data\n      || 'frame' in data\n    ));\n}\n\nexport default SbNavToParam;\n","const SbNavActions = {\n  Play: 'play',\n  Stop: 'stop',\n} as const;\n\ntype SbNavAction = typeof SbNavActions[keyof typeof SbNavActions];\n\nconst SbNavActionsArray = Object.values(SbNavActions) as\n  ReadonlyArray<SbNavAction>;\n\nexport {\n  SbNavAction,\n  SbNavActions,\n  SbNavActionsArray,\n};\n","import EventEmitter from 'eventemitter3';\nimport IStorybookEngine from '../IStorybookEngine';\nimport { SbPauseKind, SbPauseKinds } from '../ui/content/SbPauseConfig';\nimport SbContentVideo from '../ui/content/SbContentVideo';\nimport CjsLoadItem from '../../utils/createjs/load/CjsLoadItem';\nimport { CjsEvents } from '../../utils/createjs/events/CjsEvents';\nimport SbContentHandlerEvents from './SbContentHandlerEvents';\nimport SbNavToParams from '../ui/main/nav/SbNavToParams';\nimport { SbNavToDirection } from '../ui/main/nav/SbNavToDirections';\nimport SbDesignData from '../data/SbDesignData';\nimport SbVideoMath from './videoMath/SbVideoMath';\nimport SbVideoMathProps from './videoMath/SbVideoMathProps';\nimport SbNavToParam, { SbIsNavToParam } from '../ui/main/nav/SbNavToParam';\nimport { SbNavAction, SbNavActions } from '../config/nav/SbNavActions';\nimport SbScene from '../storybookScene/SbScene';\n\ntype PauseConfig = {\n  [P in SbPauseKind as Uncapitalize<P>]: boolean;\n};\n\nconst { ContentVideoId } = SbDesignData;\n\nexport default class SbContentHandler extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  // TODO: remove if na\n  // startFrame: number;\n\n  private readonly engine: IStorybookEngine;\n\n  private readonly pauseConfig: PauseConfig;\n\n  private readonly videoMath: SbVideoMath;\n\n  private contentVideoLastTime: number;\n\n  private contentVideo: SbContentVideo | undefined;\n\n  private videoTimeProps: SbVideoMathProps | undefined;\n\n  // TODO: remove if na\n  // private testTimer: Timer | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    super();\n\n    this.engine = engine;\n    this.pauseConfig = {\n      isFromNav: false,\n      isFromUi: false,\n    };\n\n    this.contentVideoLastTime = -1;\n\n    // remove if na\n    // this.startFrame = 0;\n    this.videoMath = new SbVideoMath(engine);\n\n    // TODO: remove if na\n    // this.onTickerTick = this.onTickerTick.bind(this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get videoElement(): HTMLVideoElement | undefined {\n    return (this.contentVideo?.videoElement);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    if (this.contentVideo) {\n      this.contentVideo.dispose();\n      this.contentVideo = undefined;\n    } else {\n      this.exportRoot.stop();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  loadContentVideo(videoUrl: string): this {\n    if (this.contentVideo) {\n      return (this);\n    }\n\n    const queue = new createjs.LoadQueue();\n    queue.on(CjsEvents.FILE_LOAD, (e: unknown) => {\n      const event = e as createjs.Event;\n      const item = event.item as CjsLoadItem;\n      if (item.id === ContentVideoId) {\n        this.setContentVideo(event.result);\n      }\n    }, this);\n\n    queue.on(CjsEvents.COMPLETE, () => {\n      queue.destroy();\n      this.emit(SbContentHandlerEvents.VIDEO_LOAD_COMPLETE, this);\n    }, this, true);\n\n    queue.loadFile({\n      id: ContentVideoId,\n      src: videoUrl,\n      type: 'video',\n    }, true);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  navTo(direction: SbNavToDirection, navToParams: SbNavToParams): void {\n    const navParam = navToParams[direction];\n\n    // TODO: remove if na\n    // const targetFrameOrLabel = navToParams[direction];\n    // if (targetFrameOrLabel === undefined) {\n\n    if (navParam === undefined) {\n      this.resume(SbPauseKinds.IsFromNav);\n      return;\n    }\n\n    let _navToParam: SbNavToParam;\n    if (SbIsNavToParam(navParam)) {\n      _navToParam = navParam;\n    } else {\n      _navToParam = {\n        action: SbNavActions.Play,\n        frame: navParam,\n      };\n    }\n\n    if (_navToParam.callback !== undefined) {\n      _navToParam.callback.call(_navToParam.context);\n      return;\n    }\n\n    // TODO: remove if na\n    const targetFrameOrLabel = _navToParam.frame;\n    if (targetFrameOrLabel === undefined) {\n      this.resume(SbPauseKinds.IsFromNav);\n      return;\n    }\n\n    // TODO: remove if na\n    /*\n    switch (direction) {\n      case SbNavToDirections.Prev:\n      case SbNavToDirections.Restart: {\n        const timelineFrame = this.exportRoot.timeline.resolve(targetFrameOrLabel) + 1;\n        if (this.contentVideo) {\n          this.navToJumpVideo(timelineFrame, _navToParam.action);\n        } else {\n          this.navToJumpRoot(timelineFrame, _navToParam.action);\n        }\n\n        break;\n      }\n\n      case SbNavToDirections.Next:\n      default:\n        this.resume(SbPauseKinds.IsFromNav);\n        break;\n    }\n    */\n    // TODO: remove if na\n    const timelineFrame = this.exportRoot.timeline.resolve(targetFrameOrLabel);\n    if (this.contentVideo && _navToParam.action) {\n      this.navToJumpVideo(timelineFrame, _navToParam.action);\n    } else {\n      this.navToJumpRoot(timelineFrame, _navToParam);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  pause(pauseKind: SbPauseKind): this {\n    this.pauseTarget(pauseKind);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resume(pauseKind: SbPauseKind, startFrameOrLabel?: number | string,\n    endFrameOrLabel?: number | string): this {\n    this.resumeTarget(pauseKind, startFrameOrLabel, endFrameOrLabel);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setContentVideo(video: HTMLVideoElement): this {\n    if (this.contentVideo) {\n      console.info('A content video has already been set.');\n      return (this);\n    }\n\n    this.contentVideo = new SbContentVideo(this.engine, video);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(timelineFrame?: number | string): this {\n    const startTimelineFrame = timelineFrame ?? this.startTimelineFrame;\n\n    if (this.contentVideo?.videoElement) {\n      this.startWithVideo(startTimelineFrame);\n    } else {\n      this.startWithTimeline(startTimelineFrame);\n    }\n\n    this.engine.updateFromSettings();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  update(): void {\n    if (!this.contentVideo?.videoElement) {\n      return;\n    }\n\n    this.videoTimeProps = this.videoMath.resolveVideoTime(this.videoTimeProps);\n    /*\n    const timelineFrame = this.exportRoot.currentFrame - this.startTimelineFrane;\n    const videoTimeSecs = this.contentVideo.videoElement.currentTime;\n    const videoFrame = Math.ceil(videoTimeSecs * this.engine.config.videoFps);\n    */\n\n    // TODO\n    // console.log(videoFrame, timelineFrame, this.exportRoot.currentFrame);\n\n    // FIXME: still needed for video? if so, need to clean-up before re-using\n    /*\n    const {\n      timelineFrame,\n      videoFrame,\n      videoTimeSecs,\n    } = this.videoTimeProps;\n\n    if (videoFrame - timelineFrame >= 5) {\n      const catchUpTimeInSecs = (videoFrame - timelineFrame) / this.engine.config.videoFps;\n      this.exportRoot.paused = false;\n      this.exportRoot.advance(catchUpTimeInSecs * 1000);\n      this.exportRoot.paused = true;\n\n      // TODO\n      // console.log('skip');\n    } else if (!this.contentVideo.videoElement.paused) {\n      const videoTimeDelta = this.contentVideoLastTime === -1\n        ? videoTimeSecs\n        : videoTimeSecs - this.contentVideoLastTime;\n\n      // TODO\n      // console.log(videoTimeDelta);\n      if (videoTimeDelta > 0) {\n        this.exportRoot.paused = false;\n        this.exportRoot.advance(videoTimeDelta * 1000);\n        this.exportRoot.paused = true;\n      }\n    }\n\n    this.contentVideoLastTime = videoTimeSecs;\n    */\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  /*\n  private convertTimelineFrameToVideoTime(timelineFrame: number | string): number {\n    const videoFrame = Math.max(\n      0,\n      this.resolveTimelineFrame(timelineFrame) - this.startTimelineFrane,\n    );\n\n    const videoTimeInSecs = videoFrame / this.engine.config.videoFps;\n    return (videoTimeInSecs);\n  }\n  */\n\n  // ----------------------------------------------------------------------------------------------\n  private get exportRoot(): SbScene {\n    return (this.engine.exportRoot);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private navToJumpRoot(startFrameOrLabel: number, param: SbNavToParam): void {\n    // TODO\n    console.log('navToJumpRoot:', startFrameOrLabel, this.exportRoot.currentFrame, 'param:',\n      param);\n\n    if (param.action === SbNavActions.Play) {\n      this.resume(SbPauseKinds.IsFromNav, startFrameOrLabel, param.endFrame);\n    } else {\n      this.exportRoot.stop(startFrameOrLabel);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private navToJumpVideo(timelineFrame: number, action: SbNavAction): void {\n    this.exportRoot.stop(timelineFrame);\n\n    if (action === SbNavActions.Play) {\n      if (this.contentVideo?.videoElement) {\n        this.contentVideo.seekToFrame(timelineFrame);\n        this.contentVideoLastTime = this.contentVideo.videoElement.currentTime;\n        this.resume(SbPauseKinds.IsFromNav);\n      }\n    } else if (this.contentVideo?.videoElement) {\n      this.contentVideo.seekToFrame(timelineFrame);\n      this.contentVideoLastTime = this.contentVideo.videoElement.currentTime;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private pauseTarget(pauseKind: SbPauseKind): void {\n    this.pauseConfig[pauseKind] = true;\n    if (this.contentVideo) {\n      this.contentVideo.stop();\n    } else {\n      // TODO\n      console.log('pause target', this.exportRoot.currentFrame,\n        this.exportRoot.display.currentLabel);\n      this.exportRoot.stop();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async resumeTarget(pauseKind: SbPauseKind,\n    startFrameOrLabel?: number | string,\n    endFrameOrLabel?: number | string): Promise<void> {\n    this.pauseConfig[pauseKind] = false;\n    if (this.pauseConfig.isFromNav || this.pauseConfig.isFromUi) {\n      return;\n    }\n\n    if (this.contentVideo) {\n      if (startFrameOrLabel !== undefined) {\n        this.exportRoot.stop(startFrameOrLabel);\n      }\n\n      this.contentVideo.play();\n    } else {\n      // TODO\n      console.log('resume target', this.exportRoot.currentFrame,\n        this.exportRoot.display.currentLabel,\n        startFrameOrLabel !== undefined ? `starting from: ${startFrameOrLabel}` : '');\n\n      if (startFrameOrLabel !== undefined) {\n        if (endFrameOrLabel !== undefined) {\n          this.exportRoot.playTo(endFrameOrLabel, startFrameOrLabel);\n        } else {\n          this.exportRoot.play(startFrameOrLabel);\n        }\n      } else {\n        this.exportRoot.play();\n      }\n\n      // TODO: remove if na\n      /*\n      createjs.Ticker.removeEventListener(CjsEvents.TICK, this.onTickerTick);\n      createjs.Ticker.addEventListener(CjsEvents.TICK, this.onTickerTick);\n\n      this.testTimer?.stop();\n      this.testTimer = new Timer(1000);\n      console.log('test timer start');\n      this.testTimer.start().then(() => {\n        console.log('test timer stop');\n        createjs.Ticker.removeEventListener(CjsEvents.TICK, this.onTickerTick);\n        this.testTimer = undefined;\n      });\n      */\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // TODO: remove if na\n  /*\n  private onTickerTick(_eventObj: unknown): void {\n    if (this.pauseConfig.isFromNav || this.pauseConfig.isFromUi) {\n      return;\n    }\n\n    if (!this.exportRoot.paused) {\n      return;\n    }\n\n    console.info('force play kludge');\n    this.testTimer?.stop();\n    this.testTimer = undefined;\n    this.exportRoot.play();\n  }\n  */\n\n  // ----------------------------------------------------------------------------------------------\n  private get startTimelineFrame(): number {\n    return (this.engine.startTimelineFrame);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private startWithTimeline(_startTimelineFrame: string | number): void {\n    const { config } = this.engine;\n    if (config.startCallback) {\n      config.startCallback.call(config.startCallbackContext);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private startWithVideo(startTimelineFrame: string | number): void {\n    if (!this.contentVideo?.videoElement) {\n      return;\n    }\n\n    this.exportRoot.stop(startTimelineFrame);\n    this.contentVideo.videoElement.currentTime = this.videoMath.convertTimelineFrameToVideoTime(\n      startTimelineFrame,\n    );\n\n    this.contentVideo.play();\n    this.contentVideo.setVisible(true);\n  }\n}\n","function GetWindowQueryParamValue(paramName: string): string | null {\n  const searchParamsValues = window.location.search;\n  const urlParams = new URLSearchParams(searchParamsValues);\n  return (urlParams.get(paramName));\n}\n\nexport default GetWindowQueryParamValue;\n","const SbQueryParams = {\n  ContentVideo: 'contentVideo',\n  DeleteProgress: 'deleteProgress',\n  ExitRedirect: 'exitRedirect',\n  StorybookId: 'storybookId',\n} as const;\n\ntype SbQueryParam = typeof SbQueryParams[keyof typeof SbQueryParams];\n\nexport {\n  SbQueryParam,\n  SbQueryParams,\n};\n","import { ISbAnCompLibHeader } from '../../data/SbAssetLib';\n\ntype SbAnCompType = {\n  getLibrary(): ISbAnCompLibHeader;\n};\n\ntype SbAdobeAnType = {\n  compositions: Record<string, SbAnCompType>;\n};\n\ndeclare const AdobeAn: SbAdobeAnType;\n\n// ------------------------------------------------------------------------------------------------\nfunction SbGetComp(): SbAnCompType | undefined {\n  const compId = Object.keys(AdobeAn.compositions)[0];\n  return (compId ? AdobeAn.compositions[compId] : undefined);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbGetCompLib(comp?: SbAnCompType): ISbAnCompLibHeader | undefined {\n  comp ??= SbGetComp();\n  return (comp?.getLibrary());\n}\n\nexport {\n  SbAdobeAnType,\n  SbAnCompType,\n  SbGetComp,\n  SbGetCompLib,\n};\n","import { GlobalDomEvents } from '../../../utils/web/dom/GlobalDomEvents';\nimport { SbGetCompLib } from './SbCompLib';\n\ndeclare const stage: createjs.Stage | undefined;\n\ntype DomContainers = (HTMLElement | null)[];\n\ntype ResponsiveProps = {\n  domContainers: DomContainers;\n  isResp: boolean;\n  isScale: boolean;\n  lastH: number;\n  lastS: number;\n  lastW: number;\n  respDim: string;\n  scaleType: number;\n};\n\nlet Props: ResponsiveProps;\n\n// ------------------------------------------------------------------------------------------------\nfunction getDomContainers(inOut?: DomContainers): DomContainers {\n  const _inOut = inOut ?? [];\n\n  [\n    'canvas',\n    '_preload_div_',\n    'animation_container',\n    'dom_overlay_container',\n  ].forEach((elemId, index) => {\n    const elem = _inOut[index];\n    if (!elem) {\n      _inOut[index] = document.getElementById(elemId);\n    }\n  });\n\n  return (_inOut as DomContainers);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction onWindowResize(): void {\n  const lib = SbGetCompLib();\n  if (!lib) {\n    return;\n  }\n\n  const w = lib.properties.width;\n  const h = lib.properties.height;\n  const iw = window.innerWidth;\n  const ih = window.innerHeight;\n  const pRatio = window.devicePixelRatio || 1;\n  const xRatio = iw / w;\n  const yRatio = ih / h;\n  let sRatio = 1;\n\n  if (Props.isResp) {\n    if ((Props.respDim === 'width' && Props.lastW === iw)\n    || (Props.respDim === 'height' && Props.lastH === ih)) {\n      sRatio = Props.lastS;\n    } else if (!Props.isScale) {\n      if (iw < w || ih < h) { sRatio = Math.min(xRatio, yRatio); }\n    } else if (Props.scaleType === 1) {\n      sRatio = Math.min(xRatio, yRatio);\n    } else if (Props.scaleType === 2) {\n      sRatio = Math.max(xRatio, yRatio);\n    }\n  }\n\n  const { domContainers } = Props;\n  domContainers.forEach((container, index) => {\n    if (!container) {\n      return;\n    }\n\n    if (index === 0 && container instanceof HTMLCanvasElement) {\n      container.width = w * pRatio * sRatio;\n      container.height = h * pRatio * sRatio;\n    } else {\n      container.style.width = `${w * sRatio}px`;\n      container.style.height = `${h * sRatio}px`;\n    }\n  });\n\n  Props.lastW = iw;\n  Props.lastH = ih;\n  Props.lastS = sRatio;\n\n  if (stage) {\n    stage.scaleX = pRatio * sRatio;\n    stage.scaleY = pRatio * sRatio;\n    stage.tickOnUpdate = false;\n    stage.update();\n    stage.tickOnUpdate = true;\n  }\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbMakeResponsive(isResp = true, respDim = 'both', isScale = false, scaleType = 1): void {\n  Props = {\n    domContainers: getDomContainers(),\n    isResp,\n    respDim,\n    isScale,\n    scaleType,\n    lastH: 0,\n    lastS: 1,\n    lastW: 0,\n  };\n\n  window.addEventListener(GlobalDomEvents.Resize, onWindowResize);\n  onWindowResize();\n}\n\nexport default SbMakeResponsive;\n","import { CjsEvents } from '../../../utils/createjs/events/CjsEvents';\nimport CjsLoadItem from '../../../utils/createjs/load/CjsLoadItem';\nimport Clamp from '../../../utils/math/Clamp';\nimport GetWindowQueryParamValue from '../../../utils/web/window/GetWindowQueryParamValue';\nimport SbDesignData from '../../data/SbDesignData';\nimport { SbQueryParams } from '../../data/SbQueryParams';\nimport {\n  SbAnCompType,\n  SbGetComp,\n} from './SbCompLib';\n\nimport SbMakeResponsive from './SbMakeResponsive';\n\ndeclare function handleFileLoad(evt: unknown, comp: SbAnCompType): void;\ndeclare function handleComplete(evt: unknown, comp: SbAnCompType): void;\n\n// These variables are needed for the original Adobe Animate / CreateJs export, since we replaced\n// the original `init` function in the publishing HTML Template with `SbDocPrepUtil`.\n/* eslint-disable camelcase, @typescript-eslint/no-unused-vars */\ndeclare let canvas: HTMLCanvasElement | null;\ndeclare let anim_container: HTMLDivElement | null;\ndeclare let dom_overlay_container: HTMLDivElement | null;\n/* eslint-enable camelcase, @typescript-eslint/no-unused-vars */\n\n// ------------------------------------------------------------------------------------------------\nfunction sbEnqueContentVideo(loader: createjs.LoadQueue): void {\n  const contentVideoUrl = GetWindowQueryParamValue(SbQueryParams.ContentVideo);\n  if (contentVideoUrl) {\n    loader.loadFile({\n      id: SbDesignData.ContentVideoId,\n      src: contentVideoUrl,\n      type: 'video',\n    });\n  }\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction setProgress(progress: number): void {\n  const progressBarFill = document.getElementById(SbDesignData.HtmlElementIds.ProgressBarFill);\n  if (progressBarFill) {\n    const value = Math.round((1.0 - Clamp(progress, 0, 1.0)) * 100);\n    progressBarFill.style.right = `${value}%`;\n  }\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbDocPrepUtil(): void {\n  canvas = document.getElementById(SbDesignData.HtmlElementIds.Canvas) as HTMLCanvasElement;\n\n  /* eslint-disable camelcase */\n  anim_container = document.getElementById(SbDesignData.HtmlElementIds.AnimationContainer) as\n    HTMLDivElement;\n\n  dom_overlay_container = document.getElementById(\n    SbDesignData.HtmlElementIds.DomOverlayContainer,\n  ) as HTMLDivElement;\n  /* eslint-enable camelcase */\n\n  const comp = SbGetComp();\n  if (!comp) {\n    console.warn('no compoision library found');\n    return;\n  }\n\n  const lib = comp.getLibrary();\n  const loader = new createjs.LoadQueue(false);\n  loader.installPlugin(createjs.Sound);\n  loader.addEventListener(CjsEvents.PROGRESS, (evt) => {\n    const event = evt as createjs.ProgressEvent;\n    setProgress(event.progress);\n  });\n\n  loader.addEventListener(CjsEvents.FILE_LOAD, (evt) => {\n    const event = evt as createjs.Event;\n    const item = event.item as CjsLoadItem;\n    if (item.id === SbDesignData.ContentVideoId) {\n      lib.contentVideo = event.result;\n    } else {\n      handleFileLoad(evt, comp);\n    }\n  });\n\n  loader.addEventListener(CjsEvents.COMPLETE, (evt) => {\n    handleComplete(evt, comp);\n    loader.destroy();\n  });\n\n  loader.loadManifest(lib.properties.manifest);\n  sbEnqueContentVideo(loader);\n\n  SbMakeResponsive();\n}\n\nexport default SbDocPrepUtil;\n","import GetValue from './GetValue';\n\n/**\n * Returns the boolean value of a property key within the top level of an object, or returns a\n * default value if the key is not found.\n *\n * @param source - The object to search.\n * @param key - The key for the property on source. Must exist at the top level of the\n * source object (no periods).\n * @param [defaultValue=false] - The default value to use if the key does not exist.\n *\n * @returns The value if found; otherwise, `defaultValue` (`false` if none provided).\n */\nexport default function GetBooleanValue(source: unknown, key: string,\n  defaultValue = false): boolean {\n  return (GetValue(source, key, defaultValue) ?? defaultValue);\n}\n","import GetStringValue from '../../../../utils/object/GetStringValue';\n\ntype SbEngineButtonsMenuConfig = {\n  defaultCorrectSoundKey?: string;\n  defaultInorrectSoundKey?: string;\n};\n\nexport function SbResolveEngineButtonsMenuConfig(\n  config?: SbEngineButtonsMenuConfig | null,\n): SbEngineButtonsMenuConfig {\n  const configOut: SbEngineButtonsMenuConfig = config ?? {} as SbEngineButtonsMenuConfig;\n  configOut.defaultCorrectSoundKey = GetStringValue(config, 'defaultCorrectSoundKey');\n  configOut.defaultInorrectSoundKey = GetStringValue(config, 'defaultInorrectSoundKey');\n  return (configOut);\n}\n\nexport default SbEngineButtonsMenuConfig;\n","import GetBooleanValue from '../../../../utils/object/GetBooleanValue';\nimport GetNumberValue from '../../../../utils/object/GetNumberValue';\nimport GetStringValue from '../../../../utils/object/GetStringValue';\nimport GetValue from '../../../../utils/object/GetValue';\nimport GetWindowQueryParamValue from '../../../../utils/web/window/GetWindowQueryParamValue';\nimport { SbAssetLib } from '../../../data/SbAssetLib';\nimport { SbQueryParams } from '../../../data/SbQueryParams';\nimport SbDefaults from '../../../data/defaults/SbDefaults';\nimport SbEngineConfig from '../SbEngineConfig';\nimport { SbResolveEngineButtonsMenuConfig } from './SbEngineButtonsMenuConfig';\n\nconst DefaultEngineConfig = SbDefaults.EngineConfig;\n\n// ------------------------------------------------------------------------------------------------\nfunction resolveStorybookId(configIn: SbEngineConfig | undefined): string {\n  const id = GetStringValue(configIn, 'storybookId');\n  return (id || (GetWindowQueryParamValue(SbQueryParams.StorybookId) ?? ''));\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction resolveVideoFps(configIn: SbEngineConfig | undefined,\n  lib?: Readonly<SbAssetLib>): number {\n  const videoFps = GetNumberValue(configIn, 'videoFps', lib?.header.properties.fps);\n  return (videoFps > 0 ? videoFps : DefaultEngineConfig.videoFps);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbResolveEngineConfig(configIn?: SbEngineConfig,\n  lib?: Readonly<SbAssetLib>, configOut?: SbEngineConfig): SbEngineConfig {\n  configOut ??= {};\n  configOut.buttonsMenu = SbResolveEngineButtonsMenuConfig(configIn?.buttonsMenu);\n\n  configOut.contentVideoUrl = GetStringValue(configIn, 'contentVideoUrl',\n    DefaultEngineConfig.contentVideoUrl);\n\n  configOut.exitRedirectUrl = GetStringValue(configIn, 'exitRedirectUrl',\n    DefaultEngineConfig.exitRedirectUrl);\n\n  configOut.navButtonsSoundKey = GetStringValue(configIn, 'navButtonsSoundKey',\n    DefaultEngineConfig.navButtonsSoundKey);\n\n  configOut.pressIndicatorDelay = GetNumberValue(configIn, 'pressIndicatorDelay',\n    DefaultEngineConfig.pressIndicatorDelay);\n\n  configOut.sceneHandler = GetValue(configIn, 'sceneHandler',\n    DefaultEngineConfig.sceneHandler);\n\n  configOut.shouldSkipIntro = GetBooleanValue(configIn, 'shouldSkipIntro',\n    DefaultEngineConfig.shouldSkipIntro);\n\n  configOut.shouldUseVideoBuffer = GetBooleanValue(configIn, 'shouldUseVideoBuffer',\n    DefaultEngineConfig.shouldUseVideoBuffer);\n\n  configOut.shouldWaitForNavSounds = GetBooleanValue(configIn, 'shouldWaitForNavSounds',\n    DefaultEngineConfig.shouldWaitForNavSounds);\n\n  configOut.singleDeviceDelayMs = GetNumberValue(configIn, 'singleDeviceDelayMs',\n    DefaultEngineConfig.singleDeviceDelayMs);\n\n  configOut.startCallback = configIn?.startCallback ?? DefaultEngineConfig.startCallback;\n  configOut.startCallbackContext = configIn?.startCallbackContext\n    ?? DefaultEngineConfig.startCallbackContext;\n\n  configOut.storybookId = resolveStorybookId(configIn);\n  configOut.videoFps = resolveVideoFps(configIn, lib);\n  return (configOut);\n}\n\nexport default SbResolveEngineConfig;\n","function IsEven(value: number): boolean {\n  // eslint-disable-next-line no-bitwise\n  return ((value & 1) === 0);\n}\n\nexport default IsEven;\n","import IsEven from './IsEven';\n\nfunction IsOdd(value: number): boolean {\n  return (!IsEven(value));\n}\n\nexport default IsOdd;\n","import GetBooleanValue from '../../../../../utils/object/GetBooleanValue';\nimport GetNumberValue from '../../../../../utils/object/GetNumberValue';\n\ntype SbHiliteIncorrectConfig = {\n  /** @default 8 */\n  numShakes?: number;\n\n  /** @default true */\n  shouldUseTicks?: boolean;\n\n  /** @default 2 */\n  tiltIntensityInDegrees?: number;\n\n  /** @default 5 */\n  tremorIntensity?: number;\n\n  /** @default 1 (in ticks, if shouldUseTicks is true), 25 (in ms otherwise) */\n  waitDuration?: number;\n};\n\nfunction ResolveHiliteIncorrectConfig(\n  config?: SbHiliteIncorrectConfig,\n): Required<SbHiliteIncorrectConfig> {\n  const _config = (config ?? {}) as Required<SbHiliteIncorrectConfig>;\n  _config.numShakes = GetNumberValue(_config, 'numShakes', 8);\n  _config.shouldUseTicks = GetBooleanValue(_config, 'shouldUseTicks', true);\n  _config.tiltIntensityInDegrees = GetNumberValue(_config, 'tiltIntensityInDegrees', 2);\n  _config.tremorIntensity = GetNumberValue(_config, 'tremorIntensity', 5);\n  _config.waitDuration = GetNumberValue(_config, 'waitDuration',\n    _config.shouldUseTicks ? 1 : 25);\n  return (_config);\n}\n\nexport {\n  ResolveHiliteIncorrectConfig,\n  SbHiliteIncorrectConfig,\n};\n","import CjsDisplayObject from '../../../../../utils/createjs/objects/display/CjsDisplayObject';\nimport IsOdd from '../../../../../utils/math/IsOdd';\nimport { ResolveHiliteIncorrectConfig, SbHiliteIncorrectConfig } from './SbHiliteIncorrectConfig';\n\nfunction SbHiliteIncorrect(target: createjs.DisplayObject | CjsDisplayObject,\n  config?: SbHiliteIncorrectConfig): void {\n  const display = target instanceof CjsDisplayObject ? target.display : target;\n  const _config = ResolveHiliteIncorrectConfig(config);\n  const tween = createjs.Tween.get(display, {\n    useTicks: _config.shouldUseTicks,\n  });\n\n  const originalTransform = {\n    rotation: display.rotation,\n    x: display.x,\n    y: display.y,\n  };\n\n  for (let index = 0; index < _config.numShakes; index += 1) {\n    if (index > 0) {\n      tween.wait(_config.waitDuration);\n    }\n\n    const flipFactor = IsOdd(index) ? -1 : 1;\n    tween.to({\n      rotation: originalTransform.rotation + (_config.tiltIntensityInDegrees * flipFactor),\n      x: originalTransform.x + Math.random() * (_config.tremorIntensity * flipFactor),\n      y: originalTransform.y + Math.random() * (_config.tremorIntensity * flipFactor),\n    });\n  }\n\n  tween\n    .wait(_config.waitDuration)\n    .to({\n      rotation: originalTransform.rotation,\n      x: originalTransform.x,\n      y: originalTransform.y,\n    });\n}\n\nexport default SbHiliteIncorrect;\n","import { SbHiliteIncorrectConfig } from './utils/SbHiliteIncorrectConfig';\nimport SbButtonsMenuButtonCallback from './SbButtonsMenuButtonCallback';\n\ntype SbButtonsMenuButtonConfig = {\n  callback?: SbButtonsMenuButtonCallback;\n  callbackContext?: unknown;\n  incorrectConfig?: SbHiliteIncorrectConfig;\n  isCorrect?: boolean | string;\n  isDisabled?: boolean;\n  isHidden?: boolean;\n};\n\nfunction SbResolveButtonsMenuButtonConfig(\n  buttonConfig: SbButtonsMenuButtonConfig | undefined,\n): SbButtonsMenuButtonConfig {\n  const sourceButtonConfig: SbButtonsMenuButtonConfig = buttonConfig\n    ?? {} as SbButtonsMenuButtonConfig;\n\n  const config = {\n    callback: sourceButtonConfig.callback,\n    callbackContext: sourceButtonConfig.callbackContext,\n    incorrectConfig: sourceButtonConfig.incorrectConfig,\n    isCorrect: sourceButtonConfig.isCorrect,\n    isDisabled: sourceButtonConfig.isDisabled,\n    isHidden: sourceButtonConfig.isHidden,\n  };\n\n  return (config);\n}\n\nexport {\n  SbButtonsMenuButtonConfig,\n  SbResolveButtonsMenuButtonConfig,\n};\n","const SbButtonsMenuEvents = {\n  /**\n   * Dispatched when a button is selected from a button menu.\n   *\n   * ```\n   * function onButtonMenuOptionSelected (buttonName: string, isCorrect: boolean,\n   * menu: SbButtonsMenu): void;\n   * ```\n   */\n  OPTION_SELECTED: 'optionSelected',\n} as const;\n\nexport default SbButtonsMenuEvents;\n","import EventEmitter from 'eventemitter3';\nimport CjsGetButton from '../../../utils/createjs/objects/CjsGetButton';\nimport CjsButton from '../../../utils/createjs/objects/buttons/CjsButton';\nimport ICjsBaseButton from '../../../utils/createjs/objects/buttons/ICjsBaseButton';\nimport IsPlainObject from '../../../utils/object/IsPlainObject';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport { SbButtonsMenuConfig } from './config/SbButtonsMenuConfig';\nimport SbButtonsMenuButtonConfigsByName from './config/SbButtonsMenuButtonConfigsByName';\nimport SbHiliteIncorrect from './config/utils/SbHiliteIncorrect';\nimport { SbButtonsMenuButtonConfig, SbResolveButtonsMenuButtonConfig } from './config/SbButtonsMenuButtonConfig';\nimport SbInputDeviceHandler from '../inputDeviceHandler/SbInputDeviceHandler';\nimport SbInputDeviceHandlerEvents from '../inputDeviceHandler/SbInputDeviceHandlerEvents';\nimport SbQuizData from '../../data/userPerformance/SbQuizData';\nimport SbButtonsMenuEvents from './events/SbButtonsMenuEvents';\n\ntype ResolvedConfigs = {\n  buttonConfigsByName: SbButtonsMenuButtonConfigsByName;\n  thisConfig: SbButtonsMenuConfig;\n};\n\nexport default class SbButtonsMenu extends EventEmitter {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  quizData: SbQuizData | undefined;\n\n  private readonly buttonsByConfig: Map<SbButtonsMenuButtonConfig, CjsButton>;\n\n  private readonly buttonsOrder: CjsButton[];\n\n  private readonly engine: IStorybookEngine;\n\n  private readonly inputDeviceHandler: SbInputDeviceHandler;\n\n  private selectedButtonIndex: number;\n\n  private config: SbButtonsMenuConfig | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    super();\n\n    this.engine = engine;\n    this.buttonsByConfig = new Map();\n    this.buttonsOrder = [];\n    this.inputDeviceHandler = this.initInputDeviceHandler();\n    this.selectedButtonIndex = -1;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    super.removeAllListeners();\n    this.uninitResources();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private resolveConfigs(sourceConfig: SbButtonsMenuConfig): ResolvedConfigs {\n    const buttonConfigsByName: SbButtonsMenuButtonConfigsByName = sourceConfig.buttons ?? {};\n    const thisConfig: SbButtonsMenuConfig = {\n      buttons: buttonConfigsByName,\n      buttonsContainer: sourceConfig.buttonsContainer,\n      correctSoundKey: sourceConfig.correctSoundKey,\n      defaultButtonName: sourceConfig.defaultButtonName,\n      incorrectSoundKey: sourceConfig.incorrectSoundKey,\n      isQuiz: sourceConfig.isQuiz,\n      shouldCloseMenu: sourceConfig.shouldCloseMenu ?? true,\n    };\n\n    this.config = thisConfig;\n    return ({\n      buttonConfigsByName,\n      thisConfig,\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(config: SbButtonsMenuConfig): this {\n    const resolvedConfigs = this.resolveConfigs(config);\n    this.initButtonsFromConfigs(resolvedConfigs);\n\n    this.inputDeviceHandler.isEnabled = this.inputDeviceHandler.isSingleSwitchEnabled()\n      || this.inputDeviceHandler.isDualSwitchEnabled();\n\n    this.initDefaultSelectedButton(resolvedConfigs.thisConfig);\n\n    this.quizData = resolvedConfigs.thisConfig.isQuiz\n      ? {\n        numAttempts: 0,\n        totalSelection: SbButtonsMenu.GetNumQuizbuttons(resolvedConfigs),\n        percentageCorrect: 0,\n      }\n      : undefined;\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static GetNumQuizbuttons(config: Readonly<ResolvedConfigs>): number {\n    const buttonConfigs = Object.values(config.buttonConfigsByName);\n    return (buttonConfigs.filter((buttonConfig) => {\n      if (!buttonConfig) {\n        return (false);\n      }\n\n      return (buttonConfig.isCorrect !== undefined);\n    }).length);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): void {\n    this.inputDeviceHandler\n      .setEnabled(this.inputDeviceHandler.isSingleSwitchEnabled()\n        || this.inputDeviceHandler.isDualSwitchEnabled())\n      .updateFromSettings();\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private confirmSelectedButton(): void {\n    const { selectedButton } = this;\n    if (selectedButton) {\n      this.onButtonPressed(selectedButton);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private disposeButtons(): void {\n    this.buttonsByConfig.forEach((button) => {\n      button.dispose();\n    });\n\n    this.buttonsByConfig.clear();\n    this.buttonsOrder.length = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private getDefaultSelectedButtonIndex(thisConfig: SbButtonsMenuConfig): number {\n    let index: number;\n    const name = thisConfig.defaultButtonName;\n    if (thisConfig.defaultButtonName) {\n      index = this.buttonsOrder.findIndex((button) => button.name === name);\n      if (index === -1) {\n        console.warn(`no default menu button found with name: ${name}`);\n      }\n    } else {\n      index = 0;\n    }\n\n    return (index);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static HandleButtonCallback(button: CjsButton,\n    buttonConfig: SbButtonsMenuButtonConfig): void {\n    if (buttonConfig.callback !== undefined) {\n      buttonConfig.callback.call(buttonConfig.callbackContext, button.name);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private handleIfCorrectButton(button: CjsButton,\n    buttonConfig: SbButtonsMenuButtonConfig): boolean {\n    if (buttonConfig.isCorrect !== true) {\n      return (false);\n    }\n\n    this.playSound(this.config?.correctSoundKey);\n\n    this.updateQuizPerformance(buttonConfig.isCorrect);\n    this.emit(SbButtonsMenuEvents.OPTION_SELECTED, button.name, buttonConfig.isCorrect, this);\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private handleIfIncorrectButton(button: CjsButton,\n    buttonConfig: SbButtonsMenuButtonConfig): boolean {\n    if (buttonConfig.isCorrect !== false) {\n      return (false);\n    }\n\n    this.playSound(this.config?.incorrectSoundKey);\n    SbHiliteIncorrect(button, buttonConfig.incorrectConfig);\n\n    this.updateQuizPerformance(buttonConfig.isCorrect);\n    this.emit(SbButtonsMenuEvents.OPTION_SELECTED, button.name, buttonConfig.isCorrect, this);\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initButtonsFromConfigs(resolvedConfigs: ResolvedConfigs): void {\n    const displayContainer = resolvedConfigs.thisConfig.buttonsContainer\n      || this.engine.exportRoot.display;\n\n    const buttonsConfig = resolvedConfigs.buttonConfigsByName ?? {};\n    const buttonNames = Object.keys(buttonsConfig);\n    buttonNames.forEach((buttonName) => {\n      const button = CjsGetButton(displayContainer, buttonName, this.onButtonPressed,\n        undefined, this);\n\n      if (button) {\n        const buttonConfig = SbResolveButtonsMenuButtonConfig(buttonsConfig[buttonName]);\n        buttonsConfig[buttonName] = buttonConfig;\n\n        this.buttonsByConfig.set(buttonConfig, button);\n        this.buttonsOrder.push(button);\n        button.enabled = !(buttonConfig.isDisabled === true);\n        button.visible = !(buttonConfig.isHidden === true);\n      } else {\n        console.warn('no menu button found with name:', buttonName, 'on container:',\n          displayContainer);\n\n        if (displayContainer instanceof createjs.MovieClip) {\n          console.warn('affected frame:', displayContainer.currentFrame);\n        }\n      }\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initDefaultSelectedButton(thisConfig: SbButtonsMenuConfig): void {\n    if (this.inputDeviceHandler.isEnabled) {\n      const defaultButtonIndex = this.getDefaultSelectedButtonIndex(thisConfig);\n      this.selectButtonAt(defaultButtonIndex);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initInputDeviceHandler(): SbInputDeviceHandler {\n    return (new SbInputDeviceHandler(this.engine)\n      .on(SbInputDeviceHandlerEvents.NEXT, this.onInputDeviceNext, this)\n      .on(SbInputDeviceHandlerEvents.SELECT, this.onInputDeviceSelect, this));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonPressed(baseButton: ICjsBaseButton): void {\n    const button = baseButton as CjsButton;\n    const buttonConfig = this.config?.buttons ? this.config.buttons[button.name] : undefined;\n    if (!IsPlainObject(buttonConfig)) {\n      console.warn('no menu button config found for menu button with name:', button.name);\n      return;\n    }\n\n    if (this.handleIfIncorrectButton(button, buttonConfig)) {\n      SbButtonsMenu.HandleButtonCallback(button, buttonConfig);\n      return;\n    }\n\n    this.handleIfCorrectButton(button, buttonConfig);\n\n    if (this.config?.shouldCloseMenu) {\n      this.engine.unpresentMenu();\n    }\n\n    SbButtonsMenu.HandleButtonCallback(button, buttonConfig);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onInputDeviceNext(): void {\n    this.selectNextButton();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onInputDeviceSelect(): void {\n    this.confirmSelectedButton();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private playSound(soundKey: string | undefined): void {\n    if (soundKey) {\n      this.engine.playSound(soundKey);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private selectButtonAt(index: number): void {\n    const currentSelectedButton = this.selectedButton;\n    const newSelectedButton = this.buttonsOrder[index];\n    if (currentSelectedButton === newSelectedButton) {\n      return;\n    }\n\n    this.selectedButtonIndex = index;\n    currentSelectedButton?.setSelected(false);\n    newSelectedButton?.setSelected(true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private get selectedButton(): CjsButton | undefined {\n    return (this.buttonsOrder[this.selectedButtonIndex]);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private selectNextButton(): void {\n    if (this.buttonsOrder.length > 0) {\n      this.selectButtonAt((this.selectedButtonIndex + 1) % this.buttonsOrder.length);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private uninitResources(): void {\n    this.inputDeviceHandler.dispose();\n    this.disposeButtons();\n    this.config = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateQuizPerformance(isCorrect: boolean): void {\n    if (!this.quizData) {\n      return;\n    }\n\n    this.quizData.numAttempts += 1;\n\n    if (isCorrect) {\n      this.quizData.percentageCorrect = 1 / this.quizData.numAttempts;\n    }\n  }\n}\n","import IsPlainObject from '../../../../utils/object/IsPlainObject';\nimport { SbPresentNavConfig } from './SbPresentNavConfig';\n\nfunction SbIsPresentNavConfig(data: unknown): data is SbPresentNavConfig {\n  return (IsPlainObject(data)\n    && ('defaultSelectedNavButtonId' in data\n      || 'navButtonsToHide' in data\n      || 'params' in data));\n}\n\nexport default SbIsPresentNavConfig;\n","import IncludesIs from '../../../../utils/collections/arrays/IncludesIs';\nimport IsPlainObject from '../../../../utils/object/IsPlainObject';\nimport SbDefaults from '../../../data/defaults/SbDefaults';\nimport { SbNavToDirection, SbNavToDirectionsArray } from './SbNavToDirections';\nimport SbNavToParams from './SbNavToParams';\nimport SbIsPresentNavConfig from './SbIsPresentNavConfig';\n\ntype SbPresentNavConfig = {\n  defaultSelectedNavButtonId?: SbNavToDirection;\n  navButtonsToHide?: SbNavToDirection[];\n  params?: SbNavToParams;\n};\n\n// ------------------------------------------------------------------------------------------------\nfunction isNavToParams(data: unknown): data is SbNavToParams {\n  return (IsPlainObject(data)\n    && Object.keys(data).every((key) => IncludesIs(key, SbNavToDirectionsArray)));\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbResolvePresentNavConfig(config: unknown): SbPresentNavConfig {\n  let out: SbPresentNavConfig;\n\n  if (SbIsPresentNavConfig(config)) {\n    out = config;\n  } else if (isNavToParams(config)) {\n    out = {\n      params: config,\n    };\n  } else {\n    out = {};\n  }\n\n  out.defaultSelectedNavButtonId ??= SbDefaults.SelectedNavButtonId;\n  return (out);\n}\n\nexport {\n  SbPresentNavConfig,\n  SbResolvePresentNavConfig,\n};\n","interface ISbDebugData {\n  ShouldSkipIntro?: boolean;\n  StartLabel?: number | string;\n}\n\nconst SbDebugData: Readonly<ISbDebugData> = {\n  // ShouldSkipIntro: true,\n};\n\nexport default SbDebugData;\n","function removeExtension(filename: string): string {\n  const lastDotIndex = filename.lastIndexOf('.');\n  return (lastDotIndex === -1 ? filename : filename.substring(0, lastDotIndex));\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction getLastPath(filename: string): string {\n  const lastDotIndex = filename.lastIndexOf('/');\n  return (lastDotIndex === -1 ? filename : filename.substring(lastDotIndex + 1));\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction validateResourceName(name: string): string {\n  // Remove invalid characters from the name\n  let validName = removeExtension(name);\n  validName = getLastPath(validName);\n  validName = validName.replace(/[^a-zA-Z0-9_]/g, '');\n\n  if (/^\\d/.test(validName)) {\n    // Prepend with underscore if starts with a number\n    validName = `_${validName}`;\n  }\n\n  return (validName);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction ValidateResourceNames<T extends string | string[]>(names: T): T {\n  if (typeof (names) === 'string') {\n    return (validateResourceName(names) as T);\n  }\n\n  const out: string[] = [];\n  names.forEach((name) => {\n    out.push(validateResourceName(name));\n  });\n\n  return (out as T);\n}\n\nexport default ValidateResourceNames;\n","import ValidateResourceNames from '../../utils/adobeAnimate/ValidateResourceName';\nimport { CjsEvents } from '../../utils/createjs/events/CjsEvents';\nimport CjsEventsHandler from '../../utils/createjs/events/CjsEventsHandler';\nimport SbPlaySoundCompleteCallback from './SbPlaySoundCompleteCallback';\nimport SbPlaySoundConfig from './SbPlaySoundConfig';\n\nfunction resolveLoopParam(loop: number | boolean | undefined): number {\n  switch (typeof (loop)) {\n    case 'boolean':\n      return (loop ? -1 : 0);\n\n    case 'number':\n      return (loop);\n\n    default:\n      return (0);\n  }\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbPlaySound(config: SbPlaySoundConfig): createjs.AbstractSoundInstance | undefined;\nfunction SbPlaySound(\n  audioId: string,\n  volume?: number,\n  loop?: boolean | number,\n  completeCallback?: SbPlaySoundCompleteCallback,\n  callbackContext?: unknown,\n): createjs.AbstractSoundInstance | undefined;\n\nfunction SbPlaySound(\n  audioIdOrConfig: string | SbPlaySoundConfig,\n  volume: number | undefined = 1.0,\n  loop: boolean | number | undefined = false,\n  completeCallback: SbPlaySoundCompleteCallback | undefined = undefined,\n  callbackContext: unknown = undefined,\n): createjs.AbstractSoundInstance | undefined {\n  let config: SbPlaySoundConfig;\n  if (typeof (audioIdOrConfig) === 'string') {\n    config = {\n      audioId: audioIdOrConfig,\n      callbackContext,\n      completeCallback,\n      loop,\n      volume,\n    };\n  } else {\n    config = audioIdOrConfig;\n  }\n\n  const resolvedAudioId = ValidateResourceNames(config.audioId);\n  const soundInstance = createjs.Sound.play(resolvedAudioId);\n\n  if (soundInstance.playState === createjs.Sound.PLAY_FAILED) {\n    console.warn(`failed to play sound: ${config.audioId}. resolved audio id: ${resolvedAudioId}`);\n    soundInstance.destroy();\n    return (undefined);\n  }\n\n  if (config.completeCallback) {\n    const eventsHandler = new CjsEventsHandler(soundInstance);\n    eventsHandler.once(CjsEvents.COMPLETE, config.completeCallback, config.callbackContext);\n  }\n\n  soundInstance.loop = resolveLoopParam(config.loop);\n  soundInstance.volume = config.volume ?? 1.0;\n  return (soundInstance);\n}\n\nexport default SbPlaySound;\n","import { CjsEvents } from '../../utils/createjs/events/CjsEvents';\nimport SbPlaySound from '../audio/SbPlaySound';\n\ntype ResolveCallback = (value: void | PromiseLike<void>) => void;\n\ntype StateData = {\n  currentIndex: number;\n  resolve: ResolveCallback;\n  soundIds: string[];\n  volume?: number;\n};\n\nfunction playNextVoice(stateData: StateData): void {\n  if (stateData.currentIndex >= stateData.soundIds.length) {\n    stateData.resolve();\n    return;\n  }\n\n  const soundId = stateData.soundIds[stateData.currentIndex];\n  if (!soundId) {\n    stateData.currentIndex += 1;\n    playNextVoice(stateData);\n    return;\n  }\n\n  const sound = SbPlaySound(soundId, stateData.volume);\n  if (!sound) {\n    stateData.currentIndex += 1;\n    playNextVoice(stateData);\n    return;\n  }\n\n  sound.on(CjsEvents.COMPLETE, () => {\n    stateData.currentIndex += 1;\n    playNextVoice(stateData);\n  }, undefined, true);\n\n  sound.on(CjsEvents.ERROR, () => {\n    console.warn('failed to play sound:', sound);\n    stateData.currentIndex += 1;\n    playNextVoice(stateData);\n  });\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction SbPlayVoice(soundIds: string | string[], volume?: number): Promise<void> {\n  return (new Promise<void>((resolve) => {\n    const stateData: StateData = {\n      currentIndex: 0,\n      resolve,\n      soundIds: Array.isArray(soundIds) ? [...soundIds] : [soundIds],\n      volume,\n    };\n\n    playNextVoice(stateData);\n  }));\n}\n\nexport default SbPlayVoice;\n","import IsValidNumber from './IsValidNumber';\n\nfunction IsValidPositiveZeroNumber(value: unknown): value is number {\n  return (IsValidNumber(value) && value >= 0);\n}\n\nexport default IsValidPositiveZeroNumber;\n","function CjsIsContainer(item: unknown): item is createjs.Container {\n  return (item instanceof createjs.Container);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction CjsIsDisplayObject(item: unknown): item is createjs.DisplayObject {\n  return (item instanceof createjs.DisplayObject);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction CjsIsMovieCip(item: unknown): item is createjs.MovieClip {\n  return (item instanceof createjs.MovieClip);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction CjsIsSprite(item: unknown): item is createjs.Sprite {\n  return (item instanceof createjs.Sprite);\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction CjsIsPlayable(item: unknown): item is createjs.Sprite | createjs.MovieClip {\n  return (CjsIsMovieCip(item) || CjsIsSprite(item));\n}\n\nexport {\n  CjsIsContainer,\n  CjsIsDisplayObject,\n  CjsIsMovieCip,\n  CjsIsPlayable,\n  CjsIsSprite,\n};\n","import IsValidNumber from './IsValidNumber';\n\nfunction IsValidPositiveNumber(value: unknown): value is number {\n  return (IsValidNumber(value) && value > 0);\n}\n\nexport default IsValidPositiveNumber;\n","import { CjsIsMovieCip } from '../../../utils/createjs/objects/ObjectUtils';\nimport IsValidPositiveNumber from '../../../utils/number/IsValidPositiveNumber';\nimport Timer from '../../../utils/timers/Timer';\n\nexport default class SbPressIndicator {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly indicator: createjs.DisplayObject;\n\n  private timer: Timer | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(indicator: createjs.DisplayObject, delayInSecs?: number) {\n    this.indicator = indicator;\n\n    if (IsValidPositiveNumber(delayInSecs)) {\n      this.start(delayInSecs);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(delayMs: number): this {\n    this.hide();\n    this.startTimer(delayMs);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(): this {\n    this.hide();\n    this.stopTimer();\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private hide(): void {\n    this.indicator.visible = false;\n    if (CjsIsMovieCip(this.indicator)) {\n      this.indicator.stop();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private show(): void {\n    this.indicator.visible = true;\n    if (CjsIsMovieCip(this.indicator)) {\n      this.indicator.gotoAndPlay(0);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private startTimer(delayMs: number): void {\n    this.stopTimer();\n    this.timer = Timer.Create({\n      callback: () => {\n        this.show();\n      },\n\n      delayMs,\n    });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private stopTimer(): void {\n    this.timer?.stop();\n    this.timer = undefined;\n  }\n}\n","import { CjsEvents } from '../../../utils/createjs/events/CjsEvents';\nimport CjsGetDisplayObject from '../../../utils/createjs/objects/CjsGetDisplayObject';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport { SbInputDevices } from '../../data/SbInputDevices';\nimport SbPressIndicator from './SbPressIndicator';\n\nexport default class SbPressIndicatorManager {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  static readonly DEFAULT_NAME = 'pressIndicatorDisplay';\n\n  readonly engine: IStorybookEngine;\n\n  private indicator: SbPressIndicator | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    this.engine = engine;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(\n    delayMs: number | undefined = undefined,\n    container: createjs.Container | undefined = undefined,\n    indicatorDisplayName = SbPressIndicatorManager.DEFAULT_NAME,\n  ): void {\n    const indicator = CjsGetDisplayObject(container ?? this.engine.exportRoot.display,\n      indicatorDisplayName);\n\n    if (!indicator) {\n      console.warn(`no display object found with name: ${indicatorDisplayName}`);\n      return;\n    }\n\n    this.indicator = new SbPressIndicator(indicator);\n\n    if (this.engine.userSettingsData.device.inputDevice !== SbInputDevices.TapMouse) {\n      this.indicator.stop();\n      return;\n    }\n\n    this.indicator.start(delayMs ?? this.engine.config.pressIndicatorDelay);\n\n    this.engine.exportRoot.display.on(CjsEvents.MOUSE_DOWN, () => {\n      if (this.indicator) {\n        this.indicator.stop();\n        this.indicator = undefined;\n      }\n    }, this, true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(): void {\n    this.indicator?.stop();\n    this.indicator = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateBgmFromSettings(): void {\n    if (this.engine.userSettingsData.device.inputDevice !== SbInputDevices.TapMouse) {\n      this.stop();\n    }\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n}\n","import IStorybookEngine from '../../IStorybookEngine';\nimport SbUserSettings from '../../data/settings/SbUserSettings';\nimport SbMessagePanel from '../../ui/messagePanel/SbMessagePanel';\nimport SbMessagePanelEvents from '../../ui/messagePanel/SbMessagePanelEvents';\nimport SbMessagePanelSingleton from '../../ui/messagePanel/SbMessagePanelSingleton';\nimport SbSaveSettingsConfig from './SbSaveSettingsConfig';\n\nasync function createResultMessagePanel(engine: IStorybookEngine, message: string,\n  shouldAutoCloseSettingsPanel: boolean): Promise<void> {\n  return (new Promise<void>((resolve) => {\n    SbMessagePanel.Create(engine.exportRoot.stage, message,\n      engine.lib.animateClasses.MessagePanelCloseDisplay, {\n        autoClose: true,\n      });\n\n    if (shouldAutoCloseSettingsPanel) {\n      SbMessagePanelSingleton.Get()?.once(SbMessagePanelEvents.CLOSE, () => {\n        resolve();\n      });\n    } else {\n      resolve();\n    }\n  }));\n}\n\n// ------------------------------------------------------------------------------------------------\nasync function SbSaveSettings(engine: IStorybookEngine, userSettings: SbUserSettings,\n  config?: SbSaveSettingsConfig): Promise<boolean> {\n  return (new Promise<boolean>((resolve) => {\n    let resultMessage: string | undefined;\n    let shouldAutoCloseSettingsPanel = false;\n    const saveOk = userSettings.writeToLocalStorage();\n\n    if (saveOk) {\n      resultMessage = config?.successMessage;\n      shouldAutoCloseSettingsPanel = true;\n    } else {\n      console.warn('unable to write settings to local storage');\n      resultMessage = config?.failMessage;\n    }\n\n    if (resultMessage) {\n      (async (): Promise<void> => {\n        await createResultMessagePanel(engine, resultMessage, shouldAutoCloseSettingsPanel);\n        resolve(saveOk);\n      })();\n\n      return;\n    }\n\n    resolve(saveOk);\n  }));\n}\n\nexport default SbSaveSettings;\n","import SbSaveSettingsConfig from '../utils/saveSettings/SbSaveSettingsConfig';\n\nfunction SbSaveSettingsCommonConfig(): SbSaveSettingsConfig {\n  return ({\n    failMessage: 'Unable to update settings.',\n    successMessage: 'Settings have been updated!',\n  });\n}\n\nexport default SbSaveSettingsCommonConfig;\n","import IStorybookEngine from '../../IStorybookEngine';\nimport SbSaveSettingsCommonConfig from '../../data/SbSaveSettingsCommonConfig';\nimport SbUiComponent from '../SbUiComponent';\nimport SbSettingsDevicesSubPanel from '../settings/subPanels/devices/SbSettingsDevicesSubPanel';\n\nexport default class SbDevicesPanel extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private subPanel: SbSettingsDevicesSubPanel;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super(container, engine);\n\n    this.subPanel = new SbSettingsDevicesSubPanel(this, engine.lib);\n    this.subPanel.setSettings(engine.userSettingsData.device);\n    this.subPanel.updateFromSettings();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(): this {\n    this.visible = true;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresent(): this {\n    this.visible = false;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected override async onClosePressed(): Promise<void> {\n    if (this.subPanel.areSettingsDirty) {\n      await this.engine.saveSettings(SbSaveSettingsCommonConfig());\n    }\n\n    super.onClosePressed();\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n}\n","import Timer from './Timer';\n\nexport default function Wait(delayMs: number): Promise<void> {\n  return (new Promise<void>((resolve) => {\n    Timer.Create({\n      delayMs,\n      callback: () => {\n        resolve();\n      },\n    });\n  }));\n}\n","import Wait from '../../../utils/timers/Wait';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport SbDesignData from '../../data/SbDesignData';\nimport SbScene from '../../storybookScene/SbScene';\nimport SbUiComponent from '../SbUiComponent';\nimport SbUiComponentEvents from '../events/SbUiComponentEvents';\n\nconst FrameLabels = {\n  PlayIntroSound: 'play_intro_sound',\n};\n\nexport default class SbTiggieIntro extends SbUiComponent {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  private readonly scene: SbScene;\n\n  private isSoundResolved: boolean;\n\n  private isSceneResolved: boolean;\n\n  private soundInstance: createjs.AbstractSoundInstance | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(container: createjs.MovieClip, engine: IStorybookEngine) {\n    super(container, engine);\n\n    this.scene = new SbScene(engine, container);\n    this.scene.addFrameCallback(FrameLabels.PlayIntroSound, this.onPlayIntroSound, this);\n    this.scene.addFrameCallback(this.scene.totalFrames - 1, this.onComplete, this);\n    this.isSceneResolved = false;\n    this.isSoundResolved = false;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  override dispose(): void {\n    this.stopSound();\n    this.isSceneResolved = false;\n    this.isSoundResolved = false;\n    this.scene.dispose();\n    super.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  present(): this {\n    this.stopSound();\n    this.isSceneResolved = false;\n    this.isSoundResolved = false;\n    this.scene.playTo(this.scene.totalFrames - 1, 0);\n    this.visible = true;\n    return (this);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private async continueIfAllAreResolved(): Promise<void> {\n    if (this.isSceneResolved && this.isSoundResolved) {\n      await Wait(SbDesignData.IntroCompleteWaitDelayMs);\n      this.emit(SbUiComponentEvents.CLOSE, this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onPlayIntroSound(): void {\n    this.soundInstance = this.engine.playSound({\n      audioId: this.engine.lib.audioIds.Logo,\n      completeCallback: () => {\n        this.resolveSound();\n      },\n    });\n\n    if (!this.soundInstance) {\n      this.resolveSound();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onComplete(): void {\n    this.resolveScene();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private resolveScene(): void {\n    this.isSceneResolved = true;\n    this.continueIfAllAreResolved();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private resolveSound(): void {\n    this.isSoundResolved = true;\n    this.continueIfAllAreResolved();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private stopSound(): void {\n    this.soundInstance?.destroy();\n    this.soundInstance = undefined;\n  }\n}\n","import Cookies from 'js-cookie';\nimport CloneArray from '../../../utils/collections/arrays/CloneArray';\nimport CloneObject from '../../../utils/object/CloneObject';\nimport IStorybookEngine from '../../IStorybookEngine';\nimport SbQuizData from './SbQuizData';\n\nexport default class SbUserPerformanceData {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  private readonly _quizzes: SbQuizData[];\n\n  private sessionStartTime: number;\n\n  private sessionDurationMs: number;\n\n  private sbCookies: Cookies.CookiesStatic | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    this.engine = engine;\n    this._quizzes = [];\n    this.sessionStartTime = 0;\n    this.sessionDurationMs = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  addQuizData(data: Readonly<SbQuizData>): void {\n    this._quizzes.push(CloneObject(data));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get quizzes(): SbQuizData[] {\n    return (CloneArray(this._quizzes));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  removeAllQuizzes(): void {\n    this._quizzes.length = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  start(): void {\n    this.sessionStartTime = Date.now();\n    this.sessionDurationMs = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stop(): void {\n    if (this.sessionStartTime === 0) {\n      return;\n    }\n\n    const stopTime = Date.now();\n    this.sessionDurationMs = Math.max(0, stopTime - this.sessionStartTime);\n    this.sessionStartTime = 0;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  submit(): void {\n    this.stop();\n\n    if (this.sessionDurationMs === 0) {\n      console.warn('no session is currently being recorded. first start a session with the start method');\n      return;\n    }\n\n    if (!this.sbCookies) {\n      this.sbCookies = (Cookies.noConflict ? Cookies.noConflict() : Cookies).withConverter({\n        read: (value) => value,\n        write: (value) => value.replace(/%25/g, '%'),\n      });\n    }\n\n    const totalTimeMin = this.calculateTotalTimeMin();\n    this.sbCookies.set('Totaltime', totalTimeMin.toString(10));\n\n    const totalSelection = this.calculateTotalSelection();\n    this.sbCookies.set('TotalSelection', totalSelection.toString(10));\n\n    const percentageCorrect = this.calculatePercentageCorrect();\n    this.sbCookies.set('Percentage_correct',\n      SbUserPerformanceData.FormatPercentage(percentageCorrect));\n\n    console.info('total time (mins):', totalTimeMin);\n    console.info('total selectionm:', totalSelection);\n    console.info('average percentage correct:', percentageCorrect);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private calculatePercentageCorrect(): number {\n    if (this._quizzes.length === 0) {\n      return (0);\n    }\n\n    const percentagesSum = this._quizzes.reduce(\n      (currentPercentagesSum, quiz) => currentPercentagesSum + quiz.percentageCorrect, 0,\n    );\n\n    const percentagesAverage = percentagesSum / this._quizzes.length;\n    return (percentagesAverage);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private calculateTotalSelection(): number {\n    return (this._quizzes.reduce(\n      (currentTotalSelection, quiz) => currentTotalSelection + quiz.totalSelection, 0,\n    ));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private calculateTotalTimeMin(): number {\n    const durationInSecs = this.sessionDurationMs / 1000;\n    const durationInMins = durationInSecs / 60;\n    return (durationInMins);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private static FormatPercentage(value: number): string {\n    const percentage = (value * 100).toFixed(2);\n    return (`${percentage}%`);\n  }\n}\n","function CjsDestroySound(sound: createjs.AbstractSoundInstance | undefined): undefined {\n  if (sound) {\n    sound.destroy();\n  }\n\n  return (undefined);\n}\n\nexport default CjsDestroySound;\n","import EventEmitter from 'eventemitter3';\nimport Cookies from 'js-cookie';\nimport IMovieClipDisplayCtor from '../utils/adobeAnimate/IMovieClipDisplayCtor';\nimport { CjsEvents } from '../utils/createjs/events/CjsEvents';\nimport CjsGetMovieClip from '../utils/createjs/objects/CjsGetMovieClip';\nimport CjsGetMovieClipLabels from '../utils/createjs/utils/CjsGetMovieClipLabels';\nimport CloneObject from '../utils/object/CloneObject';\nimport RecursiveReadonly from '../utils/object/RecursiveReadonly';\nimport IStorybookEngine from './IStorybookEngine';\nimport {\n  ISbAnCompLib,\n  SbAssetLib,\n  SbAudioIds,\n  SbFrameLabels,\n} from './data/SbAssetLib';\n\nimport SbDesignData from './data/SbDesignData';\nimport SbUserSettings from './data/settings/SbUserSettings';\nimport SbContextLayers from './ui/content/SbContextLayers';\nimport SbUiComponentEvents from './ui/events/SbUiComponentEvents';\nimport SbMainPanel from './ui/main/SbMainPanel';\nimport SbMainPanelEvents from './ui/main/SbMainPanelEvents';\nimport SbMessagePanel from './ui/messagePanel/SbMessagePanel';\nimport { SbMessagePanelButtonId, SbMessagePanelButtonIds } from './ui/messagePanel/SbMessagePanelButtonIds';\nimport SbPasscodePanel from './ui/passcode/SbPasscodePanel';\nimport SbPasscodePanelEvents from './ui/passcode/SbPasscodePanelEvents';\nimport SbSettingsPanel from './ui/settings/SbSettingsPanel';\nimport SbSettingsPanelEvents from './ui/settings/events/SbSettingsPanelEvents';\nimport { SbNavToDirection, SbNavToDirections } from './ui/main/nav/SbNavToDirections';\nimport CjsGetContainer from '../utils/createjs/objects/CjsGetContainer';\nimport SbContentHandler from './utils/SbContentHandler';\nimport SbNavToParams from './ui/main/nav/SbNavToParams';\nimport { SbPauseKinds } from './ui/content/SbPauseConfig';\nimport SbDefaults from './data/defaults/SbDefaults';\nimport SbDocPrepUtil from './utils/docPrep/SbDocPrepUtil';\nimport SbUserStorybookState from './data/settings/userStorybookStates/SbUserStorybookState';\nimport SbUserSettingsData from './data/settings/SbUserSettingsData';\nimport GetWindowQueryParamValue from '../utils/web/window/GetWindowQueryParamValue';\nimport { SbQueryParams } from './data/SbQueryParams';\nimport SbRawMessagePanelConfig from './ui/messagePanel/configs/SbMessagePanelConfig';\nimport SbEngineConfig from './config/engine/SbEngineConfig';\nimport SbResolveEngineConfig from './config/engine/utils/SbResolveEngineConfig';\nimport { SbButtonsMenuConfig } from './ui/buttonsMenu/config/SbButtonsMenuConfig';\nimport SbButtonsMenu from './ui/buttonsMenu/SbButtonsMenu';\nimport { SbPresentNavConfig, SbResolvePresentNavConfig } from './ui/main/nav/SbPresentNavConfig';\nimport SbDebugData from './data/SbDebugData';\nimport SbScene from './storybookScene/SbScene';\nimport SbPlayVoice from './utils/SbPlayVoice';\nimport SbBaseSceneHandler from './storybookScene/utils/SbBaseSceneHandler';\nimport SbPlaySound from './audio/SbPlaySound';\nimport { SbUserAudioSettingsDataKey, SbUserAudioSettingsDataKeys } from './data/settings/audio/SbUserAudioSettingsDataKeys';\nimport IsValidPositiveZeroNumber from '../utils/number/IsValidPositiveZeroNumber';\nimport SbPlaySoundCompleteCallback from './audio/SbPlaySoundCompleteCallback';\nimport SbPlaySoundConfig from './audio/SbPlaySoundConfig';\nimport SbPressIndicatorManager from './ui/pressIndicator/SbPressIndicatorManager';\nimport SbSaveSettings from './utils/saveSettings/SbSaveSettings';\nimport SbSaveSettingsConfig from './utils/saveSettings/SbSaveSettingsConfig';\nimport SbDevicesPanel from './ui/devices/SbDevicesPanel';\nimport SbSaveSettingsCommonConfig from './data/SbSaveSettingsCommonConfig';\nimport SbTiggieIntro from './ui/tiggieIntro/SbTiggieIntro';\nimport SbButtonsMenuEvents from './ui/buttonsMenu/events/SbButtonsMenuEvents';\nimport SbUserPerformanceData from './data/userPerformance/SbUserPerformanceData';\nimport CjsDestroySound from '../utils/createjs/audio/CjsDestroySound';\nimport Wait from '../utils/timers/Wait';\n\nconst DisplayObjectNames = {\n  DevicesPanel: 'devicesPanelDisplay',\n  MainPanel: 'mainPanelDisplay',\n  PasscodePanel: 'passcodePanelDisplay',\n  SettingsPanel: 'settingsPanelDisplay',\n  TiggieIntro: 'tiggieIntroDisplay',\n\n  // TODO\n  // StartButton: 'startButtonDisplay',\n\n  VideoContainer: 'videoContainer',\n} as const;\n\nexport default class StorybookEngine extends EventEmitter implements IStorybookEngine {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly exportRoot: SbScene;\n\n  readonly lib: Readonly<SbAssetLib>;\n\n  readonly contentHandler: SbContentHandler;\n\n  readonly startTimelineFrame: number;\n\n  private readonly userPerformanceData: SbUserPerformanceData;\n\n  private readonly contextLayers: SbContextLayers;\n\n  private readonly userSettings: SbUserSettings;\n\n  private readonly engineConfig: SbEngineConfig;\n\n  private readonly pressIndicatorMgr: SbPressIndicatorManager;\n\n  private mainPanel: SbMainPanel | undefined;\n\n  private passcodePanel: SbPasscodePanel | undefined;\n\n  private settingsPanel: SbSettingsPanel | undefined;\n\n  private devicesPanel: SbDevicesPanel | undefined;\n\n  private buttonsMenu: SbButtonsMenu | undefined;\n\n  private tiggieIntro: SbTiggieIntro | undefined;\n\n  private sceneHandler: SbBaseSceneHandler | undefined;\n\n  private navParams: SbNavToParams | undefined;\n\n  private bgmSoundInstance: createjs.AbstractSoundInstance | undefined;\n\n  private previousSettingsData: SbUserSettingsData | undefined;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(exportRoot: createjs.MovieClip, lib: ISbAnCompLib) {\n    super();\n\n    this.exportRoot = new SbScene(this, exportRoot);\n    this.lib = {\n      animateClasses: lib,\n      audioIds: SbAudioIds,\n      header: lib,\n    };\n\n    this.exportRoot.display.framerate = this.lib.header.properties.fps;\n    this.engineConfig = CloneObject(SbDefaults.EngineConfig);\n\n    // CjsAnPlaySoundInit(this);\n\n    this.userSettings = new SbUserSettings();\n\n    this.startTimelineFrame = this.getStartTimelineFrame();\n    this.contextLayers = new SbContextLayers(this);\n    this.contentHandler = new SbContentHandler(this);\n    this.pressIndicatorMgr = new SbPressIndicatorManager(this);\n    this.userPerformanceData = new SbUserPerformanceData(this);\n\n    this.initMainPanel()\n      .initPasscodePanel()\n      .initSettingsPanel()\n      .initDevicesPanel()\n      .initTiggieIntro();\n\n    createjs.Ticker.on(CjsEvents.TICK, () => {\n      this.exportRoot.stop(SbFrameLabels.SbInit);\n    }, this, true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get config(): Readonly<Required<SbEngineConfig>> {\n    return (this.engineConfig as Required<SbEngineConfig>);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get contentVideoElement(): HTMLVideoElement | undefined {\n    return (this.contentHandler.videoElement);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  createMessagePanel(\n    message: string,\n    messagePanelDisplay: IMovieClipDisplayCtor,\n    config?: SbRawMessagePanelConfig,\n  ): Promise<SbMessagePanelButtonId> {\n    return (SbMessagePanel.Create(this.exportRoot.stage, message, messagePanelDisplay, config));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async deleteProgress(storyBookId?: string): Promise<boolean> {\n    storyBookId ??= this.config.storybookId;\n    if (!storyBookId) {\n      console.warn('no storybook id specified');\n      return (false);\n    }\n\n    const { storybooksStates } = this.userSettings.data;\n    if (!(storyBookId in storybooksStates)) {\n      return (true);\n    }\n\n    delete storybooksStates[storyBookId];\n    if (await this.saveSettings()) {\n      console.info(`progress deleted for storybook id \"${storyBookId}\"`);\n      return (true);\n    }\n\n    return (false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  dispose(): void {\n    super.removeAllListeners();\n\n    this.buttonsMenu?.dispose();\n    this.buttonsMenu = undefined;\n\n    this.contentHandler.dispose();\n\n    this.mainPanel?.dispose();\n    this.mainPanel = undefined;\n\n    this.passcodePanel?.dispose();\n    this.passcodePanel = undefined;\n\n    this.settingsPanel?.dispose();\n    this.settingsPanel = undefined;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  init(config?: SbEngineConfig): this {\n    SbResolveEngineConfig(config, this.lib, this.engineConfig);\n\n    console.info('Storybook engine config: %o', this.engineConfig);\n\n    this.initSceneHandler();\n\n    if (this.engineConfig.storybookId) {\n      this.deleteProgressUsingQueryParam(this.engineConfig.storybookId);\n    }\n\n    // TODO\n    /*\n    const startButton = CjsGetButton(this.exportRoot.display, DisplayObjectNames.StartButton,\n      this.onStartButtonPressed, undefined, this)\n      ?.setVisible(false);\n\n    if (!startButton) {\n      console.warn(`No start button found. One should exist on frame \"${SbFrameLabels.SbInit}\"\n       of the main timeline named \"${DisplayObjectNames.StartButton}\"'.`);\n    }\n\n    if (this.engineConfig.contentVideoUrl) {\n      this.contentHandler.loadContentVideo(this.engineConfig.contentVideoUrl);\n      this.contentHandler.once(SbContentHandlerEvents.VIDEO_LOAD_COMPLETE, () => {\n        startButton?.setVisible(true);\n      });\n    } else {\n      if (this.lib.header.contentVideo) {\n        this.contentHandler.setContentVideo(this.lib.header.contentVideo);\n      }\n\n      startButton?.setVisible(true);\n    }\n    */\n\n    this.presentDevicesPanel();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static LogVersion(): void {\n    const config = [\n      'background: blue',\n      'color: yellow',\n      'display: block',\n    ].join(';');\n\n    console.info(`%cStorybookEngine v: ${SbDesignData.Version}`, config);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playBgm(soundId: string, volume?: number): boolean {\n    if (!soundId) {\n      return (false);\n    }\n\n    this.stopBgm();\n    volume = this.userSettingsData.audio.bgm.isEnabled\n      ? this.resolveSettingsVolume(SbUserAudioSettingsDataKeys.Bgm, volume)\n      : 0;\n\n    this.bgmSoundInstance = SbPlaySound(soundId, volume, true);\n    return (!!this.bgmSoundInstance);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playSound(config: SbPlaySoundConfig): createjs.AbstractSoundInstance | undefined;\n\n  playSound(\n    audioId: string,\n    volume?: number,\n    loop?: boolean | number,\n    completeCallback?: SbPlaySoundCompleteCallback,\n    callbackContext?: unknown,\n  ): createjs.AbstractSoundInstance | undefined;\n\n  playSound(\n    audioIdOrConfig: string | SbPlaySoundConfig,\n    volume: number | undefined = 1.0,\n    loop: boolean | number | undefined = false,\n    completeCallback: SbPlaySoundCompleteCallback | undefined = undefined,\n    callbackContext: unknown = undefined,\n  ): createjs.AbstractSoundInstance | undefined {\n    if (!this.userSettingsData.audio.sound.isEnabled) {\n      return (undefined);\n    }\n\n    const config: SbPlaySoundConfig = typeof (audioIdOrConfig) === 'string'\n      ? {\n        audioId: audioIdOrConfig,\n        callbackContext,\n        completeCallback,\n        loop,\n        volume,\n      }\n\n      : audioIdOrConfig;\n\n    if (!config.audioId) {\n      return (undefined);\n    }\n\n    config.volume = this.resolveSettingsVolume(SbUserAudioSettingsDataKeys.Sound, config.volume);\n    return (SbPlaySound(config));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  playVoice(soundIds: string | string[], volume?: number): Promise<void> {\n    volume = this.resolveSettingsVolume(SbUserAudioSettingsDataKeys.Voice, volume);\n    return (SbPlayVoice(soundIds, volume));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  presentMenu(config?: SbButtonsMenuConfig): this {\n    this.unpresentMenu();\n    this.buttonsMenu = new SbButtonsMenu(this);\n    this.buttonsMenu.on(SbButtonsMenuEvents.OPTION_SELECTED,\n      this.onButtonsMenuOptionPressed, this);\n\n    const configOut = config ?? {} as SbButtonsMenuConfig;\n    if (this.config.buttonsMenu) {\n      configOut.correctSoundKey ??= this.config.buttonsMenu.defaultCorrectSoundKey;\n      configOut.incorrectSoundKey ??= this.config.buttonsMenu.defaultInorrectSoundKey;\n    }\n\n    this.buttonsMenu.start(configOut);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  presentNav(config?: SbPresentNavConfig | SbNavToParams): this {\n    const _config = SbResolvePresentNavConfig(config);\n    this.navParams = _config.params;\n\n    // TODO\n    // this.contentHandler?.pause(SbPauseKinds.IsFromNav);\n\n    this.mainPanel?.presentNavUi(_config);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get progress(): number {\n    return (this.mainPanel?.progressBar?.value ?? 0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  set progress(value: number) {\n    if (this.mainPanel?.progressBar) {\n      this.mainPanel.progressBar.value = value;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  resolveSettingsVolume(key: SbUserAudioSettingsDataKey, volume?: number): number {\n    if (IsValidPositiveZeroNumber(volume)) {\n      return (volume);\n    }\n\n    const settings = this.userSettings.data.audio[key];\n    return (settings?.isEnabled ? settings.volume : 0);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async saveProgress(storyBookId?: string, frameOrLabel?: number | string): Promise<boolean> {\n    storyBookId ??= this.config.storybookId;\n    if (!storyBookId) {\n      console.warn('no storybook id specified');\n      return (false);\n    }\n\n    if (frameOrLabel !== undefined) {\n      if (!this.exportRoot.isFrameValid(frameOrLabel)) {\n        console.warn(`invalid progress frame or label specified: ${frameOrLabel}`);\n        return (false);\n      }\n    } else {\n      frameOrLabel = this.exportRoot.currentFrame;\n    }\n\n    const { storybooksStates } = this.userSettings.data;\n    let state = storybooksStates[storyBookId];\n    if (!state) {\n      state = {} as SbUserStorybookState;\n      storybooksStates[storyBookId] = state;\n    }\n\n    state.progresFrameOrLabel = frameOrLabel;\n    if (await this.saveSettings()) {\n      console.info(`progress saved for storybook id \"${storyBookId}\" @: ${frameOrLabel}`);\n    }\n\n    return (false);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async saveSettings(config?: SbSaveSettingsConfig): Promise<boolean> {\n    return (SbSaveSettings(this, this.userSettings, config));\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  static SbDocPrep(): void {\n    SbDocPrepUtil();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  setBgmVolume(volume: number): this {\n    if (this.bgmSoundInstance) {\n      this.bgmSoundInstance.volume = volume;\n    }\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  startPressIndicator(delayMs?: number, container?: createjs.Container,\n    indicatorDisplayName?: string): this {\n    this.pressIndicatorMgr.start(delayMs, container, indicatorDisplayName);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  startSceneHandler(): this {\n    this.sceneHandler?.run();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  stopBgm(): this {\n    this.bgmSoundInstance = CjsDestroySound(this.bgmSoundInstance);\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  async storybookComplete(exitRedirectDelayMs?: number): Promise<void> {\n    this.submitUserPerformanceData();\n\n    const cookies = Cookies.noConflict ? Cookies.noConflict() : Cookies;\n    const cookieKey = 'gameURL';\n    const redirectUrl = cookies.get(cookieKey);\n    if (!redirectUrl) {\n      console.warn('no redirect url found in cookeis with key:', cookieKey);\n      return;\n    }\n\n    exitRedirectDelayMs ??= SbDesignData.ExitRedirectDelayMs;\n    await Wait(exitRedirectDelayMs);\n    this.exitRedirect(redirectUrl);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  submitUserPerformanceData(): this {\n    this.userPerformanceData.submit();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  unpresentMenu(): this {\n    this.buttonsMenu?.dispose();\n    this.buttonsMenu = undefined;\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  updateFromSettings(): this {\n    this.contextLayers.updateFromSettings();\n    this.buttonsMenu?.updateFromSettings();\n    this.updateBgmFromSettings();\n    this.pressIndicatorMgr.updateBgmFromSettings();\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get userSettingsData(): RecursiveReadonly<SbUserSettingsData> {\n    return (this.userSettings.data);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  get videoContainer(): createjs.Container | undefined {\n    return (CjsGetContainer(this.exportRoot.display, DisplayObjectNames.VideoContainer));\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  private closeSettingsPanel(): void {\n    this.restorePreviousSettings();\n    this.settingsPanel?.unpresent();\n    this.mainPanel?.updateFromSettings();\n    this.updateFromSettings();\n\n    // TODO: maybe find a way to save/restore state of scene when opening/closing\n    // blocking UI panels\n    // this.contentHandler.resume(SbPauseKinds.IsFromUi);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private continueAftarTutorial(): void {\n    this.updateFromSettings();\n    this.presentContent();\n\n    // TODO: remove if na\n    // createjs.Ticker.on(CjsEvents.TICK, this.onTickerTick, this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private deleteProgressUsingQueryParam(storybookId: string): void {\n    if (GetWindowQueryParamValue(SbQueryParams.DeleteProgress) !== null) {\n      this.deleteProgress(storybookId);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async exitRedirect(redirectUrl?: string): Promise<void> {\n    redirectUrl ??= GetWindowQueryParamValue(SbQueryParams.ExitRedirect)\n      ?? this.config.exitRedirectUrl;\n\n    if (redirectUrl) {\n      window.location.replace(redirectUrl);\n    } else {\n      console.warn('no redirect url specified');\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private getStartTimelineFrame(): number {\n    const targetStartLabel = SbDebugData.StartLabel ? SbDebugData.StartLabel : SbFrameLabels.Start;\n    let startFrameNumber: number;\n    if (typeof (targetStartLabel) === 'string') {\n      const startLabel = CjsGetMovieClipLabels(this.exportRoot.display)\n        .find((frameLabel) => frameLabel.label === targetStartLabel);\n      startFrameNumber = startLabel?.position ?? this.exportRoot.currentFrame + 1;\n    } else {\n      startFrameNumber = targetStartLabel;\n    }\n\n    console.info('start frame number:', startFrameNumber);\n    return (startFrameNumber);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async handleNavAction(direction: SbNavToDirection,\n    navParams: SbNavToParams | undefined): Promise<void> {\n    this.mainPanel?.unpresentNavUi();\n\n    await this.playNavButtonSound();\n\n    if (navParams) {\n      this.contentHandler.navTo(direction, navParams);\n    } else {\n      this.contentHandler.resume(SbPauseKinds.IsFromNav);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initDevicesPanel(): this {\n    const container = CjsGetMovieClip(this.exportRoot.display, DisplayObjectNames.DevicesPanel);\n    if (!container) {\n      console.warn('no devices panel found with name:', DisplayObjectNames.DevicesPanel);\n      return (this);\n    }\n\n    this.devicesPanel = new SbDevicesPanel(container, this)\n      .addListener(SbUiComponentEvents.CLOSE, this.onDevicesPanelClose, this)\n      .setVisible(false);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initMainPanel(): this {\n    const container = CjsGetMovieClip(this.exportRoot.display, DisplayObjectNames.MainPanel);\n    if (!container) {\n      console.warn('no main panel found with name:', DisplayObjectNames.MainPanel);\n      return (this);\n    }\n\n    this.mainPanel = new SbMainPanel(container, this)\n      .addListener(SbMainPanelEvents.NEXT, this.onMainPanelNextPressed, this)\n      .addListener(SbMainPanelEvents.PREV, this.onMainPanelPrevPressed, this)\n      .addListener(SbMainPanelEvents.RESTART, this.onMainPanelRestartPressed, this)\n      .addListener(SbMainPanelEvents.SETTINGS, this.onMainPanelSettingsPressed, this)\n      .setVisible(true)\n      .unpresentNavUi();\n\n    // TODO\n    this.mainPanel.progressBar?.setVisible(false);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initPasscodePanel(): this {\n    const container = CjsGetMovieClip(this.exportRoot.display, DisplayObjectNames.PasscodePanel);\n    if (!container) {\n      console.warn('no passcode panel found with name:', DisplayObjectNames.PasscodePanel);\n      return (this);\n    }\n\n    this.passcodePanel = new SbPasscodePanel(container, this)\n      .addListener(SbUiComponentEvents.CLOSE, this.onPasscodePanelClose, this)\n      .addListener(SbPasscodePanelEvents.SUBMIT, this.onPasscodePanelSubmit, this)\n      .setVisible(false);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initSceneHandler(): void {\n    const HandlerCtor = this.config.sceneHandler;\n    if (HandlerCtor) {\n      this.sceneHandler = new HandlerCtor(this);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initSettingsPanel(): this {\n    const container = CjsGetMovieClip(this.exportRoot.display, DisplayObjectNames.SettingsPanel);\n    if (!container) {\n      console.warn('no settings panel found with name:', DisplayObjectNames.SettingsPanel);\n      return (this);\n    }\n\n    this.settingsPanel = new SbSettingsPanel(container, this)\n      .addListener(SbUiComponentEvents.CLOSE, this.onSettingsPanelClose, this)\n      .addListener(SbSettingsPanelEvents.EXIT, this.onSettingsPanelExit, this)\n      .addListener(SbSettingsPanelEvents.SAVE, this.onSettingsPanelSave, this)\n      .setVisible(false);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private initTiggieIntro(): this {\n    const container = CjsGetMovieClip(this.exportRoot.display, DisplayObjectNames.TiggieIntro);\n    if (!container) {\n      console.warn('no tiggie intro display found with name:', DisplayObjectNames.TiggieIntro);\n      return (this);\n    }\n\n    this.tiggieIntro = new SbTiggieIntro(container, this)\n      .addListener(SbUiComponentEvents.CLOSE, this.onTiggieIntroClose, this)\n      .setVisible(false);\n\n    return (this);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onButtonsMenuOptionPressed(_buttonName: string, isCorrect: boolean,\n    menu: SbButtonsMenu): void {\n    if (isCorrect && menu.quizData) {\n      this.userPerformanceData.addQuizData(menu.quizData);\n      console.info('user performance data:', this.userPerformanceData);\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onDevicesPanelClose(): void {\n    if (this.devicesPanel) {\n      this.devicesPanel.unpresent().dispose();\n      this.devicesPanel = undefined;\n    }\n\n    if (!this.presentTutorial()) {\n      this.presentContent();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onMainPanelNextPressed(): void {\n    this.handleNavAction(SbNavToDirections.Next, this.navParams);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onMainPanelPrevPressed(): void {\n    this.handleNavAction(SbNavToDirections.Prev, this.navParams);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onMainPanelRestartPressed(): void {\n    this.handleNavAction(SbNavToDirections.Restart, this.navParams);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onMainPanelSettingsPressed(): void {\n    // TODO\n    // this.contentHandler.pause(SbPauseKinds.IsFromUi);\n\n    this.mainPanel?.setVisible(false);\n\n    if (SbDesignData.AreSettingsProtected) {\n      this.passcodePanel?.present();\n    } else {\n      this.presentSettingsPanel();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onPasscodePanelClose(): void {\n    this.passcodePanel?.unpresent();\n    this.mainPanel?.setVisible(true);\n\n    // TODO\n    // this.contentHandler.resume(SbPauseKinds.IsFromUi);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onPasscodePanelSubmit(isCorrect: boolean): void {\n    if (isCorrect) {\n      this.mainPanel?.setVisible(false);\n      this.passcodePanel?.setVisible(false);\n      this.presentSettingsPanel();\n    } else {\n      this.passcodePanel?.clearAnswer();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSettingsPanelClose(): void {\n    this.closeSettingsPanel();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private onSettingsPanelExit(): void {\n    this.createMessagePanel('Are you sure you want to exit the activity?',\n      this.lib.animateClasses.MessagePanelYNDisplay)\n      .then((id) => {\n        if (id === SbMessagePanelButtonIds.Yes) {\n          this.exitRedirect();\n        }\n      });\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async onSettingsPanelSave(settingsPanel: SbSettingsPanel): Promise<void> {\n    this.userSettings.apply(settingsPanel.settingsData);\n    this.previousSettingsData = undefined;\n    await this.saveSettings(SbSaveSettingsCommonConfig());\n    this.closeSettingsPanel();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  // TODO\n  /*\n  private onStartButtonPressed(): void {\n    if (!this.presentTutorial()) {\n      this.presentContent();\n    }\n  }\n  */\n\n  // ----------------------------------------------------------------------------------------------\n  private onTiggieIntroClose(): void {\n    this.tiggieIntro?.dispose();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private async playNavButtonSound(): Promise<void> {\n    return (\n      new Promise<void>((resolve) => {\n        if (this.config.shouldWaitForNavSounds) {\n          if (!this.playSound({\n            audioId: this.config.navButtonsSoundKey,\n            completeCallback: () => {\n              resolve();\n            },\n          })) {\n            resolve();\n          }\n        } else {\n          this.playSound(this.config.navButtonsSoundKey);\n          resolve();\n        }\n      })\n    );\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentContent(): void {\n    const { storybookId } = this.engineConfig;\n    const storybookState = storybookId\n      ? this.userSettings.data.storybooksStates[storybookId]\n      : undefined;\n\n    if (storybookState?.progresFrameOrLabel === undefined) {\n      this.presentContent2();\n      this.contentHandler.start();\n    } else {\n      this.createMessagePanel(\n        'Would you like to resume form where you left off?',\n        this.lib.animateClasses.MessagePanelYNDisplay,\n        {\n          buttonLabels: {\n            [SbMessagePanelButtonIds.Yes]: 'Yes, Resume',\n            [SbMessagePanelButtonIds.No]: 'No, Restart',\n          },\n        },\n      ).then((id) => {\n        let startFrame: number | string;\n        if (id === SbMessagePanelButtonIds.Yes) {\n          startFrame = storybookState.progresFrameOrLabel;\n          if (typeof (startFrame) === 'number') {\n            startFrame += 1;\n          }\n        } else {\n          if (storybookId) {\n            this.deleteProgress(storybookId);\n          }\n\n          startFrame = 0;\n        }\n\n        this.presentContent2(startFrame);\n      });\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentContent2(startFrameOrLabel?: number | string): void {\n    if (!this.tiggieIntro || this.shouldSkipIntro()) {\n      this.presentContent3(startFrameOrLabel);\n    } else {\n      this.tiggieIntro.present();\n      this.tiggieIntro.once(SbUiComponentEvents.CLOSE, () => {\n        this.tiggieIntro?.dispose();\n        this.tiggieIntro = undefined;\n        this.presentContent3(startFrameOrLabel);\n      });\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentContent3(startFrameOrLabel?: number | string): void {\n    if (this.mainPanel) {\n      this.mainPanel.settingsButtonVisible = true;\n    }\n\n    this.contentHandler.start(startFrameOrLabel);\n    this.contextLayers.start();\n    this.startSceneHandler();\n\n    this.userPerformanceData.start();\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentDevicesPanel(): void {\n    if (this.devicesPanel) {\n      if (this.mainPanel) {\n        this.mainPanel.settingsButtonVisible = false;\n      }\n\n      this.devicesPanel.present();\n    } else if (!this.presentTutorial()) {\n      this.presentContent();\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentSettingsPanel(): void {\n    this.previousSettingsData = CloneObject(this.userSettings.data);\n    this.settingsPanel?.present(this.userSettings.data);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private presentTutorial(): boolean {\n    if (!this.mainPanel || !this.shouldShowTutorial() || !this.mainPanel.presentTutorial()) {\n      return (false);\n    }\n\n    this.mainPanel.once(SbMainPanelEvents.TUTORIAL_COMPLETE, async (isCompleted: boolean) => {\n      if (isCompleted) {\n        this.userSettings.data.hasCompletedTutorial = true;\n        await this.saveSettings();\n      }\n\n      this.mainPanel?.unpresentTutorial();\n      this.continueAftarTutorial();\n    });\n\n    return (true);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private restorePreviousSettings(): void {\n    if (this.previousSettingsData) {\n      this.userSettings.apply(this.previousSettingsData);\n      this.previousSettingsData = undefined;\n    }\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private shouldShowTutorial(): boolean {\n    return (!this.userSettingsData.hasCompletedTutorial);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private shouldSkipIntro(): boolean {\n    return (SbDebugData.ShouldSkipIntro || this.config.shouldSkipIntro);\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  private updateBgmFromSettings(): void {\n    if (this.bgmSoundInstance) {\n      this.bgmSoundInstance.volume = this.userSettingsData.audio.bgm.isEnabled\n        ? this.userSettings.data.audio.bgm.volume\n        : 0;\n    }\n  }\n}\n","import IStorybookEngine from '../../IStorybookEngine';\nimport SbScene from '../SbScene';\n\nexport default abstract class SbBaseSceneHandler {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n  readonly engine: IStorybookEngine;\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  constructor(engine: IStorybookEngine) {\n    this.engine = engine;\n  }\n\n  // ----------------------------------------------------------------------------------------------\n  abstract run(...params: unknown[]): void;\n\n  // ==============================================================================================\n  // protected\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  protected get exportRoot(): SbScene {\n    return (this.engine.exportRoot);\n  }\n\n  // ==============================================================================================\n  // private\n  // ==============================================================================================\n}\n","import SbScene from '../../../engine/storybookScene/SbScene';\nimport Wait from '../../../utils/timers/Wait';\n\nconst WAIT_DELAY_BETWEEN_PRESENTING_CHOICES_MS = 1500;\n\nfunction complete(scene: SbScene): void {\n  scene.playSound('snd_complete.mp3');\n  scene.engine.storybookComplete();\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction correct(scene: SbScene): void {\n  scene.playSound('snd_star_intro.mp3');\n  scene.playTo(\n    'quiz_correct_end',\n    'quiz_correct_begin',\n    () => {\n      complete(scene);\n    },\n  );\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction presentQuizMenu(scene: SbScene): void {\n  scene.stop('quiz_menu');\n  scene.engine.presentMenu({\n    buttons: {\n      sinkButtonDisplay: {\n        isCorrect: false,\n      },\n\n      sinkSpeakerButtonDisplay: {\n        callback: () => {\n          scene.playVoices('SBL0001_WherecanLucypeeIsitint_480k_stereowav');\n        },\n      },\n\n      floorButtonDisplay: {\n        isCorrect: false,\n      },\n\n      floorSpeakerButtonDisplay: {\n        callback: () => {\n          scene.playVoices('SBL0002_Onthefloor_480k_stereowav');\n        },\n      },\n\n      toiletButtonDisplay: {\n        isCorrect: true,\n        callback: (): void => {\n          scene.engine.unpresentMenu();\n          correct(scene);\n        },\n      },\n\n      toiletSpeakerButtonDisplay: {\n        callback: () => {\n          scene.playVoices('SBL0003_orinthetoiletbowl_480k_stereowav');\n        },\n      },\n    },\n\n    defaultButtonName: 'sinkButtonDisplay',\n    isQuiz: true,\n    shouldCloseMenu: false,\n  });\n}\n\n// ------------------------------------------------------------------------------------------------\nexport default async function LucyS2Quiz(scene: SbScene): Promise<void> {\n  await scene.playSyncVoice(\n    'SBL0001_WherecanLucypeeIsitint_480k_stereowav',\n    'quiz_voc_begin',\n    'quiz_voc_end',\n  );\n\n  await Wait(WAIT_DELAY_BETWEEN_PRESENTING_CHOICES_MS);\n\n  await scene.playSyncVoice(\n    'SBL0002_Onthefloor_480k_stereowav',\n    'quiz_floor_voc_begin',\n    'quiz_floor_voc_end',\n  );\n\n  await Wait(WAIT_DELAY_BETWEEN_PRESENTING_CHOICES_MS);\n\n  await scene.playSyncVoice(\n    'SBL0003_orinthetoiletbowl_480k_stereowav',\n    'quiz_toilet_voc_begin',\n    'quiz_toilet_voc_end',\n  );\n\n  await Wait(WAIT_DELAY_BETWEEN_PRESENTING_CHOICES_MS);\n\n  presentQuizMenu(scene);\n}\n","import SbScene from '../../../engine/storybookScene/SbScene';\nimport LucyS2Quiz from './LucyS2Quiz';\n\n// ------------------------------------------------------------------------------------------------\nfunction openQuiz(scene: SbScene): void {\n  scene.playTo(\n    'quiz_open_end',\n    'quiz_open_begin',\n    () => {\n      LucyS2Quiz(scene);\n    },\n  );\n}\n\n// ------------------------------------------------------------------------------------------------\nfunction thinkOfToiletBowl(scene: SbScene): void {\n  scene.playTo(\n    'where_pee_complete',\n    'acc_pee_end',\n    () => {\n      openQuiz(scene);\n    },\n  );\n}\n\n// ------------------------------------------------------------------------------------------------\nasync function playWherePeeAac(scene: SbScene): Promise<void> {\n  await scene.playSyncVoice(\n    'SBL0006_Where_480k_stereowav',\n    'aac_where_begin',\n    'aac_where_end',\n  );\n\n  await scene.playSyncVoice(\n    'SBL0007_pee_480k_stereowav',\n    'acc_pee_begin',\n    'acc_pee_end',\n  );\n\n  scene.engine.presentNav({\n    next: {\n      callback: () => {\n        thinkOfToiletBowl(scene);\n      },\n    },\n\n    prev: {\n      callback: () => {\n        // eslint-disable-next-line no-use-before-define\n        LucyS2WherePee(scene);\n      },\n    },\n\n    restart: {\n      callback: () => {\n        scene.engine.startSceneHandler();\n      },\n    },\n  });\n}\n\n// ------------------------------------------------------------------------------------------------\nexport default function LucyS2WherePee(scene: SbScene): void {\n  scene.playTo(\n    'run_toilet_wait_end',\n    'run_toilet_wait_begin',\n    async () => {\n      await scene.playSyncVoice(\n        'SBL0002_butwherecanshepee_480k_stereowav',\n        'voc_where_pee_begin',\n        'voc_where_pee_end',\n      );\n\n      scene.playTo(\n        'aac_where_begin',\n        'voc_where_pee_end',\n        () => {\n          playWherePeeAac(scene);\n        },\n      );\n    },\n  );\n}\n","import { SbFrameLabels } from '../../../engine/data/SbAssetLib';\nimport SbScene from '../../../engine/storybookScene/SbScene';\nimport LucyS2WherePee from './LucyS2WherePee';\n\n// ------------------------------------------------------------------------------------------------\nasync function playRunToiletAac(scene: SbScene): Promise<void> {\n  await scene.playSyncVoice(\n    'SBL0004_run_480k_stereowav',\n    'run_aac_begin',\n    'run_aac_end',\n  );\n\n  await scene.playSyncVoice(\n    'SBL0005_toilet_480k_stereowav',\n    'toilet_aac_begin',\n    'toilet_aac_end',\n  );\n\n  scene.engine.presentNav({\n    next: {\n      callback: () => {\n        LucyS2WherePee(scene);\n      },\n    },\n\n    prev: {\n      callback: () => {\n        scene.engine.startSceneHandler();\n      },\n    },\n\n    restart: {\n      callback: () => {\n        scene.engine.startSceneHandler();\n      },\n    },\n  });\n}\n\n// ------------------------------------------------------------------------------------------------\nexport default function LucyS2EnterBathroom(scene: SbScene): void {\n  scene.playTo(\n    'voc_runs_toilet_begin',\n    SbFrameLabels.Start,\n    async () => {\n      await scene.playSyncVoice(\n        'SBL-0001_Sherunstothetoilet_480k_stereowav',\n        'voc_runs_toilet_begin',\n        'voc_runs_toilet_end',\n      );\n\n      scene.engine.presentNav({\n        defaultSelectedNavButtonId: 'next',\n        navButtonsToHide: ['prev', 'restart'],\n        params: {\n          next: {\n            callback: () => {\n              playRunToiletAac(scene);\n            },\n          },\n        },\n      });\n    },\n  );\n}\n","import SbBaseSceneHandler from '../../../engine/storybookScene/utils/SbBaseSceneHandler';\nimport LucyS2EnterBathroom from './LucyS2EnterBathroom';\n\nexport default class LucyPeeScene2Handler extends SbBaseSceneHandler {\n  // ==============================================================================================\n  // properties\n  // ==============================================================================================\n\n  // ==============================================================================================\n  // public\n  // ==============================================================================================\n\n  // ----------------------------------------------------------------------------------------------\n  override run(): void {\n    this.engine.playBgm('bgm_hit_the_big_timethe_flamingo');\n    LucyS2EnterBathroom(this.exportRoot);\n  }\n}\n","import StorybookEngine from './engine/StorybookEngine';\nimport * as SceneHandlers from './sceneHandlers/lucyPee';\n\nStorybookEngine.LogVersion();\n\nexport {\n  SceneHandlers,\n  StorybookEngine as Engine,\n};\n"],"names":["has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","name","handlers","i","l","ee","listeners","a1","a2","a3","a4","a5","len","args","length","j","module","assign","target","source","key","defaultConverter","value","init","converter","defaultAttributes","set","attributes","stringifiedAttributes","attributeName","get","cookies","jar","parts","found","api","CjsEvents","CjsEventsArray","CjsGetDisplayObject","container","object","CjsGetMovieClip","clip","CjsGetMovieClipLabels","movieClip","IsObject","CloneArray","out","CloneObject","IsPlainObject","SbAudioIds","SbFrameLabels","SbDesignData","SbMessagePanelButtonIds","SbMessagePanelButtonIdsArray","SbInputDevices","SbInputDevicesArray","SbNavToDirections","SbNavToDirectionsArray","SbDefaults","toStr","isArguments","str","isArgs","keysShim","require$$0","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","o","ctor","excludedKeys","hasAutomationEqualityBug","k","equalsConstructorPrototypeIfNotBuggy","isObject","isFunction","isString","theKeys","skipProto","skipConstructor","implementation","slice","origKeys","require$$1","originalKeys","keysWorksWithArguments","objectKeys","shams","obj","sym","symObj","symVal","syms","descriptor","origSymbol","hasSymbolSham","hasSymbols","test","$Object","hasProto","ERROR_MESSAGE","max","funcType","concatty","a","b","arr","slicy","arrLike","offset","joiny","joiner","that","bound","binder","result","boundLength","boundArgs","Empty","functionBind","call","$hasOwn","bind","hasown","undefined","$SyntaxError","$Function","$TypeError","getEvalledConstructor","expressionSyntax","$gOPD","throwTypeError","ThrowTypeError","getProto","x","needsEval","TypedArray","INTRINSICS","e","errorProto","doEval","gen","LEGACY_ALIASES","require$$2","hasOwn","require$$3","$concat","$spliceApply","$replace","$strSlice","$exec","rePropName","reEscapeChar","stringToPath","string","first","last","match","number","quote","subString","getBaseIntrinsic","allowMissing","intrinsicName","alias","getIntrinsic","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","isOwn","part","desc","GetIntrinsic","$defineProperty","hasPropertyDescriptors","hasPropertyDescriptors_1","gopd","defineDataProperty","property","nonEnumerable","nonWritable","nonConfigurable","loose","keys","concat","supportsDescriptors","defineProperty","predicate","defineProperties","map","predicates","props","defineProperties_1","define","hasDescriptors","gOPD","$floor","setFunctionLength","functionLengthIsConfigurable","functionLengthIsWritable","$apply","$call","$reflectApply","$max","originalFunction","func","applyBind","callBind","$indexOf","callBound","toObject","$push","$propIsEnumerable","originalGetSymbols","source1","to","s","from","getSymbols","nextKey","propValue","lacksProperEnumerationOrder","letters","actual","assignHasPendingExceptions","thrower","polyfill","getPolyfill","shim","require$$4","object_assign","functionsHaveNames","$bind","functionsHaveNames_1","functionsHaveConfigurableNames","setFunctionName","calls","TypeErr","regex","proto","flagsBound","define$2","regexp_prototype_flags","hasToStringTag","$toString","isStandardArguments","isLegacyArguments","supportsStandardArguments","hasMap","mapSizeDescriptor","mapSize","mapForEach","hasSet","setSizeDescriptor","setSize","setForEach","hasWeakMap","weakMapHas","hasWeakSet","weakSetHas","hasWeakRef","weakRefDeref","booleanValueOf","objectToString","functionToString","$match","$slice","$toUpperCase","$toLowerCase","$test","$join","$arrSlice","bigIntValueOf","gOPS","symToString","hasShammedSymbols","toStringTag","gPO","O","addNumericSeparator","num","sepRegex","int","intStr","dec","utilInspect","inspectCustom","inspectSymbol","isSymbol","objectInspect","inspect_","options","depth","seen","opts","customInspect","numericSeparator","inspectString","bigIntStr","maxDepth","isArray","indent","getIndent","indexOf","inspect","noIndent","newOpts","isRegExp","nameOf","arrObjKeys","symString","markBoxed","isElement","attrs","wrapQuotes","xs","singleLineValues","indentedJoin","isError","isMap","mapParts","collectionOf","isSet","setParts","isWeakMap","weakCollectionOf","isWeakSet","isWeakRef","isNumber","isBigInt","isBoolean","global","isDate","ys","isPlainObject","protoTag","stringTag","constructorTag","tag","defaultStyle","quoteChar","f","m","remaining","trailer","lowbyte","c","n","type","size","entries","joinedEntries","baseIndent","lineJoiner","isArr","symMap","$WeakMap","$Map","$weakMapGet","$weakMapSet","$weakMapHas","$mapGet","$mapSet","$mapHas","listGetNode","list","prev","curr","listGet","objects","node","listSet","listHas","sideChannel","$wm","$m","$o","channel","SLOT","slot","slots","V","internalSlot","$StopIteration","stopIterationIterator","origIterator","siIterator","iterator","done","toString","isarray","strValue","tryStringObject","strClass","$Set","exported","$setHas","getStopIterationIterator","require$$8","require$$9","$iterator","esGetIteratorModule","iterable","require$$5","$arrayPush","$charCodeAt","$stringSlice","advanceStringIndex","S","index","second","getArrayIterator","arraylike","getNonCollectionIterator","noPrimordialCollections","nextIndex","require$$6","require$$7","$mapForEach","$setForEach","$mapIterator","$setIterator","$mapAtAtIterator","$setAtAtIterator","getCollectionIterator","v","values","numberIsNaN","objectIs","fnToStr","reflectApply","badArrayLike","isCallableMarker","_","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","objectClass","fnClass","genClass","ddaClass","ddaClass2","ddaClass3","isIE68","isDDA","all","isCallable","hasOwnProperty","forEachArray","array","receiver","forEachString","forEachObject","forEach","thisArg","forEach_1","possibleNames","g","availableTypedArrays","typedArrays","getPrototypeOf","cache","typedArray","superProto","tryTypedArrays","getter","trySlices","whichTypedArray","isTypedArray","$ArrayBuffer","$Float32Array","$byteLength","abSlice","$abSlice","isArrayBuffer","getDay","tryDateObject","dateClass","isDateObject","isRegexMarker","badStringifier","throwRegexMarker","regexClass","isRegex","hasLastIndexDataProperty","isSharedArrayBuffer","numToStr","tryNumberObject","numClass","isNumberObject","$boolToStr","tryBooleanObject","boolClass","isBooleanObject","symToStr","symStringRegex","isSymbolObject","isSymbolModule","$BigInt","hasBigints","hasBigInts","tryBigInt","isBigintModule","whichBoxedPrimitive","$WeakSet","isWeakmap","isWeaksetModule","whichCollection","arrayBufferByteLength","ab","flags","getIterator","getSideChannel","is","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","byteLength","require$$17","sabByteLength","$getTime","$objToString","$mapSize","$setAdd","$setDelete","$setSize","setHasEqualElement","val1","internalDeepEqual","findLooseMatchingPrimitives","prim","mapMightHaveLoosePrim","item","altValue","curB","looseOpts","setMightHaveLoosePrim","mapHasEqualEntry","key1","item1","key2","expected","actualBoxed","expectedBoxed","hasActual","hasExpected","sentinel","objEquiv","isBuffer","setEquiv","iA","iB","resultA","resultB","mapEquiv","item2","aIsArray","bIsArray","aIsError","bIsError","aIsRegex","bIsRegex","aIsDate","bIsDate","aWhich","bWhich","aIsBuffer","bIsBuffer","aIsArrayBuffer","bIsArrayBuffer","aIsSAB","bIsSAB","ka","kb","aCollection","bCollection","deepEqual","ParseBoolean","defaultValue","numberValue","ParseStringToDataObject","rawData","jData","error","IsFiniteNumber","Clamp","min","ParseNumber","parseBgm","defaultData","SbParseAudioSettings","IncludesIs","parseInputDevice","SbParseDeviceSettings","SbParseStorybookSettings","IsValidNumber","IsValidPositiveZeroInteger","IsValidString","IsValidNonEmptyString","parseStoryBookState","testData","SbParseUserStorybooksStates","storyBookId","storyBookState","parsedStoryBookState","getSourceObject","SbUserSettingsDataParser","sourceObject","SbUserSettingsStorageKey","SbUserSettingsStorage","parserData","settings","settingsString","SbUserSettings","__publicField","data","CjsGetBounds","displayObject","shouldTryNominalBounds","bounds","RgbColor","redOrRgbHexColor","green","blue","areNormalized","normalizedColorComponent","hex","r","rs","gs","bs","color","colorComponent","CjsApplyColor","rgbColor","rx","gx","bx","ax","filter","bnds","UpdateCaptionHilitesFromSettings","captionHilitesDisplay","storybookSettings","Colors","DisplayObjectNames","SbContextLayers","engine","namePrefix","childDisplayObject","_a","hilitesDisplay","labels","captionHilitesLabels","currentFrame","hilitesFrame","targetLabel","label","targetFrame","currentCaptionHiliteLabel","captionsDisplay","aacSymbolsDisplay","startTimelineFrame","totalFrames","SbUiComponentEvents","SearchForMapKeyByValue","valueToSearchFor","mapIterator","current","SetPropertyInArray","items","CjsSetVisible","isVisible","CjsButtonLabels","CjsButtonEvents","CjsEventsHandler","eventName","callback","isOnce","eventNames","CjsDisplayObject","display","parent","alpha","isEnabled","y","CjsGetBitmapText","text","CjsSetText","textObject","message","CjsGetText","CjsGetTextObject","CjsGetMovieClipLabelsByName","sourceLabels","sourceLabel","CjsButtonsOverHelperKludge","CjsButtonHelper","outLabel","overLabel","downLabel","hitArea","hitLabel","selectedLabel","isSelected","should","keyLabel","actingOutLabel","hitFrame","prevFrame","childHitDisplay","CjsButtonDisplayObjectNames","CjsButton","hitAreaOrAnLibClipCtor","txtLabel","shouldUseDisabledState","HitAreaOrAnLibClipCtor","_event","CjsGetButton","movieClipDisplayOrName","button","CjsCompoundButton","buttonDisplayNames","_container","_buttonDisplayNames","_hitAreaOrAnLibClipCtor","buttons","CjsGetContainer","CjsCheckboxCompNames","CjsCheckbox","isOn","onDisplayName","offDisplayName","_b","onButton","offButton","displayName","CjsCreateCheckbox","checkboxDisplay","checkbox","SbUiComponent","checkbbox","cpButtonContainer","cpButton","closeButtonHitAreaOrAnLibClipCtor","GlobalDomEvents","KeyCodes","SbInputDeviceHandlerEvents","HasOwnProperty","GetValue","sourceType","sourceRecord","GetNumberValue","Timer","config","_config","timer","currentRepeatCount","SbInputDeviceHandler","newEnabled","CjsDragManagerEvents","CjsDragManager","displayTarget","inputTarget","sourceBounds","CjsSliderEvents","CjsSliderCompNames","CjsSlider","handleHitAreaOrAnLibClipCtor","_c","shouldEmitChanged","handleBoundsWt","handleBoundsWt2","backBounds","boundxCenterY","x1","range","back","backHitArea","eventsHandler","dragBounds","fill","handle","shouldUpdateHandle","newBounds","y1","y2","SbProgressBar","CjsResolveFrame","clipOrTween","frameOrLabel","tween","frame","SbUserAudioSettingsDataKeys","SbUserAudioSettingsDataKeysArray","SbResolveSceneDisplay","displayOrCtorName","displayClasses","DisplayClassCtor","SbScene","isContainerForDisplay","frameNumberOrName","params","fc","indexOrName","child","startFrameOrLabel","audioIdOrConfig","volume","loop","completeCallback","callbackContext","audioId","endFrameOrLabel","resolve","startFrame","endFrame","sound","soundIds","position","callbackData","syncedSoundData","syncDuration","progress","SbTutorialManagerEvents","SbTutorialManager","mainPanel","SbMainPanelDisplayObjectNames","SbMainPanelEvents","SbHelpfulTipsPanelEvents","SbHelpfulTipsPanel","NavButtonDirections","SbMainPanel","direction","navButton","directionToHide","didVisibilityChange","id","lib","configs","navButtons","defaultSelectedNavButtonId","SbMessagePanelEvents","SbMessagePanelRejectReasons","CjsGetTextMetrics","GetStringValue","SbResolveMessagePanelDimBackConfig","SbResolveMessagePanelConfig","_SbMessagePanelSingleton","clearOnlyIfMatch","SbMessagePanelSingleton","SbMessagePanel","stage","MessagePanelDisplay","reject","panelDisplay","panel","canvasSize","textAreaNode","textMessage","metrics","calculatedHeight","canvasOrId","canvas","shape","autoCloseDelayConfig","buttonId","labelText","SbPasscodePanelEvents","RandomIntegerInclusive","GenerateChallenge","sum","value1","value2","SbPasscodePanel","numberAsTest","cssColor","buttonIndex","CjsCreateSlider","sliderUpdateCallback","sliderContainer","slider","SbSettingsSubPanel","SbSettingsAudioSubPanel","setting","isSettingEnabled","uiPair","pairs","settingKey","SbRadioGroupEvents","CjsRadioGroup","radioButtons","_id","idOrButton","entriesIterator","currentEntry","radioButtonToExclude","radioButtonJustSetOn","DisplayNamesMap","SbSettingsDevicesSubPanel","groupData","inputDevice","deviceCheckBox","group","SbCaptionHiliteColorCheckbox","fillObject","DesignStroke","fillDisplay","OffBinaryButtonId","OnBinaryButtonId","SbSettingsStorybookSubPanel","hiliteColor","offButtonDisplayName","onButtonDisplayName","offCheckbox","onCheckbox","SbSettingsPanelEvents","SbSettingsPanel","settingsData","SbPauseKinds","SbContentVideo","videoElement","video","timeInSecs","timelineFrame","SbContentHandlerEvents","SbVideoMath","contentVideoElement","SbIsNavToParam","SbNavActions","ContentVideoId","SbContentHandler","videoUrl","queue","navToParams","navParam","_navToParam","targetFrameOrLabel","pauseKind","param","action","_startTimelineFrame","GetWindowQueryParamValue","paramName","searchParamsValues","SbQueryParams","SbGetComp","compId","SbGetCompLib","comp","Props","getDomContainers","inOut","_inOut","elemId","onWindowResize","w","h","iw","ih","pRatio","xRatio","yRatio","sRatio","domContainers","SbMakeResponsive","isResp","respDim","isScale","scaleType","sbEnqueContentVideo","loader","contentVideoUrl","setProgress","progressBarFill","SbDocPrepUtil","GetBooleanValue","SbResolveEngineButtonsMenuConfig","configOut","DefaultEngineConfig","resolveStorybookId","configIn","resolveVideoFps","videoFps","SbResolveEngineConfig","IsEven","IsOdd","ResolveHiliteIncorrectConfig","SbHiliteIncorrect","originalTransform","flipFactor","SbResolveButtonsMenuButtonConfig","buttonConfig","sourceButtonConfig","SbButtonsMenuEvents","SbButtonsMenu","sourceConfig","buttonConfigsByName","thisConfig","resolvedConfigs","selectedButton","displayContainer","buttonsConfig","buttonName","defaultButtonIndex","baseButton","soundKey","currentSelectedButton","newSelectedButton","isCorrect","SbIsPresentNavConfig","isNavToParams","SbResolvePresentNavConfig","SbDebugData","removeExtension","filename","lastDotIndex","getLastPath","validateResourceName","validName","ValidateResourceNames","resolveLoopParam","SbPlaySound","resolvedAudioId","soundInstance","playNextVoice","stateData","soundId","SbPlayVoice","IsValidPositiveZeroNumber","CjsIsMovieCip","IsValidPositiveNumber","SbPressIndicator","indicator","delayInSecs","delayMs","_SbPressIndicatorManager","indicatorDisplayName","SbPressIndicatorManager","createResultMessagePanel","shouldAutoCloseSettingsPanel","SbSaveSettings","userSettings","resultMessage","saveOk","SbSaveSettingsCommonConfig","SbDevicesPanel","Wait","FrameLabels","SbTiggieIntro","SbUserPerformanceData","stopTime","Cookies","totalTimeMin","totalSelection","percentageCorrect","currentPercentagesSum","quiz","currentTotalSelection","CjsDestroySound","StorybookEngine","exportRoot","messagePanelDisplay","storybooksStates","_d","state","exitRedirectDelayMs","cookieKey","redirectUrl","storybookId","targetStartLabel","startFrameNumber","startLabel","frameLabel","navParams","HandlerCtor","_buttonName","menu","settingsPanel","storybookState","isCompleted","SbBaseSceneHandler","WAIT_DELAY_BETWEEN_PRESENTING_CHOICES_MS","complete","scene","correct","presentQuizMenu","LucyS2Quiz","openQuiz","thinkOfToiletBowl","playWherePeeAac","LucyS2WherePee","playRunToiletAac","LucyS2EnterBathroom","LucyPeeScene2Handler"],"mappings":"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","x_google_ignoreList":[0,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78]}